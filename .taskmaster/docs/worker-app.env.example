# ==============================================
# COMETA Worker App - Environment Variables
# ==============================================
# Копируйте этот файл в ваш worker app как .env
# Заполните значения на основе вашего окружения

# ==============================================
# SUPABASE CONNECTION (Основная БД)
# ==============================================
# URL вашего Supabase проекта
NEXT_PUBLIC_SUPABASE_URL=https://oijmohlhdxoawzvctnxx.supabase.co

# Anon Key - для client-side запросов (безопасен для браузера)
# Используется для запросов из React компонентов
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Service Role Key - ТОЛЬКО для server-side (API routes)
# ⚠️ НИКОГДА не используйте в client-side коде!
# ⚠️ НЕ добавляйте префикс NEXT_PUBLIC_
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ==============================================
# POSTGRESQL DIRECT CONNECTION (Опционально)
# ==============================================
# Используйте если нужны прямые SQL запросы
# Не требуется если используете только Supabase Client

# Connection pooler (рекомендуется)
DATABASE_URL=postgresql://postgres.oijmohlhdxoawzvctnxx:[PASSWORD]@aws-1-eu-north-1.pooler.supabase.com:6543/postgres

# Индивидуальные параметры подключения
PGHOST=aws-1-eu-north-1.pooler.supabase.com
PGPORT=6543
PGDATABASE=postgres
PGUSER=postgres.oijmohlhdxoawzvctnxx
PGPASSWORD=[YOUR_DATABASE_PASSWORD]

# ==============================================
# COMETA API (Опционально)
# ==============================================
# URL основного COMETA приложения
# Используйте если хотите обращаться к REST API вместо прямых запросов к БД

# Development
COMETA_API_URL=http://localhost:3000

# Production (раскомментируйте для продакшена)
# COMETA_API_URL=https://cometa.your-domain.com

# ==============================================
# APP CONFIGURATION
# ==============================================
# Название приложения
NEXT_PUBLIC_APP_NAME=COMETA Worker App

# Язык по умолчанию (ru, en, de, uz, tr)
NEXT_PUBLIC_DEFAULT_LANG=ru

# ==============================================
# AUTHENTICATION (Опционально)
# ==============================================
# Если используете NextAuth в worker app

# NextAuth URL
NEXTAUTH_URL=http://localhost:3001

# NextAuth Secret (сгенерируйте: openssl rand -base64 32)
NEXTAUTH_SECRET=your-secret-key-here

# ==============================================
# РАЗВЕРТЫВАНИЕ
# ==============================================

# === DEVELOPMENT ===
# 1. Скопируйте этот файл: cp .env.example .env
# 2. Заполните SUPABASE_URL и SUPABASE_ANON_KEY
# 3. Заполните SUPABASE_SERVICE_ROLE_KEY (найти в Supabase Dashboard)
# 4. npm run dev

# === PRODUCTION ===
# 1. Используйте те же Supabase credentials что и основное приложение
# 2. Установите COMETA_API_URL на production URL
# 3. Настройте NEXTAUTH_URL на ваш домен
# 4. Используйте безопасное хранилище для secrets (Vercel Env, AWS Secrets, etc.)

# ==============================================
# БЕЗОПАСНОСТЬ
# ==============================================
# ⚠️ ВАЖНО:
# - Service Role Key обходит Row Level Security (RLS)
# - Никогда не используйте Service Role Key в client-side коде
# - Используйте Service Role Key ТОЛЬКО в API routes (app/api/*)
# - Anon Key безопасен для client-side использования
# - Не коммитьте .env файл в git (добавьте в .gitignore)

# ==============================================
# ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ
# ==============================================

# Client-side (React компонент):
# const supabase = createClient(
#   process.env.NEXT_PUBLIC_SUPABASE_URL,
#   process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
# )

# Server-side (API route):
# const supabase = createClient(
#   process.env.NEXT_PUBLIC_SUPABASE_URL,
#   process.env.SUPABASE_SERVICE_ROLE_KEY
# )

# REST API (fetch):
# const response = await fetch(
#   `${process.env.COMETA_API_URL}/api/resources/equipment-assignments?crew_id=${crewId}`
# )

# ==============================================
# ПОЛУЧЕНИЕ CREDENTIALS
# ==============================================
# Все credentials можно найти в Supabase Dashboard:
# 1. Откройте: https://supabase.com/dashboard/project/oijmohlhdxoawzvctnxx
# 2. Settings → API
# 3. Скопируйте:
#    - Project URL → NEXT_PUBLIC_SUPABASE_URL
#    - anon/public key → NEXT_PUBLIC_SUPABASE_ANON_KEY
#    - service_role key → SUPABASE_SERVICE_ROLE_KEY
# 4. Settings → Database → Connection string (URI)
#    - Скопируйте connection pooler URI → DATABASE_URL
