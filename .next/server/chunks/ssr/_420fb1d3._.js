module.exports=[32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e(a){let{reason:b,children:c}=a;throw Object.defineProperty(new d.BailoutToCSRError(b),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h(a){let{moduleIds:b}=a,c=f.workAsyncStorage.getStore();if(void 0===c)return null;let h=[];if(c.reactLoadableManifest&&b){let a=c.reactLoadableManifest;for(let c of b){if(!a[c])continue;let b=a[c].files;h.push(...b)}}return 0===h.length?null:(0,d.jsx)(d.Fragment,{children:h.map(a=>{let b=c.assetPrefix+"/_next/"+(0,g.encodeURIPath)(a);return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:b,rel:"stylesheet",as:"style"},a):((0,e.preload)(b,{as:"script",fetchPriority:"low"}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){var c;let e={};"function"==typeof a&&(e.loader=a);let f={...e,...b};return(0,d.default)({...f,modules:null==(c=f.loadableGenerated)?void 0:c.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},10528,a=>{"use strict";a.s(["default",()=>A],10528);var b=a.i(87924),c=a.i(72131),d=a.i(19721),e=a.i(98847),f=a.i(24987),g=a.i(70106);let h=(0,g.default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),i=(0,g.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var j=a.i(3544),k=a.i(44494),l=a.i(21161),m=a.i(84505),n=a.i(73320),o=a.i(99570),p=a.i(66718),q=a.i(91119),r=a.i(75083),s=a.i(80701),t=a.i(86304),u=a.i(86456);a.i(70025);var v=a.i(33217);a.i(37927),a.i(23292);var w=a.i(91938);function x(a){return(0,v.useQuery)({queryKey:["geospatial-features",a],queryFn:()=>w.geospatialApi.getFeatures(a),staleTime:3e5})}var y=a.i(47507);let z=(0,d.default)(async()=>{},{loadableGenerated:{modules:[36114]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"h-[600px] bg-muted rounded-lg flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(e.Map,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})})});function A(){var a,d,g;let[A,B]=(0,c.useState)(),[C,D]=(0,c.useState)("map"),{user:E}=(0,y.useAuth)(),{data:F}=(0,u.useProjects)({page:1,per_page:100}),{data:G}=x(),{data:H}=(0,v.useQuery)({queryKey:["geo-routes",void 0],queryFn:()=>w.geoRoutesApi.getRoutes(a),staleTime:3e5}),{data:I}=(0,v.useQuery)({queryKey:["geo-layers",void 0],queryFn:()=>w.geoLayersApi.getLayers(d),staleTime:6e5}),{data:J}=(0,v.useQuery)({queryKey:["geo-measurements",void 0],queryFn:()=>w.geoMeasurementsApi.getMeasurements(g),staleTime:3e5}),{data:K}=x({project_id:A||""}),L=A?{features:K?.total||0,routes:0,layers:0,measurements:0}:{features:G?.total||0,routes:H?.total||0,layers:I?.total||0,measurements:J?.total||0};return(0,b.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Geospatial"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Interactive maps and geospatial data management"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)(o.Button,{variant:"outline",children:[(0,b.jsx)(n.Upload,{className:"mr-2 h-4 w-4"}),"Import GIS Data"]}),(0,b.jsxs)(o.Button,{variant:"outline",children:[(0,b.jsx)(m.Download,{className:"mr-2 h-4 w-4"}),"Export Data"]}),(0,b.jsxs)(o.Button,{children:[(0,b.jsx)(l.Settings,{className:"mr-2 h-4 w-4"}),"Map Settings"]})]})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{className:"text-lg",children:"Project Selection"}),(0,b.jsx)(q.CardDescription,{children:"Choose a project to view its geospatial data, or view all data"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)(s.Select,{value:A||"all",onValueChange:a=>B("all"===a?void 0:a),children:[(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{placeholder:"Select a project"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Projects"}),F?.data?.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:a.name},a.id))]})]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(t.Badge,{variant:"secondary",children:[(0,b.jsx)(f.MapPin,{className:"w-3 h-3 mr-1"}),L.features," Features"]}),(0,b.jsxs)(t.Badge,{variant:"secondary",children:[(0,b.jsx)(h,{className:"w-3 h-3 mr-1"}),L.routes," Routes"]}),(0,b.jsxs)(t.Badge,{variant:"secondary",children:[(0,b.jsx)(i,{className:"w-3 h-3 mr-1"}),L.layers," Layers"]}),(0,b.jsxs)(t.Badge,{variant:"secondary",children:[(0,b.jsx)(j.Ruler,{className:"w-3 h-3 mr-1"}),L.measurements," Measurements"]})]})]})})]}),(0,b.jsxs)(r.Tabs,{value:C,onValueChange:D,className:"space-y-4",children:[(0,b.jsxs)(r.TabsList,{children:[(0,b.jsxs)(r.TabsTrigger,{value:"map",children:[(0,b.jsx)(e.Map,{className:"w-4 h-4 mr-2"}),"Interactive Map"]}),(0,b.jsxs)(r.TabsTrigger,{value:"features",children:[(0,b.jsx)(f.MapPin,{className:"w-4 h-4 mr-2"}),"Features"]}),(0,b.jsxs)(r.TabsTrigger,{value:"routes",children:[(0,b.jsx)(h,{className:"w-4 h-4 mr-2"}),"Routes"]}),(0,b.jsxs)(r.TabsTrigger,{value:"layers",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),"Layers"]}),(0,b.jsxs)(r.TabsTrigger,{value:"measurements",children:[(0,b.jsx)(j.Ruler,{className:"w-4 h-4 mr-2"}),"Measurements"]})]}),(0,b.jsx)(r.TabsContent,{value:"map",className:"space-y-4",children:(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{children:"Project Map"}),(0,b.jsx)(q.CardDescription,{children:"Interactive map with geospatial features, GPS tracking, and measurement tools"})]}),(0,b.jsx)(q.CardContent,{children:A?(0,b.jsx)(z,{projectId:A,height:"600px",showControls:!0,showMeasurementTools:E?.role==="admin"||E?.role==="pm",showGPSTracking:!0,defaultCenter:[52.52,13.405],defaultZoom:13}):(0,b.jsx)("div",{className:"h-[600px] bg-muted rounded-lg flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(k.Globe,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Project Selected"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Select a project above to view its geospatial data on the map"}),(0,b.jsxs)(o.Button,{onClick:()=>{F?.data?.[0]&&B(F.data[0].id)},disabled:!F?.data?.length,children:[(0,b.jsx)(e.Map,{className:"w-4 h-4 mr-2"}),"View First Project"]})]})})})]})}),(0,b.jsx)(r.TabsContent,{value:"features",className:"space-y-4",children:(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{children:"Geospatial Features"}),(0,b.jsx)(q.CardDescription,{children:"Manage points, lines, and polygons associated with your projects"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Input,{placeholder:"Search features...",className:"w-64"}),(0,b.jsxs)(s.Select,{defaultValue:"all",children:[(0,b.jsx)(s.SelectTrigger,{className:"w-32",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(s.SelectItem,{value:"point",children:"Points"}),(0,b.jsx)(s.SelectItem,{value:"line",children:"Lines"}),(0,b.jsx)(s.SelectItem,{value:"polygon",children:"Polygons"})]})]})]}),(0,b.jsxs)(o.Button,{children:[(0,b.jsx)(f.MapPin,{className:"w-4 h-4 mr-2"}),"Add Feature"]})]}),(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(f.MapPin,{className:"w-8 h-8 mx-auto mb-2"}),(0,b.jsx)("p",{children:"No features found for the selected project"})]})]})})]})}),(0,b.jsx)(r.TabsContent,{value:"routes",className:"space-y-4",children:(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{children:"Routes"}),(0,b.jsx)(q.CardDescription,{children:"Planned and optimized routes for project work"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Input,{placeholder:"Search routes...",className:"w-64"}),(0,b.jsxs)(s.Select,{defaultValue:"all",children:[(0,b.jsx)(s.SelectTrigger,{className:"w-32",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(s.SelectItem,{value:"planned",children:"Planned"}),(0,b.jsx)(s.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(s.SelectItem,{value:"completed",children:"Completed"})]})]})]}),(0,b.jsxs)(o.Button,{children:[(0,b.jsx)(h,{className:"w-4 h-4 mr-2"}),"Create Route"]})]}),(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(h,{className:"w-8 h-8 mx-auto mb-2"}),(0,b.jsx)("p",{children:"No routes found for the selected project"})]})]})})]})}),(0,b.jsx)(r.TabsContent,{value:"layers",className:"space-y-4",children:(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{children:"Map Layers"}),(0,b.jsx)(q.CardDescription,{children:"Organize geospatial data into thematic layers"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Input,{placeholder:"Search layers...",className:"w-64"}),(0,b.jsxs)(s.Select,{defaultValue:"all",children:[(0,b.jsx)(s.SelectTrigger,{className:"w-32",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(s.SelectItem,{value:"base",children:"Base"}),(0,b.jsx)(s.SelectItem,{value:"overlay",children:"Overlay"}),(0,b.jsx)(s.SelectItem,{value:"annotation",children:"Annotation"})]})]})]}),(0,b.jsxs)(o.Button,{children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),"Create Layer"]})]}),(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(i,{className:"w-8 h-8 mx-auto mb-2"}),(0,b.jsx)("p",{children:"No layers found for the selected project"})]})]})})]})}),(0,b.jsx)(r.TabsContent,{value:"measurements",className:"space-y-4",children:(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{children:"Measurements"}),(0,b.jsx)(q.CardDescription,{children:"Distance and area measurements taken on the map"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Input,{placeholder:"Search measurements...",className:"w-64"}),(0,b.jsxs)(s.Select,{defaultValue:"all",children:[(0,b.jsx)(s.SelectTrigger,{className:"w-32",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(s.SelectItem,{value:"distance",children:"Distance"}),(0,b.jsx)(s.SelectItem,{value:"area",children:"Area"})]})]})]}),(0,b.jsxs)(o.Button,{children:[(0,b.jsx)(j.Ruler,{className:"w-4 h-4 mr-2"}),"New Measurement"]})]}),(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(j.Ruler,{className:"w-8 h-8 mx-auto mb-2"}),(0,b.jsx)("p",{children:"No measurements found for the selected project"})]})]})})]})})]})]})}}];

//# sourceMappingURL=_420fb1d3._.js.map