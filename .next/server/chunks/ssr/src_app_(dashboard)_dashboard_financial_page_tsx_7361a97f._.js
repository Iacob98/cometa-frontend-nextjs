module.exports=[73878,a=>{"use strict";a.s(["default",()=>E],73878);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(15618),f=a.i(24669),g=a.i(53277),h=a.i(94101),i=a.i(70106);let j=(0,i.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),k=(0,i.default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var l=a.i(41675),m=a.i(69012),n=a.i(87532),o=a.i(39761),p=a.i(25910),q=a.i(77156),r=a.i(24569),s=a.i(81560),t=a.i(99570),u=a.i(66718),v=a.i(91119),w=a.i(86304),x=a.i(6015),y=a.i(35732),z=a.i(80701),A=a.i(75083),B=a.i(35733),C=a.i(86456),D=a.i(47507);function E(){let a=(0,d.useRouter)(),{user:i}=(0,D.useAuth)(),{canManageFinances:E,canViewFinances:F}=(0,D.usePermissions)(),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)("all"),[K,L]=(0,c.useState)("all"),[M,N]=(0,c.useState)("all"),[O,P]=(0,c.useState)("all"),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),U={type:"all"===I?void 0:I,category:"all"===K?void 0:K,payment_method:"all"===M?void 0:M,project_id:"all"===O?void 0:O,date_from:Q||void 0,date_to:S||void 0,search:G||void 0,page:1,per_page:20},{data:V,isLoading:W,error:X}=(0,B.useTransactions)(U),{data:Y,isLoading:Z}=(0,B.useFinancialSummary)({type:U.type,project_id:U.project_id,date_from:U.date_from,date_to:U.date_to}),{data:$}=(0,C.useProjects)({}),_=V?.transactions||[],aa=$?.items||[];return F?X?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Tracking"})}),(0,b.jsx)(v.Card,{children:(0,b.jsx)(v.CardContent,{className:"py-8",children:(0,b.jsx)("div",{className:"text-center text-muted-foreground",children:"Failed to load financial data. Please try again later."})})})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Tracking"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Monitor expenses, income, and financial performance across projects"})]}),E&&(0,b.jsxs)(t.Button,{onClick:()=>a.push("/dashboard/financial/new"),children:[(0,b.jsx)(e.Plus,{className:"mr-2 h-4 w-4"}),"New Transaction"]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"Total Income"}),(0,b.jsx)(f.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(v.CardContent,{children:[Z?(0,b.jsx)("div",{className:"h-6 bg-muted animate-pulse rounded"}):(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(0,B.formatCurrency)(Y?.total_income||0,Y?.currency)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:Y?.period?`From ${Y.period.from} to ${Y.period.to}`:"This period"})]})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"Total Expenses"}),(0,b.jsx)(g.TrendingDown,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(v.CardContent,{children:[Z?(0,b.jsx)("div",{className:"h-6 bg-muted animate-pulse rounded"}):(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,B.formatCurrency)(Y?.total_expenses||0,Y?.currency)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:Y?.period?`From ${Y.period.from} to ${Y.period.to}`:"This period"})]})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"Net Profit"}),(0,b.jsx)(h.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(v.CardContent,{children:[Z?(0,b.jsx)("div",{className:"h-6 bg-muted animate-pulse rounded"}):(0,b.jsx)("div",{className:`text-2xl font-bold ${(Y?.net_profit||0)>=0?"text-green-600":"text-red-600"}`,children:(0,B.formatCurrency)(Y?.net_profit||0,Y?.currency)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Income minus expenses"})]})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"Pending Invoices"}),(0,b.jsx)(k,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(v.CardContent,{children:[Z?(0,b.jsx)("div",{className:"h-6 bg-muted animate-pulse rounded"}):(0,b.jsx)("div",{className:"text-2xl font-bold",children:Y?.pending_invoices||0}),(0,b.jsxs)("p",{className:"text-xs text-red-600",children:[Y?.overdue_invoices||0," overdue"]})]})]})]}),(0,b.jsxs)(A.Tabs,{defaultValue:"transactions",className:"space-y-4",children:[(0,b.jsxs)(A.TabsList,{children:[(0,b.jsx)(A.TabsTrigger,{value:"transactions",children:"All Transactions"}),(0,b.jsx)(A.TabsTrigger,{value:"analytics",children:"Analytics"}),(0,b.jsx)(A.TabsTrigger,{value:"reports",children:"Reports"})]}),(0,b.jsxs)(A.TabsContent,{value:"transactions",className:"space-y-6",children:[(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsx)(v.CardTitle,{children:"Filter Transactions"}),(0,b.jsx)(v.CardDescription,{children:"Search and filter transactions by various criteria"})]}),(0,b.jsx)(v.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(u.Input,{placeholder:"Search by description, reference, or notes...",value:G,onChange:a=>H(a.target.value),className:"pl-8"})]})}),(0,b.jsxs)(z.Select,{value:I,onValueChange:a=>J(a),children:[(0,b.jsx)(z.SelectTrigger,{className:"w-48",children:(0,b.jsx)(z.SelectValue,{placeholder:"Filter by type"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(z.SelectItem,{value:"income",children:"Income"}),(0,b.jsx)(z.SelectItem,{value:"expense",children:"Expense"}),(0,b.jsx)(z.SelectItem,{value:"transfer",children:"Transfer"})]})]}),(0,b.jsxs)(z.Select,{value:K,onValueChange:a=>L(a),children:[(0,b.jsx)(z.SelectTrigger,{className:"w-48",children:(0,b.jsx)(z.SelectValue,{placeholder:"Filter by category"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Categories"}),B.TRANSACTION_CATEGORIES.map(a=>(0,b.jsx)(z.SelectItem,{value:a,children:(0,B.getCategoryLabel)(a)},a))]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[(0,b.jsxs)(z.Select,{value:M,onValueChange:a=>N(a),children:[(0,b.jsx)(z.SelectTrigger,{className:"w-48",children:(0,b.jsx)(z.SelectValue,{placeholder:"Payment method"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Methods"}),B.PAYMENT_METHODS.map(a=>(0,b.jsx)(z.SelectItem,{value:a,children:(0,B.getPaymentMethodLabel)(a)},a))]})]}),(0,b.jsxs)(z.Select,{value:O,onValueChange:P,children:[(0,b.jsx)(z.SelectTrigger,{className:"w-48",children:(0,b.jsx)(z.SelectValue,{placeholder:"Filter by project"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Projects"}),aa.map(a=>(0,b.jsx)(z.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(u.Input,{type:"date",placeholder:"From date",value:Q,onChange:a=>R(a.target.value),className:"w-40"}),(0,b.jsx)(u.Input,{type:"date",placeholder:"To date",value:S,onChange:a=>T(a.target.value),className:"w-40"})]})]})]})})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsx)(v.CardHeader,{children:(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j,{className:"h-5 w-5"}),"Transactions (",V?.total||0,")"]})}),(0,b.jsx)(v.CardContent,{children:W?(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded flex-1"}),(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-20"}),(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-16"})]},c))}):0===_.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(j,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No transactions found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:G||"all"!==I||"all"!==K||"all"!==O?"No transactions match your current filters.":"Get started by creating your first transaction."}),E&&(0,b.jsxs)(t.Button,{className:"mt-4",onClick:()=>a.push("/dashboard/financial/new"),children:[(0,b.jsx)(e.Plus,{className:"mr-2 h-4 w-4"}),"Create Transaction"]})]}):(0,b.jsxs)(x.Table,{children:[(0,b.jsx)(x.TableHeader,{children:(0,b.jsxs)(x.TableRow,{children:[(0,b.jsx)(x.TableHead,{children:"Date & Description"}),(0,b.jsx)(x.TableHead,{children:"Type & Category"}),(0,b.jsx)(x.TableHead,{children:"Amount"}),(0,b.jsx)(x.TableHead,{children:"Payment Method"}),(0,b.jsx)(x.TableHead,{children:"Project"}),(0,b.jsx)(x.TableHead,{children:"Status"}),(0,b.jsx)(x.TableHead,{className:"w-[100px]",children:"Actions"})]})}),(0,b.jsx)(x.TableBody,{children:_.map(c=>(0,b.jsxs)(x.TableRow,{children:[(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:new Date(c.transaction_date).toLocaleDateString()}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:c.description}),c.reference_number&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Ref: ",c.reference_number]})]})}),(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(w.Badge,{variant:"income"===c.type?"default":"expense"===c.type?"destructive":"secondary",children:c.type.charAt(0).toUpperCase()+c.type.slice(1)}),(0,b.jsx)("div",{className:"text-sm",children:(0,b.jsx)(w.Badge,{variant:"outline",className:(0,B.getCategoryColor)(c.category),children:(0,B.getCategoryLabel)(c.category)})})]})}),(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)("div",{className:`font-semibold ${(0,B.getTransactionTypeColor)(c.type)}`,children:["expense"===c.type?"-":"+",(0,B.formatCurrency)(c.amount,c.currency)]})}),(0,b.jsxs)(x.TableCell,{children:[(0,b.jsx)("div",{className:"text-sm",children:(0,B.getPaymentMethodLabel)(c.payment_method)}),c.receipt_url&&(0,b.jsx)("div",{className:"text-xs text-green-600",children:"Has receipt"})]}),(0,b.jsx)(x.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:c.project_name||"General"})}),(0,b.jsx)(x.TableCell,{children:c.approved_at?(0,b.jsx)(w.Badge,{variant:"default",className:"bg-green-100 text-green-800",children:"Approved"}):(0,b.jsx)(w.Badge,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}),(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)(y.DropdownMenu,{children:[(0,b.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(t.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(m.Filter,{className:"h-4 w-4"})]})}),(0,b.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(y.DropdownMenuLabel,{children:"Actions"}),(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/financial/${c.id}`),children:[(0,b.jsx)(q.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]}),E&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/financial/${c.id}/edit`),children:[(0,b.jsx)(r.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsx)(y.DropdownMenuSeparator,{}),(0,b.jsxs)(y.DropdownMenuItem,{className:"text-red-600",children:[(0,b.jsx)(s.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},c.id))})]})})]})]}),(0,b.jsx)(A.TabsContent,{value:"analytics",className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(v.Card,{children:[(0,b.jsx)(v.CardHeader,{children:(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.PieChart,{className:"h-5 w-5"}),"Expenses by Category"]})}),(0,b.jsx)(v.CardContent,{children:Z?(0,b.jsx)("div",{className:"h-64 bg-muted animate-pulse rounded"}):(0,b.jsx)("div",{className:"space-y-4",children:(Y?.by_category||[]).slice(0,8).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center space-x-2",children:(0,b.jsx)(w.Badge,{variant:"outline",className:(0,B.getCategoryColor)(a.category),children:(0,B.getCategoryLabel)(a.category)})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"font-semibold",children:(0,B.formatCurrency)(a.amount,Y.currency)}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.percentage.toFixed(1),"%"]})]})]},c))})})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsx)(v.CardHeader,{children:(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(o.BarChart3,{className:"h-5 w-5"}),"Monthly Trend"]})}),(0,b.jsx)(v.CardContent,{children:Z?(0,b.jsx)("div",{className:"h-64 bg-muted animate-pulse rounded"}):(0,b.jsx)("div",{className:"space-y-4",children:(Y?.monthly_trend||[]).slice(-6).map((a,c)=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:a.month}),(0,b.jsx)("span",{className:a.net>=0?"text-green-600":"text-red-600",children:(0,B.formatCurrency)(a.net,Y.currency)})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded"}),(0,b.jsxs)("span",{children:["Income: ",(0,B.formatCurrency)(a.income,Y.currency)]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded"}),(0,b.jsxs)("span",{children:["Expenses: ",(0,B.formatCurrency)(a.expenses,Y.currency)]})]})]})]},c))})})]})]})}),(0,b.jsx)(A.TabsContent,{value:"reports",className:"space-y-6",children:(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsx)(v.CardTitle,{children:"Financial Reports"}),(0,b.jsx)(v.CardDescription,{children:"Generate detailed financial reports and export data"})]}),(0,b.jsx)(v.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)(t.Button,{variant:"outline",className:"h-20 flex-col",children:[(0,b.jsx)(k,{className:"h-6 w-6 mb-2"}),"Expense Report"]}),(0,b.jsxs)(t.Button,{variant:"outline",className:"h-20 flex-col",children:[(0,b.jsx)(f.TrendingUp,{className:"h-6 w-6 mb-2"}),"Profit & Loss"]}),(0,b.jsxs)(t.Button,{variant:"outline",className:"h-20 flex-col",children:[(0,b.jsx)(o.BarChart3,{className:"h-6 w-6 mb-2"}),"Budget Analysis"]}),(0,b.jsxs)(t.Button,{variant:"outline",className:"h-20 flex-col",children:[(0,b.jsx)(l.Calendar,{className:"h-6 w-6 mb-2"}),"Monthly Summary"]}),(0,b.jsxs)(t.Button,{variant:"outline",className:"h-20 flex-col",children:[(0,b.jsx)(h.DollarSign,{className:"h-6 w-6 mb-2"}),"Cash Flow"]}),(0,b.jsxs)(t.Button,{variant:"outline",className:"h-20 flex-col",children:[(0,b.jsx)(p.PieChart,{className:"h-6 w-6 mb-2"}),"Category Breakdown"]})]})})]})})]})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Tracking"})}),(0,b.jsx)(v.Card,{children:(0,b.jsx)(v.CardContent,{className:"py-8",children:(0,b.jsx)("div",{className:"text-center text-muted-foreground",children:"You don't have permission to view financial information."})})})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_financial_page_tsx_7361a97f._.js.map