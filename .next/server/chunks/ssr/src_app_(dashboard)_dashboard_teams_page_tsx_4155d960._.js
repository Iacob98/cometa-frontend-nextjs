module.exports=[47842,a=>{"use strict";a.s(["default",()=>ab],47842);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(95245),f=a.i(59501),g=a.i(56757),h=a.i(15618),i=a.i(87532),j=a.i(60246),k=a.i(17371),l=a.i(77156),m=a.i(24569),n=a.i(81560),o=a.i(63519),p=a.i(92258),q=a.i(24987),r=a.i(4720),s=a.i(41675),t=a.i(3314),u=a.i(44494);let v=(0,a.i(70106).default)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);var w=a.i(99570),x=a.i(66718),y=a.i(91119),z=a.i(86304),A=a.i(6015),B=a.i(35732),C=a.i(75083),D=a.i(14574),E=a.i(41921),F=a.i(80701),G=a.i(15055),H=a.i(44750),I=a.i(10778),J=a.i(37927),K=a.i(35850),L=a.i(47507),M=a.i(70025),N=a.i(33217),O=a.i(33508),P=a.i(96221),Q=a.i(46842),R=a.i(70430),S=a.i(23292);let T=g.z.object({email:g.z.string().optional().refine(a=>!a||g.z.string().email().safeParse(a).success,{message:"Invalid email format"}),first_name:g.z.string().min(1,"First name is required").min(2,"First name must be at least 2 characters").max(50,"First name must not exceed 50 characters"),last_name:g.z.string().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").max(50,"Last name must not exceed 50 characters"),role:g.z.enum(["admin","pm","foreman","crew","viewer"],{required_error:"Please select a role"}),phone:g.z.string().optional().refine(a=>!a||a.length>=10,{message:"Phone number must be at least 10 digits"}),pin_code:g.z.string().optional().refine(a=>!a||a.length>=4&&a.length<=6&&/^\d+$/.test(a),{message:"PIN code must be 4-6 digits"}),skills:g.z.array(g.z.string()).default([]).optional(),lang_pref:g.z.enum(["en","de","ru","uz","tr"]).default("de").optional()}).refine(a=>a.email||a.phone,{message:"Either email or phone number is required",path:["email"]});async function U(a){let b=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error((await b.json()).detail||"Failed to create user");return b.json()}async function V(a,b){let c=await fetch(`/api/users/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error((await c.json()).detail||"Failed to update user");return c.json()}async function W(){let a=await fetch("/api/auth/skills");if(!a.ok)throw Error("Failed to fetch skills");return a.json()}function X({onSuccess:a,onCancel:d,defaultRole:g="crew",editMode:i=!1,initialData:j}){let[k,l]=(0,c.useState)(i&&j?.skills?j.skills:[]),[m,n]=(0,c.useState)(""),q=(0,J.useQueryClient)(),{data:r,isLoading:s}=(0,N.useQuery)({queryKey:["skills"],queryFn:W,staleTime:3e5}),A=(0,e.useForm)({resolver:(0,f.zodResolver)(T),defaultValues:i&&j?{email:j.email||"",first_name:j.first_name||"",last_name:j.last_name||"",role:j.role||g,phone:j.phone||"",pin_code:j.pin_code||"",skills:j.skills||[],lang_pref:j.lang_pref||"de"}:{email:"",first_name:"",last_name:"",role:g,phone:"",pin_code:"",skills:[],lang_pref:"de"}}),B=(0,M.useMutation)({mutationFn:i&&j?a=>V(j.id,a):U,onSuccess:b=>{let c=i?"updated":"created";S.toast.success(`User ${c} successfully!`,{description:`${b.first_name} ${b.last_name} has been ${c}.`}),q.invalidateQueries({queryKey:["users"]}),i||(A.reset(),l([])),a?.(b)},onError:a=>{let b=i?"update":"create";S.toast.error(`Failed to ${b} user`,{description:a.message})}}),C=async a=>{let b={...a,skills:k};B.mutate(b)},D=()=>{m.trim()&&!k.includes(m.trim())&&(l(a=>[...a,m.trim()]),n(""))},H=r?.predefined_skills||[];return(0,b.jsxs)(y.Card,{className:"w-full max-w-2xl mx-auto",children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(Q.User,{className:"h-5 w-5"}),i?"Edit User":"Create New User"]}),(0,b.jsx)(y.CardDescription,{children:i?"Update user information, roles, and system access.":"Add a new user to the COMETA system. PIN codes will be automatically generated if not provided."})]}),(0,b.jsx)(y.CardContent,{children:(0,b.jsx)(E.Form,{...A,children:(0,b.jsxs)("form",{onSubmit:A.handleSubmit(C),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,b.jsx)(Q.User,{className:"h-4 w-4"}),"Personal Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(E.FormField,{control:A.control,name:"first_name",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"First Name"}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{placeholder:"Enter first name",...a,disabled:B.isPending})}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsx)(E.FormField,{control:A.control,name:"last_name",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Last Name"}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{placeholder:"Enter last name",...a,disabled:B.isPending})}),(0,b.jsx)(E.FormMessage,{})]})})]}),(0,b.jsx)(E.FormField,{control:A.control,name:"email",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsxs)(E.FormLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Mail,{className:"h-4 w-4"}),"Email Address (Optional)"]}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{type:"email",placeholder:"Enter email address",...a,disabled:B.isPending})}),(0,b.jsx)(E.FormDescription,{children:"Either email or phone number is required for login."}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsx)(E.FormField,{control:A.control,name:"phone",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsxs)(E.FormLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Phone,{className:"h-4 w-4"}),"Phone Number (Optional)"]}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{type:"tel",placeholder:"Enter phone number",...a,disabled:B.isPending})}),(0,b.jsx)(E.FormDescription,{children:"Either email or phone number is required for login."}),(0,b.jsx)(E.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,b.jsx)(t.Shield,{className:"h-4 w-4"}),"System Access"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(E.FormField,{control:A.control,name:"role",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Role"}),(0,b.jsxs)(F.Select,{onValueChange:a.onChange,defaultValue:a.value,disabled:B.isPending,children:[(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(F.SelectTrigger,{children:(0,b.jsx)(F.SelectValue,{placeholder:"Select user role"})})}),(0,b.jsxs)(F.SelectContent,{children:[(0,b.jsx)(F.SelectItem,{value:"admin",children:"Administrator"}),(0,b.jsx)(F.SelectItem,{value:"pm",children:"Project Manager"}),(0,b.jsx)(F.SelectItem,{value:"foreman",children:"Foreman"}),(0,b.jsx)(F.SelectItem,{value:"crew",children:"Field Worker"}),(0,b.jsx)(F.SelectItem,{value:"viewer",children:"Viewer (Read-only)"})]})]}),(0,b.jsx)(E.FormDescription,{children:"Determines what the user can access in the system."}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsx)(E.FormField,{control:A.control,name:"pin_code",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsxs)(E.FormLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(v,{className:"h-4 w-4"}),"PIN Code (Optional)"]}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{type:"text",placeholder:"Leave empty for auto-generation",maxLength:6,...a,disabled:B.isPending})}),(0,b.jsx)(E.FormDescription,{children:"4-6 digits. If empty, will be generated automatically."}),(0,b.jsx)(E.FormMessage,{})]})})]}),(0,b.jsx)(E.FormField,{control:A.control,name:"lang_pref",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsxs)(E.FormLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Globe,{className:"h-4 w-4"}),"Language Preference"]}),(0,b.jsxs)(F.Select,{onValueChange:a.onChange,defaultValue:a.value,disabled:B.isPending,children:[(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(F.SelectTrigger,{className:"w-full md:w-[200px]",children:(0,b.jsx)(F.SelectValue,{})})}),(0,b.jsxs)(F.SelectContent,{children:[(0,b.jsx)(F.SelectItem,{value:"de",children:"German (Deutsch)"}),(0,b.jsx)(F.SelectItem,{value:"en",children:"English"}),(0,b.jsx)(F.SelectItem,{value:"ru",children:"Russian (Русский)"}),(0,b.jsx)(F.SelectItem,{value:"uz",children:"Uzbek (O'zbek)"}),(0,b.jsx)(F.SelectItem,{value:"tr",children:"Turkish (Türkçe)"})]})]}),(0,b.jsx)(E.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Skills & Competencies"}),k.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)(R.Label,{className:"text-sm font-medium",children:"Selected Skills:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:k.map(a=>(0,b.jsxs)(z.Badge,{variant:"secondary",className:"pr-1",children:[a,(0,b.jsx)(w.Button,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-1 ml-1",onClick:()=>{l(b=>b.filter(b=>b!==a))},disabled:B.isPending,children:(0,b.jsx)(O.X,{className:"h-3 w-3"})})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(R.Label,{className:"text-sm font-medium",children:"Add Custom Skill:"}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)(x.Input,{placeholder:"Enter skill name",value:m,onChange:a=>n(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),D()),disabled:B.isPending}),(0,b.jsx)(w.Button,{type:"button",variant:"outline",size:"sm",onClick:D,disabled:!m.trim()||B.isPending,children:(0,b.jsx)(h.Plus,{className:"h-4 w-4"})})]})]}),s?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(P.Loader2,{className:"h-4 w-4 animate-spin"}),"Loading skills..."]}):(0,b.jsxs)("div",{children:[(0,b.jsx)(R.Label,{className:"text-sm font-medium",children:"Select from predefined skills:"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-2 max-h-60 overflow-y-auto",children:H.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(G.Checkbox,{id:a,checked:k.includes(a),onCheckedChange:()=>{l(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},disabled:B.isPending}),(0,b.jsx)(R.Label,{htmlFor:a,className:"text-sm font-normal cursor-pointer",children:a})]},a))})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-6 border-t",children:[d&&(0,b.jsx)(w.Button,{type:"button",variant:"outline",onClick:d,disabled:B.isPending,children:"Cancel"}),(0,b.jsx)(w.Button,{type:"submit",disabled:B.isPending,className:"flex-1",children:B.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Updating User...":"Creating User..."]}):i?"Update User":"Create User"})]})]})})})]})}var Y=a.i(33441),Z=a.i(54614);async function $(a,b){let c=await fetch(`/api/crews/${a}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:b,role_in_crew:"worker"})});if(!c.ok)throw Error((await c.json()).error||"Failed to add user to team");return c.json()}function _({user:a,teams:e,children:f,open:g,onOpenChange:h,onSuccess:i}){let[j,l]=(0,c.useState)(!1),m=h||l,[n,o]=(0,c.useState)(""),{toast:p}=(0,Z.useToast)(),q=(0,J.useQueryClient)(),r=(0,d.useRouter)(),s=e.filter(b=>!b.members?.some(b=>b.user_id===a.id)),t=(0,M.useMutation)({mutationFn:({teamId:a,userId:b})=>$(a,b),onSuccess:()=>{q.invalidateQueries({queryKey:["teams"]}),q.invalidateQueries({queryKey:["teams","crews"]}),q.invalidateQueries({queryKey:["crews"]}),q.invalidateQueries({queryKey:["users"]});let b=e.find(a=>a.id===n);p({title:"Пользователь добавлен в команду",description:`${a.full_name} добавлен в команду "${b?.name}"`}),m(!1),o(""),i&&i()},onError:a=>{p({title:"Ошибка",description:a.message||"Не удалось добавить пользователя в команду",variant:"destructive"})}});return(0,b.jsxs)(D.Dialog,{open:void 0!==g?g:j,onOpenChange:m,children:[f&&(0,b.jsx)(D.DialogTrigger,{asChild:!0,children:f}),(0,b.jsxs)(D.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsx)(D.DialogTitle,{children:"Назначить пользователя в команду"}),(0,b.jsxs)(D.DialogDescription,{children:["Выберите команду для добавления пользователя ",(0,b.jsx)("strong",{children:a.full_name})]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg bg-muted/50",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-medium",children:a.full_name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.email})]}),(0,b.jsx)(z.Badge,{variant:"outline",children:a.role})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(R.Label,{htmlFor:"team-select",children:"Выберите команду"}),s.length>0?(0,b.jsxs)(F.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(F.SelectTrigger,{children:(0,b.jsx)(F.SelectValue,{placeholder:"Выберите команду"})}),(0,b.jsx)(F.SelectContent,{children:s.map(a=>(0,b.jsx)(F.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),a.project_name&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Проект: ",a.project_name]})]}),(0,b.jsxs)(z.Badge,{variant:"secondary",className:"ml-2",children:[a.member_count," участников"]})]})},a.id))})]}):(0,b.jsxs)("div",{className:"text-center py-4 text-muted-foreground",children:[(0,b.jsx)(k.UserPlus,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"Пользователь уже назначен во все доступные команды"})]})]})]}),(0,b.jsxs)(D.DialogFooter,{className:"flex-col sm:flex-row gap-2",children:[n&&(0,b.jsx)(w.Button,{type:"button",variant:"outline",onClick:()=>{n&&(m(!1),r.push(`/dashboard/teams/${n}/members`))},className:"w-full sm:w-auto",children:"Управлять участниками"}),(0,b.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,b.jsx)(w.Button,{type:"button",variant:"outline",onClick:()=>m(!1),className:"flex-1 sm:flex-initial",children:"Отмена"}),(0,b.jsxs)(w.Button,{type:"button",onClick:()=>{if(!n)return void p({title:"Ошибка",description:"Выберите команду для назначения",variant:"destructive"});t.mutate({teamId:n,userId:a.id})},disabled:!n||t.isPending||0===s.length,className:"flex-1 sm:flex-initial",children:[t.isPending?(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent mr-2"}):(0,b.jsx)(Y.Check,{className:"mr-2 h-4 w-4"}),"Назначить"]})]})]})]})]})}let aa=g.z.object({name:g.z.string().min(1,"Team name is required"),foreman_user_id:g.z.string().optional(),project_id:g.z.string().optional(),description:g.z.string().optional()});function ab(){let a=(0,d.useRouter)(),{canManageTeams:g}=(0,L.usePermissions)(),M=(0,H.useDeleteCrew)(),N=(0,H.useCreateTeam)(),O=(0,H.useUpdateTeam)(),P=(0,I.useUpdateUser)(),Q=(0,I.useDeleteUser)(),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(!1),[$,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(!1),[ai,aj]=(0,c.useState)(null),[ak,al]=(0,c.useState)(null),[am,an]=(0,c.useState)(null),[ao,ap]=(0,c.useState)(null),[aq,ar]=(0,c.useState)("crew"),[as,at]=(0,c.useState)(new Set),[au,av]=(0,c.useState)(!1),[aw,ax]=(0,c.useState)(""),ay=(0,e.useForm)({resolver:(0,f.zodResolver)(aa),defaultValues:{name:"",foreman_user_id:"none",project_id:"none",description:""}}),az=(0,e.useForm)({resolver:(0,f.zodResolver)(aa),defaultValues:{name:"",foreman_user_id:"none",project_id:"none",description:""}}),{data:aA,isLoading:aB,error:aC}=(0,H.useTeams)();(0,J.useQueryClient)();let{data:aD,isLoading:aE}=(0,I.useUsers)({page:1,per_page:100}),{data:aF}=(0,H.useForemenUsers)(),aG=aD?.items||[],aH=a=>!!aA&&aA.some(b=>b.foreman?.id===a||b.members?.some(b=>b.user_id===a)),aI=aG.filter(a=>["crew","worker","foreman"].includes(a.role)&&!aH(a.id)),aJ=aG.filter(a=>!R||a.full_name.toLowerCase().includes(R.toLowerCase())||a.email?.toLowerCase().includes(R.toLowerCase())||a.role.toLowerCase().includes(R.toLowerCase())||a.skills?.some(a=>a.toLowerCase().includes(R.toLowerCase()))),aK=async(a,b)=>{confirm(`Are you sure you want to delete "${b}"? This action cannot be undone.`)&&await M.mutateAsync(a)},aL=a=>{al(a),ab(!0)},aM=a=>{ap(a),ad(!0),ab(!1)},aN=a=>{al(a),af(!0),ab(!1)},aO=async()=>{if(ak)try{await Q.mutateAsync(ak.id),af(!1),al(null)}catch(a){console.error("Failed to delete user:",a)}},aP=(a,b)=>{let c=new Set(as);b?c.add(a):c.delete(a),at(c)},aQ=a=>{a?at(new Set(aJ.map(a=>a.id))):at(new Set)},aR=a=>{ax(a),av(!0)},aS=async()=>{if(aw&&0!==as.size)try{let a=Array.from(as);if("delete"===aw)await Promise.all(a.map(a=>Q.mutateAsync(a)));else if(aw.startsWith("role_")){let b=aw.replace("role_","");await Promise.all(a.map(a=>{let c=aG.find(b=>b.id===a);if(c)return P.mutateAsync({id:a,data:{...c,role:b}})}))}av(!1),at(new Set),ax("")}catch(a){console.error("Failed to perform bulk action:",a)}},aT=async a=>{try{let b={...a,foreman_user_id:"none"===a.foreman_user_id?void 0:a.foreman_user_id,project_id:"none"===a.project_id?void 0:a.project_id};await N.mutateAsync(b),W(!1),ay.reset()}catch(a){console.error("Failed to create team:",a)}},aU=a=>{aj(a),az.setValue("name",a.name),az.setValue("foreman_user_id",a.foreman?.id||"none"),az.setValue("project_id",a.project_id||"none"),az.setValue("description",a.description||""),Z(!0)},aV=async a=>{if(ai)try{let b={...a,foreman_user_id:"none"===a.foreman_user_id?void 0:a.foreman_user_id,project_id:"none"===a.project_id?void 0:a.project_id};await O.mutateAsync({id:ai.id,data:b}),Z(!1),aj(null),az.reset()}catch(a){console.error("Failed to update team:",a)}},aW=a=>{switch(a){case"foreman":return"default";case"crew":case"worker":return"secondary";default:return"outline"}};return aC?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Teams"})}),(0,b.jsx)(y.Card,{children:(0,b.jsx)(y.CardContent,{className:"py-8",children:(0,b.jsx)("div",{className:"text-center text-muted-foreground",children:"Failed to load teams. Please try again later."})})})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Teams"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage work crews and team assignments"})]}),g&&(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsxs)(w.Button,{variant:"outline",onClick:()=>{ar("crew"),U(!0)},children:[(0,b.jsx)(k.UserPlus,{className:"mr-2 h-4 w-4"}),"Add Team Member"]}),(0,b.jsxs)(w.Button,{onClick:()=>W(!0),children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"New Team"]})]})]}),(0,b.jsxs)(C.Tabs,{defaultValue:"crews",className:"space-y-4",children:[(0,b.jsxs)(C.TabsList,{children:[(0,b.jsxs)(C.TabsTrigger,{value:"crews",children:["Work Crews (",aA?.length||0,")"]}),(0,b.jsxs)(C.TabsTrigger,{value:"available",children:["Available Workers (",aI.length,")"]}),(0,b.jsxs)(C.TabsTrigger,{value:"all-users",children:["All Users (",aG.length,")"]}),(0,b.jsx)(C.TabsTrigger,{value:"overview",children:"Team Overview"})]}),(0,b.jsxs)(C.TabsContent,{value:"crews",className:"space-y-6",children:[(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsx)(y.CardTitle,{children:"Filter Teams"}),(0,b.jsx)(y.CardDescription,{children:"Search teams by name or foreman"})]}),(0,b.jsx)(y.CardContent,{children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(x.Input,{placeholder:"Search teams by name, foreman, or project...",value:R,onChange:a=>S(a.target.value),className:"pl-8"})]})})]}),(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:aB?[...Array(6)].map((a,c)=>(0,b.jsx)(y.Card,{children:(0,b.jsx)(y.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-3 bg-muted animate-pulse rounded w-3/4"}),(0,b.jsx)("div",{className:"h-3 bg-muted animate-pulse rounded w-1/2"})]})})},c)):aA?.length===0?(0,b.jsx)("div",{className:"col-span-full",children:(0,b.jsx)(y.Card,{children:(0,b.jsx)(y.CardContent,{className:"py-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.Users,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No teams found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Get started by creating your first work crew."}),g&&(0,b.jsxs)(w.Button,{className:"mt-4",onClick:()=>a.push("/dashboard/teams/new"),children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Create Team"]})]})})})}):aA?.filter(a=>!R||a.name.toLowerCase().includes(R.toLowerCase())||a.foreman?.full_name?.toLowerCase().includes(R.toLowerCase())).map(c=>(0,b.jsxs)(y.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(y.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(y.CardTitle,{className:"text-lg",children:c.name}),g&&(0,b.jsxs)(B.DropdownMenu,{children:[(0,b.jsx)(B.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(w.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(m.Edit,{className:"h-4 w-4"})]})}),(0,b.jsxs)(B.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(B.DropdownMenuLabel,{children:"Actions"}),(0,b.jsxs)(B.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/teams/${c.id}`),children:[(0,b.jsx)(l.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,b.jsxs)(B.DropdownMenuItem,{onClick:()=>aU(c),children:[(0,b.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"Edit Team"]}),(0,b.jsx)(B.DropdownMenuSeparator,{}),(0,b.jsxs)(B.DropdownMenuItem,{className:"text-destructive",onClick:()=>aK(c.id,c.name),children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Team"]})]})]})]})}),(0,b.jsxs)(y.CardContent,{className:"space-y-4",children:[c.foreman&&(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(z.Badge,{variant:"default",children:"Foreman"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:c.foreman.full_name}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center space-x-1",children:[(0,b.jsx)(o.Phone,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:c.foreman.phone||"—"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"text-sm font-medium flex items-center space-x-1",children:[(0,b.jsx)(j.Users,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["Team Members (",c.member_count||0,")"]})]}),c.members?.length?(0,b.jsxs)("div",{className:"space-y-1",children:[c.members.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{children:a.user?.full_name||"Unknown"}),(0,b.jsx)(z.Badge,{variant:aW(a.user?.role||""),children:a.user?.role||"—"})]},a.id)),c.members.length>3&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["+",c.members.length-3," more"]})]}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No members assigned"})]}),c.project_id&&(0,b.jsx)("div",{className:"pt-2 border-t",children:(0,b.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center space-x-1",children:[(0,b.jsx)(q.MapPin,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Assigned to Project ",c.project_id]})]})}),(0,b.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>a.push(`/dashboard/teams/${c.id}`),children:[(0,b.jsx)(l.Eye,{className:"mr-2 h-3 w-3"}),"View"]}),g&&(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>aU(c),children:[(0,b.jsx)(m.Edit,{className:"mr-2 h-3 w-3"}),"Edit"]})]})]})]},c.id))})]}),(0,b.jsx)(C.TabsContent,{value:"available",className:"space-y-6",children:(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.UserPlus,{className:"h-5 w-5"}),"Available Workers (",aI.length,")"]}),(0,b.jsx)(y.CardDescription,{children:"Workers available for team assignment (excludes already assigned workers)"})]}),(0,b.jsx)(y.CardContent,{children:aE?(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded flex-1"}),(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-20"})]},c))}):0===aI.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(k.UserPlus,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"All workers assigned"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:'All available workers are currently assigned to teams. Check the "All Users" tab to see assignment status.'})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[as.size>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg border",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm font-medium",children:[as.size," user",as.size>1?"s":""," selected"]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(B.DropdownMenu,{children:[(0,b.jsx)(B.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(w.Button,{variant:"outline",size:"sm",children:"Change Role"})}),(0,b.jsxs)(B.DropdownMenuContent,{children:[(0,b.jsx)(B.DropdownMenuLabel,{children:"Assign Role"}),(0,b.jsx)(B.DropdownMenuSeparator,{}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_admin"),children:"Administrator"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_pm"),children:"Project Manager"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_foreman"),children:"Foreman"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_crew"),children:"Crew Member"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_viewer"),children:"Viewer"})]})]}),(0,b.jsxs)(w.Button,{variant:"destructive",size:"sm",onClick:()=>aR("delete"),children:[(0,b.jsx)(n.Trash2,{className:"h-4 w-4 mr-1"}),"Delete Selected"]}),(0,b.jsx)(w.Button,{variant:"ghost",size:"sm",onClick:()=>at(new Set),children:"Clear Selection"})]})]}),(0,b.jsxs)(A.Table,{children:[(0,b.jsx)(A.TableHeader,{children:(0,b.jsxs)(A.TableRow,{children:[(0,b.jsx)(A.TableHead,{className:"w-[50px]",children:(0,b.jsx)(G.Checkbox,{checked:as.size>0&&as.size===aI.length,onCheckedChange:a=>aQ(a),"aria-label":"Select all users"})}),(0,b.jsx)(A.TableHead,{children:"Name"}),(0,b.jsx)(A.TableHead,{children:"Role"}),(0,b.jsx)(A.TableHead,{children:"PIN Code"}),(0,b.jsx)(A.TableHead,{children:"Skills"}),(0,b.jsx)(A.TableHead,{children:"Contact"}),(0,b.jsx)(A.TableHead,{className:"w-[100px]",children:"Actions"})]})}),(0,b.jsx)(A.TableBody,{children:aI.map(a=>(0,b.jsxs)(A.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>aL(a),children:[(0,b.jsx)(A.TableCell,{onClick:a=>a.stopPropagation(),children:(0,b.jsx)(G.Checkbox,{checked:as.has(a.id),onCheckedChange:b=>aP(a.id,b),"aria-label":`Select ${a.full_name}`})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.full_name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.email})]})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)(z.Badge,{variant:aW(a.role),children:a.role})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"text-sm font-mono",children:a.pin_code?(0,b.jsx)("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:a.pin_code}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:a.skills&&a.skills.length>0?(0,b.jsxs)(b.Fragment,{children:[a.skills.slice(0,2).map((a,c)=>(0,b.jsx)(z.Badge,{variant:"secondary",className:"text-xs",children:a},c)),a.skills.length>2&&(0,b.jsxs)(z.Badge,{variant:"outline",className:"text-xs",children:["+",a.skills.length-2]})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"No skills"})})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.phone&&(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(o.Phone,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.phone})]})})}),(0,b.jsx)(A.TableCell,{children:g&&(0,b.jsx)(_,{user:a,teams:aA||[],children:(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(k.UserPlus,{className:"mr-2 h-3 w-3"}),"Assign"]})})})]},a.id))})]})]})})]})}),(0,b.jsx)(C.TabsContent,{value:"all-users",className:"space-y-6",children:(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Users,{className:"h-5 w-5"}),"All Users (",aG.length,")"]}),(0,b.jsx)(y.CardDescription,{children:"Complete user directory with all roles and management capabilities"})]}),(0,b.jsx)(y.CardContent,{children:aE?(0,b.jsx)("div",{className:"space-y-4",children:[...Array(10)].map((a,c)=>(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded flex-1"}),(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-20"})]},c))}):0===aG.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(j.Users,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No users found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Get started by creating your first user account."})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[as.size>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg border",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm font-medium",children:[as.size," user",as.size>1?"s":""," selected"]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(B.DropdownMenu,{children:[(0,b.jsx)(B.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(w.Button,{variant:"outline",size:"sm",children:"Change Role"})}),(0,b.jsxs)(B.DropdownMenuContent,{children:[(0,b.jsx)(B.DropdownMenuLabel,{children:"Assign Role"}),(0,b.jsx)(B.DropdownMenuSeparator,{}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_admin"),children:"Administrator"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_pm"),children:"Project Manager"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_foreman"),children:"Foreman"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_crew"),children:"Crew Member"}),(0,b.jsx)(B.DropdownMenuItem,{onClick:()=>aR("role_viewer"),children:"Viewer"})]})]}),(0,b.jsxs)(w.Button,{variant:"destructive",size:"sm",onClick:()=>aR("delete"),children:[(0,b.jsx)(n.Trash2,{className:"h-4 w-4 mr-1"}),"Delete Selected"]}),(0,b.jsx)(w.Button,{variant:"ghost",size:"sm",onClick:()=>at(new Set),children:"Clear Selection"})]})]}),(0,b.jsxs)(A.Table,{children:[(0,b.jsx)(A.TableHeader,{children:(0,b.jsxs)(A.TableRow,{children:[(0,b.jsx)(A.TableHead,{className:"w-[50px]",children:(0,b.jsx)(G.Checkbox,{checked:as.size>0&&as.size===aJ.length,onCheckedChange:a=>aQ(a),"aria-label":"Select all users"})}),(0,b.jsx)(A.TableHead,{children:"Name"}),(0,b.jsx)(A.TableHead,{children:"Role"}),(0,b.jsx)(A.TableHead,{children:"PIN Code"}),(0,b.jsx)(A.TableHead,{children:"Skills"}),(0,b.jsx)(A.TableHead,{children:"Contact"}),(0,b.jsx)(A.TableHead,{children:"Status"}),(0,b.jsx)(A.TableHead,{children:"Team Status"}),(0,b.jsx)(A.TableHead,{className:"w-[100px]",children:"Actions"})]})}),(0,b.jsx)(A.TableBody,{children:aJ.map(a=>(0,b.jsxs)(A.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>aL(a),children:[(0,b.jsx)(A.TableCell,{onClick:a=>a.stopPropagation(),children:(0,b.jsx)(G.Checkbox,{checked:as.has(a.id),onCheckedChange:b=>aP(a.id,b),"aria-label":`Select ${a.full_name}`})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.full_name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.email})]})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)(z.Badge,{variant:aW(a.role),children:a.role})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"text-sm font-mono",children:a.pin_code?(0,b.jsx)("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:a.pin_code}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:a.skills&&a.skills.length>0?(0,b.jsxs)(b.Fragment,{children:[a.skills.slice(0,2).map((a,c)=>(0,b.jsx)(z.Badge,{variant:"secondary",className:"text-xs",children:a},c)),a.skills.length>2&&(0,b.jsxs)(z.Badge,{variant:"outline",className:"text-xs",children:["+",a.skills.length-2]})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"No skills"})})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.phone&&(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(o.Phone,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.phone})]})})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)(z.Badge,{variant:a.is_active?"default":"secondary",children:a.is_active?"Active":"Inactive"})}),(0,b.jsx)(A.TableCell,{children:aH(a.id)?(0,b.jsx)(z.Badge,{variant:"default",className:"bg-green-600",children:"Assigned"}):["crew","worker","foreman"].includes(a.role)?(0,b.jsx)(z.Badge,{variant:"outline",children:"Available"}):(0,b.jsx)(z.Badge,{variant:"secondary",children:"N/A"})}),(0,b.jsx)(A.TableCell,{children:g&&(0,b.jsxs)(B.DropdownMenu,{children:[(0,b.jsx)(B.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(w.Button,{variant:"outline",size:"sm",onClick:a=>a.stopPropagation(),children:"Actions"})}),(0,b.jsxs)(B.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(B.DropdownMenuLabel,{children:"User Actions"}),(0,b.jsxs)(B.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),aL(a)},children:[(0,b.jsx)(l.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,b.jsxs)(B.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),aM(a)},children:[(0,b.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"Edit User"]}),["crew","worker","foreman"].includes(a.role)&&!aH(a.id)&&(0,b.jsxs)(B.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),an(a),ah(!0)},children:[(0,b.jsx)(k.UserPlus,{className:"mr-2 h-4 w-4"}),"Assign to Team"]}),(0,b.jsx)(B.DropdownMenuSeparator,{}),(0,b.jsxs)(B.DropdownMenuItem,{className:"text-destructive",onClick:b=>{b.stopPropagation(),aN(a)},children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})})]},a.id))})]})]})})]})}),(0,b.jsxs)(C.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(y.CardTitle,{className:"text-sm font-medium",children:"Total Teams"}),(0,b.jsx)(j.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(y.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:aA?.length||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active work crews"})]})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(y.CardTitle,{className:"text-sm font-medium",children:"Total Workers"}),(0,b.jsx)(k.UserPlus,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(y.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:aA?.reduce((a,b)=>a+(b.member_count||0),0)||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Assigned to teams"})]})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(y.CardTitle,{className:"text-sm font-medium",children:"Available Workers"}),(0,b.jsx)(k.UserPlus,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(y.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:aI.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Not assigned to teams"})]})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(y.CardTitle,{className:"text-sm font-medium",children:"Active Projects"}),(0,b.jsx)(q.MapPin,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(y.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:new Set(aA?.filter(a=>a.project_id).map(a=>a.project_id)).size||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"With assigned teams"})]})]})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsx)(y.CardTitle,{children:"Team Performance Overview"}),(0,b.jsx)(y.CardDescription,{children:"Team productivity and workload analysis"})]}),(0,b.jsxs)(y.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Skills Distribution Across Teams"}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:(()=>{let a={};return aG.forEach(b=>{b.skills&&Array.isArray(b.skills)&&b.skills.forEach(b=>{a[b]=(a[b]||0)+1})}),Object.entries(a).sort(([,a],[,b])=>b-a).slice(0,6).map(([a,c])=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:a}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[c," workers"]})]}),(0,b.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min(c/aG.length*100,100)}%`}})})]},a))})()})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Role Distribution"}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:(()=>{let a={admin:"bg-red-500",pm:"bg-blue-500",foreman:"bg-green-500",crew:"bg-yellow-500",viewer:"bg-gray-500"};return["admin","pm","foreman","crew","viewer"].map(c=>{let d=aG.filter(a=>a.role===c).length,e=aG.length>0?d/aG.length*100:0;return(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:d}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground capitalize",children:c}),(0,b.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,b.jsx)("div",{className:`h-2 rounded-full ${a[c]}`,style:{width:`${e}%`}})})]},c)})})()})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Team Assignment Status"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(y.Card,{children:(0,b.jsx)(y.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:aA?.reduce((a,b)=>a+(b.member_count||0),0)||0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Assigned Workers"}),(0,b.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:[aA?.length||0," active teams"]})]})})}),(0,b.jsx)(y.Card,{children:(0,b.jsx)(y.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:aI.length}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Available Workers"}),(0,b.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Ready for assignment"})]})})}),(0,b.jsx)(y.Card,{children:(0,b.jsx)(y.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[(()=>{let a=aA?.reduce((a,b)=>a+(b.member_count||0),0)||0,b=aG.filter(a=>["crew","worker","foreman"].includes(a.role)).length;return b>0?Math.round(a/b*100):0})(),"%"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Utilization Rate"}),(0,b.jsx)("div",{className:"text-xs text-purple-600 mt-1",children:"Team efficiency"})]})})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Recent Team Activities"}),(0,b.jsx)("div",{className:"space-y-3",children:aA&&aA.length>0?aA.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.member_count||0," members • Foreman: ",a.foreman?.full_name||"Not assigned"]})]})]}),(0,b.jsx)(z.Badge,{variant:"secondary",className:"text-xs",children:"Active"})]},a.id)):(0,b.jsx)("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No team activities to display"})})]})]})]})]})]}),(0,b.jsx)(D.Dialog,{open:T,onOpenChange:U,children:(0,b.jsxs)(D.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsx)(D.DialogTitle,{children:"Add New Team Member"}),(0,b.jsx)(D.DialogDescription,{children:"Create a new team member account with automatic PIN generation and skills management. You can select any role and assign them to teams later."})]}),(0,b.jsx)(X,{onSuccess:()=>{U(!1)},onCancel:()=>U(!1),defaultRole:aq})]})}),(0,b.jsx)(D.Dialog,{open:V,onOpenChange:W,children:(0,b.jsxs)(D.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsx)(D.DialogTitle,{children:"Create New Team"}),(0,b.jsx)(D.DialogDescription,{children:"Create a new work crew/team with a name and optional foreman assignment."})]}),(0,b.jsx)(E.Form,{...ay,children:(0,b.jsxs)("form",{onSubmit:ay.handleSubmit(aT),className:"space-y-4",children:[(0,b.jsx)(E.FormField,{control:ay.control,name:"name",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Team Name *"}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{placeholder:"e.g., Alpha Team, Fiber Crew 1",...a})}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsx)(E.FormField,{control:ay.control,name:"foreman_user_id",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Foreman (Optional)"}),(0,b.jsxs)(F.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(F.SelectTrigger,{children:(0,b.jsx)(F.SelectValue,{placeholder:"Select foreman..."})})}),(0,b.jsxs)(F.SelectContent,{children:[(0,b.jsx)(F.SelectItem,{value:"none",children:"No foreman assigned"}),aF?.map(a=>(0,b.jsxs)(F.SelectItem,{value:a.id,children:[a.first_name," ",a.last_name," (",a.role,")"]},a.id))]})]}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsx)(E.FormField,{control:ay.control,name:"description",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Description (Optional)"}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{placeholder:"Team specialization or notes...",...a})}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(w.Button,{type:"button",variant:"outline",onClick:()=>{W(!1),ay.reset()},children:"Cancel"}),(0,b.jsxs)(w.Button,{type:"submit",disabled:N.isPending,children:[N.isPending?(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent mr-2"}):(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Create Team"]})]})]})})]})}),(0,b.jsx)(D.Dialog,{open:Y,onOpenChange:Z,children:(0,b.jsxs)(D.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsx)(D.DialogTitle,{children:"Edit Team"}),(0,b.jsx)(D.DialogDescription,{children:"Update team information and assignments."})]}),(0,b.jsx)(E.Form,{...az,children:(0,b.jsxs)("form",{onSubmit:az.handleSubmit(aV),className:"space-y-4",children:[(0,b.jsx)(E.FormField,{control:az.control,name:"name",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Team Name *"}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{placeholder:"e.g., Alpha Team, Fiber Crew 1",...a})}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsx)(E.FormField,{control:az.control,name:"foreman_user_id",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Foreman"}),(0,b.jsxs)(F.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(F.SelectTrigger,{children:(0,b.jsx)(F.SelectValue,{placeholder:"Select foreman..."})})}),(0,b.jsxs)(F.SelectContent,{children:[(0,b.jsx)(F.SelectItem,{value:"none",children:"No foreman assigned"}),aF?.map(a=>(0,b.jsxs)(F.SelectItem,{value:a.id,children:[a.first_name," ",a.last_name," (",a.role,")"]},a.id))]})]}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsx)(E.FormField,{control:az.control,name:"description",render:({field:a})=>(0,b.jsxs)(E.FormItem,{children:[(0,b.jsx)(E.FormLabel,{children:"Description"}),(0,b.jsx)(E.FormControl,{children:(0,b.jsx)(x.Input,{placeholder:"Team specialization or notes...",...a})}),(0,b.jsx)(E.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(w.Button,{type:"button",variant:"outline",onClick:()=>{Z(!1),aj(null),az.reset()},children:"Cancel"}),(0,b.jsxs)(w.Button,{type:"submit",disabled:O.isPending,children:[O.isPending?(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent mr-2"}):(0,b.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"Update Team"]})]})]})})]})}),(0,b.jsx)(D.Dialog,{open:$,onOpenChange:ab,children:(0,b.jsxs)(D.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsxs)(D.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Users,{className:"h-5 w-5"}),"User Details - ",ak?.full_name]}),(0,b.jsx)(D.DialogDescription,{children:"Complete user profile information, skills, and management options"})]}),ak&&(0,b.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,b.jsxs)(y.Card,{children:[(0,b.jsx)(y.CardHeader,{children:(0,b.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Users,{className:"h-4 w-4"}),"Personal Information"]})}),(0,b.jsxs)(y.CardContent,{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),(0,b.jsx)("div",{className:"text-sm",children:ak.full_name})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,b.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,b.jsx)(p.Mail,{className:"h-3 w-3"}),ak.email]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),(0,b.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,b.jsx)(o.Phone,{className:"h-3 w-3"}),ak.phone||"—"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Language Preference"}),(0,b.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,b.jsx)(u.Globe,{className:"h-3 w-3"}),ak.lang_pref||"—"]})]})]})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsx)(y.CardHeader,{children:(0,b.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(t.Shield,{className:"h-4 w-4"}),"System Access"]})}),(0,b.jsxs)(y.CardContent,{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Role"}),(0,b.jsx)(z.Badge,{variant:aW(ak.role),children:ak.role})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"PIN Code"}),(0,b.jsxs)("div",{className:"text-sm font-mono flex items-center gap-2",children:[(0,b.jsx)(v,{className:"h-3 w-3"}),ak.pin_code?(0,b.jsx)("span",{className:"bg-muted px-2 py-1 rounded",children:ak.pin_code}):"—"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),(0,b.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,b.jsx)(s.Calendar,{className:"h-3 w-3"}),ak.created_at?new Date(ak.created_at).toLocaleDateString():"—"]})]})]})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsx)(y.CardHeader,{children:(0,b.jsx)(y.CardTitle,{children:"Skills & Competencies"})}),(0,b.jsx)(y.CardContent,{children:ak.skills&&ak.skills.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:ak.skills.map((a,c)=>(0,b.jsx)(z.Badge,{variant:"secondary",children:a},c))}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No skills assigned"})})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(r.FileText,{className:"h-4 w-4"}),"Documents"]}),(0,b.jsx)(y.CardDescription,{children:"User documents, contracts, and certifications"})]}),(0,b.jsx)(y.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(r.FileText,{className:"mx-auto h-12 w-12 mb-4"}),(0,b.jsx)("p",{children:"Document management integration will be implemented"}),(0,b.jsx)("p",{className:"text-xs mt-2",children:"This will connect to the existing document system"})]})})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:[g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(w.Button,{variant:"outline",className:"flex-1",onClick:()=>aM(ak),children:[(0,b.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"Edit User"]}),(0,b.jsx)(K.default,{userId:ak.id,userName:`${ak.first_name} ${ak.last_name}`,trigger:(0,b.jsxs)(w.Button,{variant:"outline",className:"flex-1",children:[(0,b.jsx)(r.FileText,{className:"mr-2 h-4 w-4"}),"Manage Documents"]})}),["crew","worker","foreman"].includes(ak.role)&&!aH(ak.id)&&(0,b.jsxs)(w.Button,{variant:"outline",className:"flex-1",onClick:a=>{a.stopPropagation(),an(ak),ah(!0)},children:[(0,b.jsx)(k.UserPlus,{className:"mr-2 h-4 w-4"}),"Assign to Team"]}),(0,b.jsxs)(w.Button,{variant:"destructive",size:"sm",onClick:()=>aN(ak),children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]}),(0,b.jsx)(w.Button,{variant:"outline",onClick:()=>ab(!1),children:"Close"})]})]})]})}),(0,b.jsx)(D.Dialog,{open:ac,onOpenChange:ad,children:(0,b.jsxs)(D.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsxs)(D.DialogTitle,{children:["Edit User - ",ao?.full_name]}),(0,b.jsx)(D.DialogDescription,{children:"Update user information, role, and skills. Changes will be saved immediately."})]}),ao&&(0,b.jsx)(X,{onSuccess:()=>{ad(!1),ap(null)},onCancel:()=>{ad(!1),ap(null)},defaultRole:ao.role,editMode:!0,initialData:ao})]})}),(0,b.jsx)(D.Dialog,{open:ae,onOpenChange:af,children:(0,b.jsxs)(D.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsxs)(D.DialogTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)(n.Trash2,{className:"h-5 w-5"}),"Delete User"]}),(0,b.jsx)(D.DialogDescription,{children:"Are you sure you want to delete this user? This action cannot be undone."})]}),ak&&(0,b.jsxs)("div",{className:"py-4",children:[(0,b.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[(0,b.jsx)("div",{className:"font-medium",children:ak.full_name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:ak.email}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.Badge,{variant:aW(ak.role),children:ak.role}),ak.pin_code&&(0,b.jsxs)("span",{className:"text-xs bg-muted-foreground/20 px-2 py-1 rounded font-mono",children:["PIN: ",ak.pin_code]})]})]}),(0,b.jsxs)("div",{className:"mt-4 p-3 bg-destructive/10 rounded-lg border border-destructive/20",children:[(0,b.jsx)("div",{className:"text-sm text-destructive font-medium",children:"⚠️ Warning"}),(0,b.jsx)("div",{className:"text-sm text-destructive/80 mt-1",children:"This will permanently delete the user account and remove them from all teams. Any associated work entries and documents will remain but will no longer be linked to this user."})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,b.jsx)(w.Button,{variant:"outline",onClick:()=>{af(!1),al(null)},disabled:Q.isPending,children:"Cancel"}),(0,b.jsx)(w.Button,{variant:"destructive",onClick:aO,disabled:Q.isPending,children:Q.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent mr-2"}),"Deleting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete User"]})})]})]})}),(0,b.jsx)(D.Dialog,{open:au,onOpenChange:av,children:(0,b.jsxs)(D.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(D.DialogHeader,{children:[(0,b.jsxs)(D.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Users,{className:"h-5 w-5"}),"Confirm Bulk Action"]}),(0,b.jsx)(D.DialogDescription,{children:"delete"===aw?`Are you sure you want to delete ${as.size} user${as.size>1?"s":""}? This action cannot be undone.`:aw.startsWith("role_")?`Are you sure you want to change the role of ${as.size} user${as.size>1?"s":""} to ${aw.replace("role_","")}?`:"Please confirm this bulk action."})]}),(0,b.jsxs)("div",{className:"py-4",children:[(0,b.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[(0,b.jsxs)("div",{className:"font-medium",children:["Selected Users (",as.size,"):"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground space-y-1 max-h-32 overflow-y-auto",children:Array.from(as).map(a=>{let c=aG.find(b=>b.id===a);return c?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:c.full_name}),(0,b.jsx)(z.Badge,{variant:aW(c.role),className:"text-xs",children:c.role})]},a):null})})]}),"delete"===aw&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-destructive/10 rounded-lg border border-destructive/20",children:[(0,b.jsx)("div",{className:"text-sm text-destructive font-medium",children:"⚠️ Warning"}),(0,b.jsx)("div",{className:"text-sm text-destructive/80 mt-1",children:"This will permanently delete the selected users and remove them from all teams. Any associated work entries and documents will remain but will no longer be linked to these users."})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,b.jsx)(w.Button,{variant:"outline",onClick:()=>{av(!1),ax("")},disabled:P.isPending||Q.isPending,children:"Cancel"}),(0,b.jsx)(w.Button,{variant:"delete"===aw?"destructive":"default",onClick:aS,disabled:P.isPending||Q.isPending,children:P.isPending||Q.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent mr-2"}),"Processing..."]}):"delete"===aw?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Users"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Users,{className:"mr-2 h-4 w-4"}),"Update Roles"]})})]})]})}),am&&(0,b.jsx)(_,{user:am,teams:aA||[],open:ag,onOpenChange:a=>{ah(a),a||an(null)}})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_teams_page_tsx_4155d960._.js.map