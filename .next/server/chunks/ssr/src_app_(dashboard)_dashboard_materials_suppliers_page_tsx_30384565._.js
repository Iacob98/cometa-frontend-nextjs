module.exports=[20019,a=>{"use strict";a.s(["default",()=>C]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(95245),f=a.i(59501),g=a.i(56757),h=a.i(15618),i=a.i(87532),j=a.i(24569),k=a.i(81560),l=a.i(67900),m=a.i(63519),n=a.i(92258),o=a.i(46842),p=a.i(24987),q=a.i(99570),r=a.i(66718),s=a.i(29246),t=a.i(91119),u=a.i(86304),v=a.i(72233),w=a.i(14574),x=a.i(41921),y=a.i(23292),z=a.i(10999),A=a.i(47507);let B=g.z.object({org_name:g.z.string().min(1,"Organization name is required"),contact_person:g.z.string().min(1,"Contact person is required"),phone:g.z.string().optional(),email:g.z.string().email("Invalid email").optional().or(g.z.literal("")),address:g.z.string().optional(),notes:g.z.string().optional()});function C(){let a=(0,d.useRouter)(),{canManageInventory:g}=(0,A.usePermissions)(),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),{data:I=[],isLoading:J}=(0,z.useSuppliers)(),K=(0,z.useCreateSupplier)(),L=(0,z.useUpdateSupplier)(),M=(0,z.useDeleteSupplier)(),N=(0,e.useForm)({resolver:(0,f.zodResolver)(B),defaultValues:{org_name:"",contact_person:"",phone:"",email:"",address:"",notes:""}}),O=I.filter(a=>a.org_name?.toLowerCase().includes(C.toLowerCase())||a.contact_person?.toLowerCase().includes(C.toLowerCase())||a.email?.toLowerCase().includes(C.toLowerCase())),P=async a=>{try{await K.mutateAsync(a),F(!1),N.reset(),y.toast.success("Supplier created successfully")}catch(a){y.toast.error("Failed to create supplier")}},Q=async a=>{if(G)try{await L.mutateAsync({id:G.id,...a}),H(null),N.reset(),y.toast.success("Supplier updated successfully")}catch(a){y.toast.error("Failed to update supplier")}},R=async a=>{if(window.confirm("Are you sure you want to delete this supplier?"))try{await M.mutateAsync(a),y.toast.success("Supplier deleted successfully")}catch(a){y.toast.error("Failed to delete supplier")}},S=()=>{F(!1),H(null),N.reset()};return J?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Suppliers"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your material suppliers and vendors"})]})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((a,c)=>(0,b.jsxs)(t.Card,{className:"animate-pulse",children:[(0,b.jsxs)(t.CardHeader,{className:"pb-4",children:[(0,b.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"}),(0,b.jsx)("div",{className:"h-3 bg-muted rounded w-1/2"})]}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-3 bg-muted rounded"}),(0,b.jsx)("div",{className:"h-3 bg-muted rounded w-5/6"})]})})]},c))})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Suppliers"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your material suppliers and vendors"})]}),g&&(0,b.jsxs)(w.Dialog,{open:E,onOpenChange:F,children:[(0,b.jsx)(w.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(q.Button,{children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Add Supplier"]})}),(0,b.jsxs)(w.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(w.DialogHeader,{children:[(0,b.jsx)(w.DialogTitle,{children:"Add New Supplier"}),(0,b.jsx)(w.DialogDescription,{children:"Create a new supplier to manage material procurement"})]}),(0,b.jsx)(x.Form,{...N,children:(0,b.jsxs)("form",{onSubmit:N.handleSubmit(P),className:"space-y-4",children:[(0,b.jsx)(x.FormField,{control:N.control,name:"org_name",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Organization Name *"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"e.g., ABC Materials Ltd",...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsx)(x.FormField,{control:N.control,name:"contact_person",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Contact Person *"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"e.g., John Smith",...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(x.FormField,{control:N.control,name:"phone",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Phone"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"+1234567890",...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsx)(x.FormField,{control:N.control,name:"email",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Email"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"contact@company.com",...a})}),(0,b.jsx)(x.FormMessage,{})]})})]}),(0,b.jsx)(x.FormField,{control:N.control,name:"address",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Address"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(s.Textarea,{placeholder:"Company address...",rows:2,...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsx)(x.FormField,{control:N.control,name:"notes",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Notes"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(s.Textarea,{placeholder:"Additional notes...",rows:2,...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(q.Button,{type:"button",variant:"outline",onClick:S,children:"Cancel"}),(0,b.jsx)(q.Button,{type:"submit",disabled:K.isPending,children:K.isPending?"Creating...":"Create Supplier"})]})]})})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,b.jsx)(r.Input,{placeholder:"Search suppliers...",value:C,onChange:a=>D(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(u.Badge,{variant:"secondary",children:[O.length," supplier",1!==O.length?"s":""]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(c=>(0,b.jsxs)(t.Card,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>a.push(`/dashboard/materials/suppliers/${c.id}`),children:[(0,b.jsx)(t.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(v.Avatar,{children:(0,b.jsx)(v.AvatarFallback,{children:(0,b.jsx)(l.Building2,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(t.CardTitle,{className:"text-lg",children:c.org_name}),(0,b.jsxs)(t.CardDescription,{className:"flex items-center mt-1",children:[(0,b.jsx)(o.User,{className:"h-3 w-3 mr-1"}),c.contact_person]})]})]}),g&&(0,b.jsxs)("div",{className:"flex space-x-1",children:[(0,b.jsx)(q.Button,{variant:"ghost",size:"sm",onClick:()=>{H(c),N.reset({org_name:c.org_name||"",contact_person:c.contact_person||"",phone:c.phone||"",email:c.email||"",address:"string"==typeof c.address?c.address:c.address?`${c.address.street||""} ${c.address.city||""} ${c.address.postal_code||""} ${c.address.country||""}`.trim():"",notes:c.notes||""})},children:(0,b.jsx)(j.Edit,{className:"h-3 w-3"})}),(0,b.jsx)(q.Button,{variant:"ghost",size:"sm",onClick:()=>R(c.id),children:(0,b.jsx)(k.Trash2,{className:"h-3 w-3"})})]})]})}),(0,b.jsxs)(t.CardContent,{className:"space-y-2",children:[c.phone&&(0,b.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,b.jsx)(m.Phone,{className:"h-3 w-3 mr-2"}),c.phone]}),c.email&&(0,b.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,b.jsx)(n.Mail,{className:"h-3 w-3 mr-2"}),c.email]}),c.address&&(0,b.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,b.jsx)(p.MapPin,{className:"h-3 w-3 mr-2"}),(0,b.jsx)("span",{className:"truncate",children:"string"==typeof c.address?c.address:`${c.address.street||""} ${c.address.city||""} ${c.address.postal_code||""} ${c.address.country||""}`.trim()})]}),c.notes&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:c.notes})]})]},c.id))}),0===O.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(l.Building2,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No suppliers found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:C?"Try adjusting your search criteria":"Get started by adding your first supplier"}),g&&!C&&(0,b.jsxs)(q.Button,{className:"mt-4",onClick:()=>F(!0),children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Add Supplier"]})]}),(0,b.jsx)(w.Dialog,{open:!!G,onOpenChange:a=>!a&&S(),children:(0,b.jsxs)(w.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(w.DialogHeader,{children:[(0,b.jsx)(w.DialogTitle,{children:"Edit Supplier"}),(0,b.jsx)(w.DialogDescription,{children:"Update supplier information"})]}),(0,b.jsx)(x.Form,{...N,children:(0,b.jsxs)("form",{onSubmit:N.handleSubmit(Q),className:"space-y-4",children:[(0,b.jsx)(x.FormField,{control:N.control,name:"org_name",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Organization Name *"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"e.g., ABC Materials Ltd",...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsx)(x.FormField,{control:N.control,name:"contact_person",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Contact Person *"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"e.g., John Smith",...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(x.FormField,{control:N.control,name:"phone",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Phone"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"+1234567890",...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsx)(x.FormField,{control:N.control,name:"email",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Email"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"contact@company.com",...a})}),(0,b.jsx)(x.FormMessage,{})]})})]}),(0,b.jsx)(x.FormField,{control:N.control,name:"address",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Address"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(s.Textarea,{placeholder:"Company address...",rows:2,...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsx)(x.FormField,{control:N.control,name:"notes",render:({field:a})=>(0,b.jsxs)(x.FormItem,{children:[(0,b.jsx)(x.FormLabel,{children:"Notes"}),(0,b.jsx)(x.FormControl,{children:(0,b.jsx)(s.Textarea,{placeholder:"Additional notes...",rows:2,...a})}),(0,b.jsx)(x.FormMessage,{})]})}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(q.Button,{type:"button",variant:"outline",onClick:S,children:"Cancel"}),(0,b.jsx)(q.Button,{type:"submit",disabled:L.isPending,children:L.isPending?"Updating...":"Update Supplier"})]})]})})]})})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_materials_suppliers_page_tsx_30384565._.js.map