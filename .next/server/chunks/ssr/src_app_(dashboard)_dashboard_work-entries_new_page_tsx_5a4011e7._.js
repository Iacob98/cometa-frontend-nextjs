module.exports=[88922,a=>{"use strict";a.s(["default",()=>y]);var b=a.i(87924),c=a.i(50944),d=a.i(95245),e=a.i(59501),f=a.i(56757),g=a.i(210),h=a.i(14548),i=a.i(24987),j=a.i(3544),k=a.i(13513),l=a.i(4720),m=a.i(67900),n=a.i(99570),o=a.i(91119),p=a.i(41921),q=a.i(66718),r=a.i(80701),s=a.i(15055),t=a.i(75083),u=a.i(49294),v=a.i(86456),w=a.i(47507);let x=f.z.object({project_id:f.z.string().min(1,"Project is required"),stage_code:f.z.enum(["stage_1_marking","stage_2_excavation","stage_3_conduit","stage_4_cable_pulling","stage_5_closure","stage_6_testing","stage_7_backfill","stage_8_restoration","stage_9_documentation","stage_10_quality_check"]),meters_done_m:f.z.coerce.number().min(0,"Meters must be positive"),method:f.z.enum(["manual","machine","mixed"]).optional(),width_m:f.z.coerce.number().min(0).optional(),depth_m:f.z.coerce.number().min(0).optional(),cables_count:f.z.coerce.number().min(0).optional(),has_protection_pipe:f.z.boolean().optional(),soil_type:f.z.string().optional(),notes:f.z.string().optional(),cabinet_id:f.z.string().optional(),segment_id:f.z.string().optional(),cut_id:f.z.string().optional(),house_id:f.z.string().optional(),crew_id:f.z.string().optional()});function y(){let a=(0,c.useRouter)(),{user:f}=(0,w.useAuth)(),y=(0,u.useCreateWorkEntry)(),{data:z}=(0,v.useProjects)({page:1,per_page:100}),{data:A}=(0,u.useWorkStages)(),B=z?.items||[],C=(0,d.useForm)({resolver:(0,e.zodResolver)(x),defaultValues:{project_id:"",stage_code:"stage_1_marking",meters_done_m:0,method:"manual",width_m:void 0,depth_m:void 0,cables_count:void 0,has_protection_pipe:!1,soil_type:"",notes:"",cabinet_id:"",segment_id:"",cut_id:"",house_id:"",crew_id:""}}),D=C.watch("stage_code"),E=async b=>{try{let c={...b,cabinet_id:b.cabinet_id||void 0,segment_id:b.segment_id||void 0,cut_id:b.cut_id||void 0,house_id:b.house_id||void 0,crew_id:b.crew_id||void 0,width_m:b.width_m||void 0,depth_m:b.depth_m||void 0,cables_count:b.cables_count||void 0,soil_type:b.soil_type||void 0,notes:b.notes||void 0,method:b.method||void 0},d=await y.mutateAsync(c);a.push(`/dashboard/work-entries/${d.id}`)}catch(a){console.error("Failed to create work entry:",a)}},F=[{value:"stage_1_marking",label:"1. Marking"},{value:"stage_2_excavation",label:"2. Excavation"},{value:"stage_3_conduit",label:"3. Conduit Installation"},{value:"stage_4_cable_pulling",label:"4. Cable Pulling"},{value:"stage_5_closure",label:"5. Closure"},{value:"stage_6_testing",label:"6. Testing"},{value:"stage_7_backfill",label:"7. Backfilling"},{value:"stage_8_restoration",label:"8. Surface Restoration"},{value:"stage_9_documentation",label:"9. Documentation"},{value:"stage_10_quality_check",label:"10. Quality Check"}],G=[{value:"manual",label:"Manual"},{value:"machine",label:"Machine"},{value:"mixed",label:"Mixed"}],H=["stage_2_excavation","stage_3_conduit"].includes(D),I=["stage_3_conduit","stage_4_cable_pulling"].includes(D),J="stage_2_excavation"===D;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(n.Button,{variant:"ghost",size:"sm",onClick:()=>a.back(),className:"flex items-center space-x-2",children:[(0,b.jsx)(g.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Back"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Work Entry"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Record field work progress and measurements"})]})]})}),(0,b.jsx)("div",{className:"max-w-4xl",children:(0,b.jsx)(p.Form,{...C,children:(0,b.jsxs)("form",{onSubmit:C.handleSubmit(E),className:"space-y-6",children:[(0,b.jsxs)(t.Tabs,{defaultValue:"basic",className:"space-y-6",children:[(0,b.jsxs)(t.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(t.TabsTrigger,{value:"basic",children:"Basic Info"}),(0,b.jsx)(t.TabsTrigger,{value:"measurements",children:"Measurements"}),(0,b.jsx)(t.TabsTrigger,{value:"location",children:"Location"}),(0,b.jsx)(t.TabsTrigger,{value:"notes",children:"Notes & Photos"})]}),(0,b.jsx)(t.TabsContent,{value:"basic",className:"space-y-6",children:(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(m.Building2,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Basic Information"})]}),(0,b.jsx)(o.CardDescription,{children:"Essential details about the work performed"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:C.control,name:"project_id",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Project *"}),(0,b.jsxs)(r.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select project"})})}),(0,b.jsx)(r.SelectContent,{children:B.map(a=>(0,b.jsxs)(r.SelectItem,{value:a.id,children:[a.name," - ",a.city]},a.id))})]}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:C.control,name:"stage_code",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Work Stage *"}),(0,b.jsxs)(r.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select work stage"})})}),(0,b.jsx)(r.SelectContent,{children:F.map(a=>(0,b.jsx)(r.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(p.FormDescription,{children:"Select the type of work performed"}),(0,b.jsx)(p.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:C.control,name:"meters_done_m",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Meters Completed *"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{type:"number",step:"0.1",min:"0",placeholder:"e.g., 25.5",...a})}),(0,b.jsx)(p.FormDescription,{children:"Length of work completed in meters"}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:C.control,name:"method",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Work Method"}),(0,b.jsxs)(r.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select method"})})}),(0,b.jsx)(r.SelectContent,{children:G.map(a=>(0,b.jsx)(r.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(p.FormDescription,{children:"How the work was performed"}),(0,b.jsx)(p.FormMessage,{})]})})]})]})]})}),(0,b.jsx)(t.TabsContent,{value:"measurements",className:"space-y-6",children:(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Ruler,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Measurements & Technical Details"})]}),(0,b.jsx)(o.CardDescription,{children:"Technical specifications and measurements"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-6",children:[H&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:C.control,name:"width_m",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Width (meters)"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{type:"number",step:"0.01",min:"0",placeholder:"e.g., 0.30",...a})}),(0,b.jsx)(p.FormDescription,{children:"Width of excavation or installation"}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:C.control,name:"depth_m",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Depth (meters)"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{type:"number",step:"0.01",min:"0",placeholder:"e.g., 0.80",...a})}),(0,b.jsx)(p.FormDescription,{children:"Depth of excavation or installation"}),(0,b.jsx)(p.FormMessage,{})]})})]}),I&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:C.control,name:"cables_count",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Number of Cables"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{type:"number",min:"0",placeholder:"e.g., 4",...a})}),(0,b.jsx)(p.FormDescription,{children:"Number of cables installed or pulled"}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:C.control,name:"has_protection_pipe",render:({field:a})=>(0,b.jsxs)(p.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(s.Checkbox,{checked:a.value,onCheckedChange:a.onChange})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(p.FormLabel,{children:"Protection Pipe Installed"}),(0,b.jsx)(p.FormDescription,{children:"Check if protection pipe was used"})]})]})})]}),J&&(0,b.jsx)(p.FormField,{control:C.control,name:"soil_type",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Soil Type"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"e.g., Clay, Sand, Rock",...a})}),(0,b.jsx)(p.FormDescription,{children:"Description of soil conditions encountered"}),(0,b.jsx)(p.FormMessage,{})]})})]})]})}),(0,b.jsx)(t.TabsContent,{value:"location",className:"space-y-6",children:(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(i.MapPin,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Location & Assignment"})]}),(0,b.jsx)(o.CardDescription,{children:"Specific location and team assignment details"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:C.control,name:"cabinet_id",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Cabinet ID"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"e.g., CAB-001",...a})}),(0,b.jsx)(p.FormDescription,{children:"Network cabinet identifier (if applicable)"}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:C.control,name:"segment_id",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Segment ID"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"e.g., SEG-A1",...a})}),(0,b.jsx)(p.FormDescription,{children:"Cable segment identifier (if applicable)"}),(0,b.jsx)(p.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:C.control,name:"cut_id",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Cut ID"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"e.g., CUT-001",...a})}),(0,b.jsx)(p.FormDescription,{children:"Excavation cut identifier (if applicable)"}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:C.control,name:"house_id",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"House ID"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"e.g., H-123",...a})}),(0,b.jsx)(p.FormDescription,{children:"House connection identifier (if applicable)"}),(0,b.jsx)(p.FormMessage,{})]})})]}),(0,b.jsx)(p.FormField,{control:C.control,name:"crew_id",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Crew Assignment"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"Crew ID (if different from current)",...a})}),(0,b.jsx)(p.FormDescription,{children:"Leave empty to use your current crew assignment"}),(0,b.jsx)(p.FormMessage,{})]})})]})]})}),(0,b.jsx)(t.TabsContent,{value:"notes",className:"space-y-6",children:(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.FileText,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Additional Information"})]}),(0,b.jsx)(o.CardDescription,{children:"Notes, observations, and documentation"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-6",children:[(0,b.jsx)(p.FormField,{control:C.control,name:"notes",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Notes & Observations"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)("textarea",{className:"min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Any additional notes, observations, or issues encountered...",...a})}),(0,b.jsx)(p.FormDescription,{children:"Optional notes about the work performed, conditions, or issues"}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)("div",{className:"rounded-md border border-dashed border-gray-300 p-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(k.Camera,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:"Photo Upload"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Photos can be uploaded after creating the work entry"})]})]})})]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>a.back(),children:"Cancel"}),(0,b.jsxs)(n.Button,{type:"submit",disabled:y.isPending,className:"flex items-center space-x-2",children:[y.isPending?(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}):(0,b.jsx)(h.Save,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Create Work Entry"})]})]})]})})})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_work-entries_new_page_tsx_5a4011e7._.js.map