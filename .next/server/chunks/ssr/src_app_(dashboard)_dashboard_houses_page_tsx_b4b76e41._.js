module.exports=[3812,a=>{"use strict";a.s(["default",()=>G],3812);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(15618),f=a.i(87532),g=a.i(81010),h=a.i(41675),i=a.i(24987),j=a.i(63519),k=a.i(41710),l=a.i(16201),m=a.i(92e3),n=a.i(77156),o=a.i(24569),p=a.i(81560),q=a.i(70106);let r=(0,q.default)("calendar-plus",[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),s=(0,q.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),t=(0,q.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var u=a.i(99570),v=a.i(66718),w=a.i(91119),x=a.i(86304),y=a.i(6015),z=a.i(35732),A=a.i(80701),B=a.i(75083),C=a.i(51252),D=a.i(86456),E=a.i(44750),F=a.i(47507);function G(){let a=(0,d.useRouter)(),{canManageConnections:q}=(0,F.usePermissions)(),G=(0,C.useDeleteHouse)();(0,C.useScheduleAppointment)();let[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)("all"),{data:N,isLoading:O,error:P}=(0,C.useHouses)({search:H||void 0,status:"all"===J?void 0:J,project_id:"all"===L?void 0:L,page:1,per_page:20}),{data:Q}=(0,C.usePendingConnections)(),{data:R}=(0,C.useScheduledAppointments)(),{data:S}=(0,C.useInProgressConnections)(),{data:T}=(0,C.useCompletedConnections)(),{data:U}=(0,C.useTodaysAppointments)(),{data:V}=(0,D.useProjects)({page:1,per_page:100}),{data:W}=(0,E.useTeams)(),X=N?.items||[],Y=V?.items||[],Z=async(a,b)=>{confirm(`Are you sure you want to delete house "${b}"? This action cannot be undone.`)&&await G.mutateAsync(a)};return P?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"House Connections"})}),(0,b.jsx)(w.Card,{children:(0,b.jsx)(w.CardContent,{className:"py-8",children:(0,b.jsx)("div",{className:"text-center text-muted-foreground",children:"Failed to load house connections. Please try again later."})})})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"House Connections"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage house connection appointments and track progress"})]}),q&&(0,b.jsxs)(u.Button,{onClick:()=>a.push("/dashboard/houses/new"),children:[(0,b.jsx)(e.Plus,{className:"mr-2 h-4 w-4"}),"New House"]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-5",children:[(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Pending"}),(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(w.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:Q?.length||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting assignment"})]})]}),(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Scheduled"}),(0,b.jsx)(h.Calendar,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(w.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:R?.total||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Appointments set"})]})]}),(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"In Progress"}),(0,b.jsx)(k.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(w.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:S?.length||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active work"})]})]}),(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Completed"}),(0,b.jsx)(l.CheckCircle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(w.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:T?.length||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Connections done"})]})]}),(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Today"}),(0,b.jsx)(h.Calendar,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(w.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:U?.total||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Appointments today"})]})]})]}),(0,b.jsxs)(B.Tabs,{defaultValue:"all",className:"space-y-4",children:[(0,b.jsxs)(B.TabsList,{children:[(0,b.jsxs)(B.TabsTrigger,{value:"all",children:["All Houses (",X.length,")"]}),(0,b.jsxs)(B.TabsTrigger,{value:"pending",children:["Pending (",Q?.length||0,")"]}),(0,b.jsxs)(B.TabsTrigger,{value:"scheduled",children:["Scheduled (",R?.total||0,")"]}),(0,b.jsxs)(B.TabsTrigger,{value:"today",children:["Today (",U?.total||0,")"]}),(0,b.jsxs)(B.TabsTrigger,{value:"completed",children:["Completed (",T?.length||0,")"]})]}),(0,b.jsxs)(B.TabsContent,{value:"all",className:"space-y-6",children:[(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{children:[(0,b.jsx)(w.CardTitle,{children:"Filter Houses"}),(0,b.jsx)(w.CardDescription,{children:"Search and filter house connections by various criteria"})]}),(0,b.jsx)(w.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(v.Input,{placeholder:"Search by house number, address, or customer...",value:H,onChange:a=>I(a.target.value),className:"pl-8"})]})}),(0,b.jsxs)(A.Select,{value:L,onValueChange:M,children:[(0,b.jsx)(A.SelectTrigger,{className:"w-48",children:(0,b.jsx)(A.SelectValue,{placeholder:"Filter by project"})}),(0,b.jsxs)(A.SelectContent,{children:[(0,b.jsx)(A.SelectItem,{value:"all",children:"All Projects"}),Y.map(a=>(0,b.jsx)(A.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(A.Select,{value:J,onValueChange:a=>K(a),children:[(0,b.jsx)(A.SelectTrigger,{className:"w-48",children:(0,b.jsx)(A.SelectValue,{placeholder:"Filter by status"})}),(0,b.jsxs)(A.SelectContent,{children:[(0,b.jsx)(A.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(A.SelectItem,{value:"not_assigned",children:"Not Assigned"}),(0,b.jsx)(A.SelectItem,{value:"appointment_scheduled",children:"Scheduled"}),(0,b.jsx)(A.SelectItem,{value:"in_progress",children:"In Progress"}),(0,b.jsx)(A.SelectItem,{value:"connected",children:"Connected"}),(0,b.jsx)(A.SelectItem,{value:"partial_only",children:"Partial Only"}),(0,b.jsx)(A.SelectItem,{value:"postponed",children:"Postponed"})]})]})]})})]}),(0,b.jsxs)(w.Card,{children:[(0,b.jsx)(w.CardHeader,{children:(0,b.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Home,{className:"h-5 w-5"}),"House Connections"]})}),(0,b.jsx)(w.CardContent,{children:O?(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded flex-1"}),(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-20"}),(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-16"})]},c))}):0===X.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(g.Home,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No houses found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:H||"all"!==J||"all"!==L?"No houses match your current filters.":"Get started by adding houses for connection."}),q&&(0,b.jsxs)(u.Button,{className:"mt-4",onClick:()=>a.push("/dashboard/houses/new"),children:[(0,b.jsx)(e.Plus,{className:"mr-2 h-4 w-4"}),"Add House"]})]}):(0,b.jsxs)(y.Table,{children:[(0,b.jsx)(y.TableHeader,{children:(0,b.jsxs)(y.TableRow,{children:[(0,b.jsx)(y.TableHead,{children:"House & Address"}),(0,b.jsx)(y.TableHead,{children:"Customer"}),(0,b.jsx)(y.TableHead,{children:"Project"}),(0,b.jsx)(y.TableHead,{children:"Connection Info"}),(0,b.jsx)(y.TableHead,{children:"Status"}),(0,b.jsx)(y.TableHead,{children:"Assigned Team"}),(0,b.jsx)(y.TableHead,{children:"Scheduled Date"}),(0,b.jsx)(y.TableHead,{className:"w-[100px]",children:"Actions"})]})}),(0,b.jsx)(y.TableBody,{children:X.map(c=>(0,b.jsxs)(y.TableRow,{children:[(0,b.jsx)(y.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-medium",children:["#",c.house_number]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center space-x-1",children:[(0,b.jsx)(i.MapPin,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:c.address})]})]})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsxs)("div",{children:[c.customer_name&&(0,b.jsx)("div",{className:"font-medium text-sm",children:c.customer_name}),c.customer_contact&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center space-x-1",children:[(0,b.jsx)(j.Phone,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:c.customer_contact})]}),!c.customer_name&&!c.customer_contact&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})]})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:c.project?.name||`Project ${c.project_id}`})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-sm",children:"full"===c.connection_type?"Full Connection":"Partial Connection"}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["trench"===c.connection_method?"Trenching":"Mole"," • ",c.estimated_length_m,"m"]})]})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsx)(x.Badge,{variant:(a=>{switch(a){case"connected":return"default";case"in_progress":default:return"secondary";case"appointment_scheduled":case"partial_only":return"outline";case"postponed":return"destructive"}})(c.status),children:(a=>{switch(a){case"not_assigned":return"Not Assigned";case"appointment_scheduled":return"Scheduled";case"in_progress":return"In Progress";case"connected":return"Connected";case"partial_only":return"Partial Only";case"postponed":return"Postponed";default:return a}})(c.status)})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:c.assigned_team?.name||"—"})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:c.scheduled_date?(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(h.Calendar,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:new Date(c.scheduled_date).toLocaleDateString()})]}):"—"})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsxs)(z.DropdownMenu,{children:[(0,b.jsx)(z.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(u.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(o.Edit,{className:"h-4 w-4"})]})}),(0,b.jsxs)(z.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(z.DropdownMenuLabel,{children:"Actions"}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/houses/${c.id}`),children:[(0,b.jsx)(n.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]}),q&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/houses/${c.id}/edit`),children:[(0,b.jsx)(o.Edit,{className:"mr-2 h-4 w-4"}),"Edit House"]}),"not_assigned"===c.status&&(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/houses/${c.id}/schedule`),children:[(0,b.jsx)(r,{className:"mr-2 h-4 w-4"}),"Schedule Appointment"]}),"appointment_scheduled"===c.status&&(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/houses/${c.id}/start`),children:[(0,b.jsx)(s,{className:"mr-2 h-4 w-4"}),"Start Connection"]}),"in_progress"===c.status&&(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>a.push(`/dashboard/houses/${c.id}/complete`),children:[(0,b.jsx)(t,{className:"mr-2 h-4 w-4"}),"Complete Connection"]}),(0,b.jsx)(z.DropdownMenuSeparator,{}),(0,b.jsxs)(z.DropdownMenuItem,{className:"text-destructive",onClick:()=>Z(c.id,c.house_number),children:[(0,b.jsx)(p.Trash2,{className:"mr-2 h-4 w-4"}),"Delete House"]})]})]})]})})]},c.id))})]})})]})]}),(0,b.jsx)(B.TabsContent,{value:"pending",className:"space-y-6",children:(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{children:[(0,b.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(m.AlertCircle,{className:"h-5 w-5"}),"Pending Connections"]}),(0,b.jsx)(w.CardDescription,{children:"Houses awaiting team assignment and appointment scheduling"})]}),(0,b.jsx)(w.CardContent,{children:(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Pending connections management will be implemented with team assignment interface."})})]})}),(0,b.jsx)(B.TabsContent,{value:"scheduled",className:"space-y-6",children:(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{children:[(0,b.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Calendar,{className:"h-5 w-5"}),"Scheduled Appointments"]}),(0,b.jsx)(w.CardDescription,{children:"Houses with confirmed appointment dates"})]}),(0,b.jsx)(w.CardContent,{children:(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Scheduled appointments calendar view will be implemented."})})]})}),(0,b.jsx)(B.TabsContent,{value:"today",className:"space-y-6",children:(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{children:[(0,b.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Clock,{className:"h-5 w-5"}),"Today's Appointments"]}),(0,b.jsx)(w.CardDescription,{children:"Appointments scheduled for today"})]}),(0,b.jsx)(w.CardContent,{children:(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Today's appointments dashboard will be implemented with real-time status updates."})})]})}),(0,b.jsx)(B.TabsContent,{value:"completed",className:"space-y-6",children:(0,b.jsxs)(w.Card,{children:[(0,b.jsxs)(w.CardHeader,{children:[(0,b.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(l.CheckCircle,{className:"h-5 w-5"}),"Completed Connections"]}),(0,b.jsx)(w.CardDescription,{children:"Successfully completed house connections"})]}),(0,b.jsx)(w.CardContent,{children:(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Completed connections history and statistics will be implemented."})})]})})]})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_houses_page_tsx_b4b76e41._.js.map