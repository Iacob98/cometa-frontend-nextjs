{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/hooks/use-documents.ts"],"sourcesContent":["'use client';\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from 'sonner';\nimport type {\n  WorkerDocument,\n  DocumentCategory,\n  DocumentsResponse,\n  DocumentStatus,\n  DocumentCategoryCode\n} from '@/types';\n\nexport interface DocumentFilters {\n  user_id?: string;\n  category_code?: DocumentCategoryCode;\n  status?: DocumentStatus;\n  search?: string;\n  page?: number;\n  per_page?: number;\n}\n\nexport interface CreateDocumentRequest {\n  user_id: string;\n  category_id: string;\n  document_number?: string;\n  issuing_authority?: string;\n  issue_date?: string;\n  expiry_date?: string;\n  valid_until?: string;\n  file_url: string;\n  file_name: string;\n  file_size?: number;\n  file_type: string;\n  notes?: string;\n}\n\nexport interface VerifyDocumentRequest {\n  document_id: string;\n  verified: boolean;\n  notes?: string;\n}\n\n// Query keys\nexport const documentKeys = {\n  all: ['documents'] as const,\n  lists: () => [...documentKeys.all, 'list'] as const,\n  list: (filters: DocumentFilters) => [...documentKeys.lists(), filters] as const,\n  categories: () => [...documentKeys.all, 'categories'] as const,\n  stats: () => [...documentKeys.all, 'stats'] as const,\n};\n\n// Fetch documents with filters\nexport function useDocuments(filters: DocumentFilters = {}) {\n  const searchParams = new URLSearchParams();\n\n  Object.entries(filters).forEach(([key, value]) => {\n    if (value !== undefined && value !== null && value !== '') {\n      searchParams.append(key, value.toString());\n    }\n  });\n\n  return useQuery({\n    queryKey: documentKeys.list(filters),\n    queryFn: async (): Promise<DocumentsResponse> => {\n      const response = await fetch(`/api/documents?${searchParams.toString()}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch documents');\n      }\n      return response.json();\n    },\n  });\n}\n\n// Upload new document\nexport function useUploadDocument() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (data: CreateDocumentRequest) => {\n      const response = await fetch('/api/documents', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to upload document');\n      }\n\n      return response.json();\n    },\n    onSuccess: () => {\n      // Invalidate all document queries to refresh data\n      queryClient.invalidateQueries({ queryKey: documentKeys.all });\n      toast.success('Document uploaded successfully');\n    },\n    onError: (error: Error) => {\n      console.error('Failed to upload document:', error);\n      toast.error(error.message || 'Failed to upload document');\n    },\n  });\n}\n\n// Verify document\nexport function useVerifyDocument() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (data: VerifyDocumentRequest) => {\n      const response = await fetch(`/api/documents/${data.document_id}/verify`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          verified: data.verified,\n          notes: data.notes,\n        }),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to verify document');\n      }\n\n      return response.json();\n    },\n    onSuccess: (_, variables) => {\n      // Invalidate document queries to refresh data\n      queryClient.invalidateQueries({ queryKey: documentKeys.all });\n      toast.success(variables.verified ? 'Document verified successfully' : 'Document verification removed');\n    },\n    onError: (error: Error) => {\n      console.error('Failed to verify document:', error);\n      toast.error(error.message || 'Failed to verify document');\n    },\n  });\n}\n\n// Delete document\nexport function useDeleteDocument() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (documentId: string) => {\n      const response = await fetch(`/api/documents/${documentId}`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to delete document');\n      }\n\n      return response.json();\n    },\n    onSuccess: () => {\n      // Invalidate document queries to refresh data\n      queryClient.invalidateQueries({ queryKey: documentKeys.all });\n      toast.success('Document deleted successfully');\n    },\n    onError: (error: Error) => {\n      console.error('Failed to delete document:', error);\n      toast.error(error.message || 'Failed to delete document');\n    },\n  });\n}\n\n// Specialized hooks for common use cases\nexport function useUserDocuments(userId?: string) {\n  return useDocuments({\n    user_id: userId,\n    page: 1,\n    per_page: 50,\n  });\n}\n\nexport function useDocumentsByCategory(categoryCode?: DocumentCategoryCode) {\n  return useDocuments({\n    category_code: categoryCode,\n    page: 1,\n    per_page: 50,\n  });\n}\n\nexport function useExpiredDocuments() {\n  return useDocuments({\n    status: 'expired',\n    page: 1,\n    per_page: 50,\n  });\n}\n\nexport function useExpiringDocuments() {\n  return useDocuments({\n    status: 'expiring_soon',\n    page: 1,\n    per_page: 50,\n  });\n}\n\nexport function usePendingVerifications() {\n  return useDocuments({\n    status: 'pending',\n    page: 1,\n    per_page: 50,\n  });\n}\n\n// Document categories and status constants\nexport const DOCUMENT_CATEGORIES: DocumentCategoryCode[] = [\n  'WORK_PERMIT',\n  'INSURANCE',\n  'ID_DOCUMENT',\n  'VISA',\n  'MEDICAL',\n  'SAFETY_TRAINING',\n  'PASSPORT',\n  'DRIVING_LICENSE',\n];\n\nexport const DOCUMENT_STATUSES: DocumentStatus[] = [\n  'active',\n  'expired',\n  'expiring_soon',\n  'pending',\n  'inactive',\n];\n\n// Helper function to get status label\nexport function getStatusLabel(status: DocumentStatus): string {\n  const labels: Record<DocumentStatus, string> = {\n    active: 'Active',\n    expired: 'Expired',\n    expiring_soon: 'Expiring Soon',\n    pending: 'Pending Verification',\n    inactive: 'Inactive',\n  };\n\n  return labels[status] || status;\n}\n\n// Helper function to get status color\nexport function getStatusColor(status: DocumentStatus): string {\n  const colors: Record<DocumentStatus, string> = {\n    active: 'bg-green-100 text-green-800',\n    expired: 'bg-red-100 text-red-800',\n    expiring_soon: 'bg-yellow-100 text-yellow-800',\n    pending: 'bg-blue-100 text-blue-800',\n    inactive: 'bg-gray-100 text-gray-800',\n  };\n\n  return colors[status] || 'bg-gray-100 text-gray-800';\n}\n\n// Helper function to get category label\nexport function getCategoryLabel(categoryCode: DocumentCategoryCode): string {\n  const labels: Record<DocumentCategoryCode, string> = {\n    WORK_PERMIT: 'Work Permit',\n    INSURANCE: 'Insurance',\n    ID_DOCUMENT: 'ID Document',\n    VISA: 'Visa',\n    MEDICAL: 'Medical Certificate',\n    SAFETY_TRAINING: 'Safety Training',\n    PASSPORT: 'Passport',\n    DRIVING_LICENSE: 'Driving License',\n  };\n\n  return labels[categoryCode] || categoryCode.replace(/_/g, ' ');\n}\n\n// Helper function to check if document is expiring soon\nexport function isExpiringSign(document: WorkerDocument): boolean {\n  if (!document.expiry_date) return false;\n\n  const expiry = new Date(document.expiry_date);\n  const now = new Date();\n  const daysUntilExpiry = Math.ceil((expiry.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n\n  return daysUntilExpiry >= 0 && daysUntilExpiry <= 30;\n}\n\n// Helper function to check if document is expired\nexport function isExpired(document: WorkerDocument): boolean {\n  if (!document.expiry_date) return false;\n\n  const expiry = new Date(document.expiry_date);\n  const now = new Date();\n\n  return expiry < now;\n}\n\n// Helper function to get days until expiry\nexport function getDaysUntilExpiry(document: WorkerDocument): number | null {\n  if (!document.expiry_date) return null;\n\n  const expiry = new Date(document.expiry_date);\n  const now = new Date();\n\n  return Math.ceil((expiry.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n}\n\n// Helper function to format file size\nexport function formatFileSize(bytes: number): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\n// Helper function to get file type icon\nexport function getFileTypeIcon(fileType: string): string {\n  if (fileType.includes('pdf')) return 'ðŸ“„';\n  if (fileType.includes('image')) return 'ðŸ–¼ï¸';\n  if (fileType.includes('word') || fileType.includes('document')) return 'ðŸ“';\n  if (fileType.includes('excel') || fileType.includes('spreadsheet')) return 'ðŸ“Š';\n  if (fileType.includes('powerpoint') || fileType.includes('presentation')) return 'ðŸ“º';\n  return 'ðŸ“Ž';\n}\n\n// Document categories hook - get all available categories\nexport function useDocumentCategories() {\n  return useQuery({\n    queryKey: documentKeys.categories(),\n    queryFn: async (): Promise<DocumentCategory[]> => {\n      const response = await fetch('/api/documents');\n      if (!response.ok) {\n        throw new Error('Failed to fetch document categories');\n      }\n      const data = await response.json();\n      return data.categories || [];\n    },\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n}\n\n// Document search hook - search across document content\nexport function useSearchDocuments() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (searchRequest: {\n      query: string;\n      include_content?: boolean;\n      highlight?: boolean;\n      fuzzy?: boolean;\n    }) => {\n      const searchParams = new URLSearchParams();\n      searchParams.append('search', searchRequest.query);\n      if (searchRequest.include_content) searchParams.append('include_content', 'true');\n      if (searchRequest.highlight) searchParams.append('highlight', 'true');\n      if (searchRequest.fuzzy) searchParams.append('fuzzy', 'true');\n\n      const response = await fetch(`/api/documents/search?${searchParams.toString()}`);\n      if (!response.ok) {\n        throw new Error('Failed to search documents');\n      }\n      return response.json();\n    },\n    onSuccess: (data) => {\n      // Cache search results temporarily\n      queryClient.setQueryData(['documents', 'search', data.query], data);\n    },\n    onError: (error: Error) => {\n      toast.error(`Search failed: ${error.message}`);\n    },\n  });\n}\n\n// Document actions hook - for action menus and operations\nexport function useDocumentActions() {\n  const queryClient = useQueryClient();\n\n  const shareDocument = useMutation({\n    mutationFn: async ({ documentId, accessLevel }: { documentId: string; accessLevel: 'public' | 'private' | 'team' }) => {\n      const response = await fetch(`/api/documents/${documentId}/share`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ access_level: accessLevel }),\n      });\n      if (!response.ok) throw new Error('Failed to share document');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: documentKeys.all });\n      toast.success('Document sharing updated');\n    },\n    onError: (error: Error) => toast.error(error.message),\n  });\n\n  const downloadDocument = useMutation({\n    mutationFn: async (documentId: string) => {\n      const response = await fetch(`/api/documents/${documentId}/download`);\n      if (!response.ok) throw new Error('Failed to download document');\n      const blob = await response.blob();\n      return { blob, response };\n    },\n    onError: (error: Error) => toast.error(error.message),\n  });\n\n  const duplicateDocument = useMutation({\n    mutationFn: async (documentId: string) => {\n      const response = await fetch(`/api/documents/${documentId}/duplicate`, {\n        method: 'POST',\n      });\n      if (!response.ok) throw new Error('Failed to duplicate document');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: documentKeys.all });\n      toast.success('Document duplicated');\n    },\n    onError: (error: Error) => toast.error(error.message),\n  });\n\n  return {\n    shareDocument,\n    downloadDocument,\n    duplicateDocument,\n  };\n}\n\n// Document classification hook - for auto-categorizing documents\nexport function useClassifyDocument() {\n  return useMutation({\n    mutationFn: async (file: File) => {\n      // Simple classification based on file extension and name\n      const fileName = file.name.toLowerCase();\n      const fileType = file.type.toLowerCase();\n\n      // Classify based on file name patterns\n      if (fileName.includes('passport') || fileName.includes('Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚')) {\n        return { category_code: 'PASSPORT', confidence: 0.9 };\n      }\n      if (fileName.includes('visa') || fileName.includes('Ð²Ð¸Ð·Ð°')) {\n        return { category_code: 'VISA', confidence: 0.85 };\n      }\n      if (fileName.includes('permit') || fileName.includes('Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ')) {\n        return { category_code: 'WORK_PERMIT', confidence: 0.8 };\n      }\n      if (fileName.includes('insurance') || fileName.includes('ÑÑ‚Ñ€Ð°Ñ…Ð¾Ð²')) {\n        return { category_code: 'INSURANCE', confidence: 0.8 };\n      }\n      if (fileName.includes('medical') || fileName.includes('Ð¼ÐµÐ´Ð¸Ñ†Ð¸Ð½')) {\n        return { category_code: 'MEDICAL', confidence: 0.75 };\n      }\n      if (fileName.includes('safety') || fileName.includes('Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½')) {\n        return { category_code: 'SAFETY_TRAINING', confidence: 0.75 };\n      }\n      if (fileName.includes('license') || fileName.includes('Ð»Ð¸Ñ†ÐµÐ½Ð·Ð¸')) {\n        return { category_code: 'DRIVING_LICENSE', confidence: 0.7 };\n      }\n\n      // Default to ID document for images\n      if (fileType.includes('image')) {\n        return { category_code: 'ID_DOCUMENT', confidence: 0.5 };\n      }\n\n      // Default classification\n      return { category_code: 'ID_DOCUMENT', confidence: 0.3 };\n    },\n    onError: (error: Error) => {\n      console.warn('Document classification failed:', error);\n    },\n  });\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/components/documents/document-upload.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Upload, X, FileText, Image, FileIcon, AlertCircle } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  useUploadDocument,\n  useDocumentCategories,\n  useClassifyDocument,\n} from \"@/hooks/use-documents\";\nimport { cn } from \"@/lib/utils\";\nimport type {\n  CreateDocumentRequest,\n  DocumentCategoryCode,\n  DocumentAccessLevel,\n} from \"@/types\";\n\ninterface DocumentUploadProps {\n  projectId?: string;\n  houseId?: string;\n  workEntryId?: string;\n  teamId?: string;\n  userId?: string;\n  onUploadComplete?: (document: any) => void;\n  maxFiles?: number;\n  acceptedFileTypes?: string[];\n  maxFileSize?: number; // in bytes\n}\n\ninterface FileWithPreview {\n  file: File; // Original File object\n  preview?: string;\n  category?: DocumentCategoryCode;\n  tags?: string[];\n  description?: string;\n  accessLevel?: DocumentAccessLevel;\n  documentNumber?: string;\n  issuingAuthority?: string;\n  issueDate?: string;\n  expiryDate?: string;\n  // File properties for compatibility\n  name: string;\n  size: number;\n  type: string;\n}\n\nconst getFileIcon = (fileType: string | undefined) => {\n  if (!fileType) return FileIcon;\n  if (fileType.startsWith(\"image/\")) return Image;\n  if (fileType.includes(\"pdf\") || fileType.includes(\"document\")) return FileText;\n  return FileIcon;\n};\n\nconst formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return \"0 Bytes\";\n  const k = 1024;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n};\n\nexport function DocumentUpload({\n  projectId,\n  houseId,\n  workEntryId,\n  teamId,\n  userId,\n  onUploadComplete,\n  maxFiles = 10,\n  acceptedFileTypes = [\n    \"image/*\",\n    \"application/pdf\",\n    \"application/msword\", // .doc files\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", // .docx files\n    \"application/vnd.ms-excel\", // .xls files\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", // .xlsx files\n    \".doc\",\n    \".docx\",\n    \".xls\",\n    \".xlsx\"\n  ],\n  maxFileSize = 50 * 1024 * 1024, // 50MB\n}: DocumentUploadProps) {\n  const [files, setFiles] = useState<FileWithPreview[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState<Record<string, number>>({});\n\n  const uploadDocument = useUploadDocument();\n\n  // Custom upload function for user documents\n  const uploadUserDocument = async (file: FileWithPreview, userId: string) => {\n    console.log('Starting upload for:', file.name, 'to user:', userId, 'category:', file.category);\n\n    if (!file.category) {\n      throw new Error('Please select a document category before uploading');\n    }\n\n    // Use the original file object from our wrapper\n    const formData = new FormData();\n    formData.append('file', file.file); // Use the original File object\n    formData.append('category_id', file.category || '');\n    formData.append('document_number', file.documentNumber || '');\n    formData.append('issuing_authority', file.issuingAuthority || '');\n    formData.append('issue_date', file.issueDate || '');\n    formData.append('expiry_date', file.expiryDate || '');\n    formData.append('notes', file.description || '');\n\n    console.log('FormData prepared:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type,\n      categoryId: file.category,\n      notes: file.description || ''\n    });\n\n    console.log('FormData entries:');\n    for (const [key, value] of formData.entries()) {\n      if (value instanceof File) {\n        console.log(`  ${key}: File(name=\"${value.name}\", size=${value.size}, type=\"${value.type}\")`);\n      } else {\n        console.log(`  ${key}: \"${value}\"`);\n      }\n    }\n\n    const response = await fetch(`/api/users/${userId}/documents`, {\n      method: 'POST',\n      body: formData,\n    });\n\n    console.log('Response status:', response.status, response.statusText);\n\n    if (!response.ok) {\n      let errorMessage = 'Failed to upload document';\n      try {\n        const errorText = await response.text();\n        console.log('Error response text:', errorText);\n        if (errorText && errorText.trim()) {\n          try {\n            const error = JSON.parse(errorText);\n            errorMessage = error.error || error.message || errorMessage;\n          } catch (parseError) {\n            // If JSON parsing fails, use the raw text as error message\n            errorMessage = errorText;\n          }\n        }\n      } catch (e) {\n        errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n      }\n      console.error('Upload error:', errorMessage);\n      throw new Error(errorMessage);\n    }\n\n    const result = await response.json();\n    console.log('Upload successful:', result);\n    return result;\n  };\n  // Custom hook to fetch document categories\n  const { data: userDocumentsData } = useQuery({\n    queryKey: ['user-documents-categories', userId],\n    queryFn: async () => {\n      if (!userId) return { categories: [] };\n      const response = await fetch(`/api/users/${userId}/documents`);\n      if (!response.ok) throw new Error('Failed to fetch categories');\n      return response.json();\n    },\n    enabled: !!userId,\n  });\n\n  const categories = userDocumentsData?.categories || [];\n  const classifyDocument = useClassifyDocument();\n\n  const onDrop = useCallback(\n    async (acceptedFiles: File[]) => {\n      console.log('ðŸ“ Ð¤Ð°Ð¹Ð»Ñ‹ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ñ‹:', acceptedFiles.map(f => ({\n        name: f.name,\n        size: f.size,\n        type: f.type\n      })));\n\n      if (files.length + acceptedFiles.length > maxFiles) {\n        toast.error(`Maximum ${maxFiles} files allowed`);\n        return;\n      }\n\n      const newFiles: FileWithPreview[] = acceptedFiles.map((file) => {\n        console.log('ðŸ”§ ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÑŽ Ñ„Ð°Ð¹Ð»:', {\n          name: file.name,\n          size: file.size,\n          type: file.type,\n          constructor: file.constructor.name\n        });\n\n        // Create preview for images\n        const preview = file.type.startsWith(\"image/\")\n          ? URL.createObjectURL(file)\n          : undefined;\n\n        // Create a wrapper object that preserves the original File object\n        const enhancedFile: FileWithPreview = {\n          file, // Store the original File object\n          preview,\n          category: undefined,\n          tags: [],\n          description: \"\",\n          accessLevel: \"project\",\n          documentNumber: \"\",\n          issuingAuthority: \"\",\n          issueDate: \"\",\n          expiryDate: \"\",\n          // Copy File properties for compatibility\n          name: file.name,\n          size: file.size,\n          type: file.type\n        };\n\n        console.log('âœ… Ð¤Ð°Ð¹Ð» Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½:', {\n          name: enhancedFile.name,\n          size: enhancedFile.size,\n          type: enhancedFile.type,\n          hasPreview: !!enhancedFile.preview,\n          originalFile: enhancedFile.file,\n          hasArrayBuffer: typeof enhancedFile.file.arrayBuffer === 'function',\n          hasStream: typeof enhancedFile.file.stream === 'function'\n        });\n\n        return enhancedFile;\n      });\n\n      console.log('ðŸ“‹ Ð”Ð¾Ð±Ð°Ð²Ð»ÑÑŽ Ñ„Ð°Ð¹Ð»Ñ‹ Ð² ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ:', newFiles.length);\n      setFiles((prev) => [...prev, ...newFiles]);\n\n      // Auto-classify documents\n      for (const file of newFiles) {\n        try {\n          const result = await classifyDocument.mutateAsync(file.file);\n\n          setFiles((prev) =>\n            prev.map((f) =>\n              f.name === file.name && f.size === file.size\n                ? {\n                    ...f,\n                    category: result.category_code as DocumentCategoryCode,\n                    tags: [], // No tags returned from this hook\n                  }\n                : f\n            )\n          );\n        } catch (error) {\n          console.error(\"Classification failed for\", file.name, error);\n        }\n      }\n    },\n    [files.length, maxFiles, classifyDocument]\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp'],\n      'application/pdf': ['.pdf'],\n      'application/msword': ['.doc'],\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\n      'application/vnd.ms-excel': ['.xls'],\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'],\n    },\n    maxSize: maxFileSize,\n    multiple: true,\n  });\n\n  const removeFile = (index: number) => {\n    setFiles((prev) => {\n      const file = prev[index];\n      if (file.preview) {\n        URL.revokeObjectURL(file.preview);\n      }\n      return prev.filter((_, i) => i !== index);\n    });\n  };\n\n  const updateFileMetadata = (\n    index: number,\n    field: keyof FileWithPreview,\n    value: any\n  ) => {\n    setFiles((prev) =>\n      prev.map((file, i) =>\n        i === index ? { ...file, [field]: value } : file\n      )\n    );\n  };\n\n  const handleUpload = async () => {\n    if (files.length === 0) {\n      toast.error(\"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸\");\n      return;\n    }\n    if (!userId) {\n      toast.error(\"User ID is required for uploading documents\");\n      return;\n    }\n\n    // Check if all files have categories\n    const filesWithoutCategory = files.filter(file => !file.category);\n    if (filesWithoutCategory.length > 0) {\n      toast.error(\"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ Ð²ÑÐµÑ… Ñ„Ð°Ð¹Ð»Ð¾Ð²\");\n      return;\n    }\n\n    console.log('ðŸ“¤ ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ Ñ„Ð°Ð¹Ð»Ð¾Ð²:', files.map((f, i) => ({\n      name: f.name || `file-${i}`,\n      size: f.size,\n      type: f.type,\n      category: f.category\n    })));\n\n    setUploading(true);\n\n    for (const [index, file] of files.entries()) {\n      // Store original filename before it gets corrupted\n      const originalFileName = file.name || `file-${index}`;\n\n      try {\n        setUploadProgress((prev) => ({ ...prev, [originalFileName]: 0 }));\n\n        // Simulate progress (in real implementation, this would come from upload progress)\n        const progressInterval = setInterval(() => {\n          setUploadProgress((prev) => ({\n            ...prev,\n            [originalFileName]: Math.min(prev[originalFileName] + 10, 90),\n          }));\n        }, 100);\n\n        const document = await uploadUserDocument(file, userId);\n\n        clearInterval(progressInterval);\n        setUploadProgress((prev) => ({ ...prev, [originalFileName]: 100 }));\n\n        onUploadComplete?.(document);\n      } catch (error) {\n        console.error(\"Upload failed for\", originalFileName, error);\n        setUploadProgress((prev) => ({ ...prev, [originalFileName]: -1 }));\n      }\n    }\n\n    setUploading(false);\n    setFiles([]);\n    setUploadProgress({});\n  };\n\n  return (\n    <Card className=\"w-full\">\n      <CardHeader>\n        <CardTitle>Upload Documents</CardTitle>\n        <CardDescription>\n          Drag and drop files or click to select. Maximum {maxFiles} files,{\" \"}\n          {formatFileSize(maxFileSize)} each.\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Drop Zone */}\n        <div\n          {...getRootProps()}\n          className={cn(\n            \"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\",\n            isDragActive\n              ? \"border-primary bg-primary/10\"\n              : \"border-muted-foreground/25 hover:border-primary/50\"\n          )}\n        >\n          <input {...getInputProps()} />\n          <Upload className=\"mx-auto h-12 w-12 text-muted-foreground mb-4\" />\n          {isDragActive ? (\n            <p className=\"text-primary\">Drop the files here...</p>\n          ) : (\n            <div>\n              <p className=\"text-muted-foreground mb-2\">\n                Drag and drop files here, or click to select files\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                Supported: {acceptedFileTypes.join(\", \")}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* File List */}\n        {files.length > 0 && (\n          <div className=\"space-y-4\">\n            <h4 className=\"font-medium\">Files to Upload ({files.length})</h4>\n            {files.map((file, index) => {\n              const FileIconComponent = getFileIcon(file.type);\n              const progress = uploadProgress[file.name] || 0;\n              const isError = progress === -1;\n\n              return (\n                <Card key={`${file.name}-${file.size}`} className=\"p-4\">\n                  <div className=\"flex items-start gap-4\">\n                    {/* File Icon/Preview */}\n                    <div className=\"flex-shrink-0\">\n                      {file.preview ? (\n                        <img\n                          src={file.preview}\n                          alt={file.name}\n                          className=\"w-16 h-16 object-cover rounded\"\n                          onLoad={() => URL.revokeObjectURL(file.preview!)}\n                        />\n                      ) : (\n                        <div className=\"w-16 h-16 bg-muted rounded flex items-center justify-center\">\n                          <FileIconComponent className=\"w-8 h-8 text-muted-foreground\" />\n                        </div>\n                      )}\n                    </div>\n\n                    {/* File Details */}\n                    <div className=\"flex-1 space-y-3\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <p className=\"font-medium truncate max-w-xs\">\n                            {file.name}\n                          </p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {formatFileSize(file.size)}\n                          </p>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => removeFile(index)}\n                          disabled={uploading}\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n\n                      {/* Metadata Form */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                        <div>\n                          <Label htmlFor={`category-${index}`}>Category</Label>\n                          <Select\n                            value={file.category || \"\"}\n                            onValueChange={(value) =>\n                              updateFileMetadata(index, \"category\", value)\n                            }\n                            disabled={uploading}\n                          >\n                            <SelectTrigger>\n                              <SelectValue placeholder=\"Select category\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              {categories?.map((category: any) => (\n                                <SelectItem key={category.id} value={category.id}>\n                                  {category.name_en || category.name_ru || category.code}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n\n                        <div>\n                          <Label htmlFor={`access-${index}`}>Access Level</Label>\n                          <Select\n                            value={file.accessLevel || \"project\"}\n                            onValueChange={(value) =>\n                              updateFileMetadata(index, \"accessLevel\", value)\n                            }\n                            disabled={uploading}\n                          >\n                            <SelectTrigger>\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"public\">Public</SelectItem>\n                              <SelectItem value=\"project\">Project</SelectItem>\n                              <SelectItem value=\"team\">Team</SelectItem>\n                              <SelectItem value=\"private\">Private</SelectItem>\n                              <SelectItem value=\"admin\">Admin Only</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </div>\n\n                        <div>\n                          <Label htmlFor={`document-number-${index}`}>Document Number</Label>\n                          <Input\n                            id={`document-number-${index}`}\n                            placeholder=\"Document number...\"\n                            value={file.documentNumber || \"\"}\n                            onChange={(e) =>\n                              updateFileMetadata(index, \"documentNumber\", e.target.value)\n                            }\n                            disabled={uploading}\n                          />\n                        </div>\n\n                        <div>\n                          <Label htmlFor={`issuing-authority-${index}`}>Issuing Authority</Label>\n                          <Input\n                            id={`issuing-authority-${index}`}\n                            placeholder=\"Issuing authority...\"\n                            value={file.issuingAuthority || \"\"}\n                            onChange={(e) =>\n                              updateFileMetadata(index, \"issuingAuthority\", e.target.value)\n                            }\n                            disabled={uploading}\n                          />\n                        </div>\n\n                        <div>\n                          <Label htmlFor={`issue-date-${index}`}>Issue Date</Label>\n                          <Input\n                            id={`issue-date-${index}`}\n                            type=\"date\"\n                            value={file.issueDate || \"\"}\n                            onChange={(e) =>\n                              updateFileMetadata(index, \"issueDate\", e.target.value)\n                            }\n                            disabled={uploading}\n                          />\n                        </div>\n\n                        <div>\n                          <Label htmlFor={`expiry-date-${index}`}>Expiry Date</Label>\n                          <Input\n                            id={`expiry-date-${index}`}\n                            type=\"date\"\n                            value={file.expiryDate || \"\"}\n                            onChange={(e) =>\n                              updateFileMetadata(index, \"expiryDate\", e.target.value)\n                            }\n                            disabled={uploading}\n                          />\n                        </div>\n                      </div>\n\n                      <div>\n                        <Label htmlFor={`description-${index}`}>Description</Label>\n                        <Textarea\n                          id={`description-${index}`}\n                          placeholder=\"Optional description...\"\n                          value={file.description || \"\"}\n                          onChange={(e) =>\n                            updateFileMetadata(index, \"description\", e.target.value)\n                          }\n                          disabled={uploading}\n                          rows={2}\n                        />\n                      </div>\n\n                      {/* Tags */}\n                      {file.tags && file.tags.length > 0 && (\n                        <div>\n                          <Label>Suggested Tags</Label>\n                          <div className=\"flex flex-wrap gap-1 mt-1\">\n                            {file.tags.map((tag, tagIndex) => (\n                              <Badge key={tagIndex} variant=\"secondary\">\n                                {tag}\n                              </Badge>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Upload Progress */}\n                      {uploading && progress >= 0 && (\n                        <div className=\"space-y-1\">\n                          <div className=\"flex items-center justify-between text-sm\">\n                            <span>Uploading...</span>\n                            <span>{progress}%</span>\n                          </div>\n                          <Progress value={progress} className=\"h-2\" />\n                        </div>\n                      )}\n\n                      {/* Error State */}\n                      {isError && (\n                        <div className=\"flex items-center gap-2 text-destructive text-sm\">\n                          <AlertCircle className=\"w-4 h-4\" />\n                          <span>Upload failed</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </Card>\n              );\n            })}\n\n            {/* Upload Button */}\n            <div className=\"flex justify-end\">\n              <Button\n                onClick={handleUpload}\n                disabled={uploading || files.length === 0}\n                className=\"min-w-32\"\n              >\n                {uploading ? \"Uploading...\" : `Upload ${files.length} Files`}\n              </Button>\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1512, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/components/documents/document-item.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport {\n  FileText,\n  Image,\n  Download,\n  Eye,\n  Edit,\n  Trash2,\n  Share,\n  Clock,\n  User,\n  Lock,\n  Tag,\n  MoreHorizontal,\n  History,\n  FileIcon,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useDocumentActions } from \"@/hooks/use-documents\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport type { Document, DocumentAccessLevel } from \"@/types\";\n\ninterface DocumentItemProps {\n  document: Document;\n  onEdit?: (document: Document) => void;\n  onShare?: (document: Document) => void;\n  onViewVersions?: (document: Document) => void;\n  showActions?: boolean;\n  compact?: boolean;\n}\n\nconst getDocumentIcon = (mimeType: string) => {\n  if (mimeType.startsWith(\"image/\")) return Image;\n  if (mimeType.includes(\"pdf\") || mimeType.includes(\"document\")) return FileText;\n  return FileIcon;\n};\n\nconst getAccessLevelColor = (level: DocumentAccessLevel): string => {\n  const colors = {\n    public: \"bg-green-100 text-green-800\",\n    project: \"bg-blue-100 text-blue-800\",\n    team: \"bg-yellow-100 text-yellow-800\",\n    private: \"bg-purple-100 text-purple-800\",\n    admin: \"bg-red-100 text-red-800\",\n  };\n  return colors[level] || colors.project;\n};\n\nconst formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return \"0 Bytes\";\n  const k = 1024;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n};\n\nexport function DocumentItem({\n  document,\n  onEdit,\n  onShare,\n  onViewVersions,\n  showActions = true,\n  compact = false,\n}: DocumentItemProps) {\n  const [previewOpen, setPreviewOpen] = useState(false);\n  const { download } = useDocumentActions();\n\n  const DocumentIcon = getDocumentIcon(document.mime_type);\n\n  const handleDownload = () => {\n    download({\n      id: document.id,\n      filename: document.original_filename,\n    });\n  };\n\n  const handlePreview = () => {\n    if (document.mime_type.startsWith(\"image/\") || document.mime_type.includes(\"pdf\")) {\n      setPreviewOpen(true);\n    } else {\n      handleDownload();\n    }\n  };\n\n  if (compact) {\n    return (\n      <div className=\"flex items-center gap-3 p-2 hover:bg-muted/50 rounded-lg transition-colors\">\n        <div className=\"flex-shrink-0\">\n          <DocumentIcon className=\"w-6 h-6 text-muted-foreground\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium truncate\">{document.original_filename}</p>\n          <p className=\"text-xs text-muted-foreground\">\n            {formatFileSize(document.size)} â€¢ {formatDistanceToNow(new Date(document.uploaded_at), { addSuffix: true })}\n          </p>\n        </div>\n        {showActions && (\n          <Button variant=\"ghost\" size=\"sm\" onClick={handleDownload}>\n            <Download className=\"w-4 h-4\" />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-muted rounded-lg\">\n                <DocumentIcon className=\"w-6 h-6 text-muted-foreground\" />\n              </div>\n              <div className=\"min-w-0 flex-1\">\n                <CardTitle className=\"text-base truncate\" title={document.original_filename}>\n                  {document.original_filename}\n                </CardTitle>\n                <CardDescription className=\"flex items-center gap-2\">\n                  <span>{formatFileSize(document.size)}</span>\n                  {document.version > 1 && (\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      v{document.version}\n                    </Badge>\n                  )}\n                </CardDescription>\n              </div>\n            </div>\n\n            {showActions && (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"ghost\" size=\"sm\">\n                    <MoreHorizontal className=\"w-4 h-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\">\n                  <DropdownMenuItem onClick={handlePreview}>\n                    <Eye className=\"w-4 h-4 mr-2\" />\n                    Preview\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={handleDownload}>\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    Download\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                  {onEdit && (\n                    <DropdownMenuItem onClick={() => onEdit(document)}>\n                      <Edit className=\"w-4 h-4 mr-2\" />\n                      Edit\n                    </DropdownMenuItem>\n                  )}\n                  {onShare && (\n                    <DropdownMenuItem onClick={() => onShare(document)}>\n                      <Share className=\"w-4 h-4 mr-2\" />\n                      Share\n                    </DropdownMenuItem>\n                  )}\n                  {onViewVersions && (\n                    <DropdownMenuItem onClick={() => onViewVersions(document)}>\n                      <History className=\"w-4 h-4 mr-2\" />\n                      Versions\n                    </DropdownMenuItem>\n                  )}\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem className=\"text-destructive\">\n                    <Trash2 className=\"w-4 h-4 mr-2\" />\n                    Delete\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            )}\n          </div>\n        </CardHeader>\n\n        <CardContent className=\"space-y-4\">\n          {/* Category and Access Level */}\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"secondary\">\n              {document.category?.name?.en || document.category?.code || \"Uncategorized\"}\n            </Badge>\n            <Badge className={cn(\"text-xs\", getAccessLevelColor(document.access_level))}>\n              <Lock className=\"w-3 h-3 mr-1\" />\n              {document.access_level}\n            </Badge>\n          </div>\n\n          {/* Tags */}\n          {document.tags && document.tags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1\">\n              {document.tags.slice(0, 3).map((tag, index) => (\n                <Badge key={index} variant=\"outline\" className=\"text-xs\">\n                  <Tag className=\"w-3 h-3 mr-1\" />\n                  {tag}\n                </Badge>\n              ))}\n              {document.tags.length > 3 && (\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  +{document.tags.length - 3}\n                </Badge>\n              )}\n            </div>\n          )}\n\n          {/* OCR Status */}\n          {document.ocr_data && (\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <FileText className=\"w-4 h-4\" />\n              <span>Text extracted ({document.ocr_data.confidence}% confidence)</span>\n            </div>\n          )}\n\n          {/* Upload Info */}\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <div className=\"flex items-center gap-2\">\n              <User className=\"w-4 h-4\" />\n              <span>\n                {document.uploader?.first_name} {document.uploader?.last_name}\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Clock className=\"w-4 h-4\" />\n              <span>\n                {formatDistanceToNow(new Date(document.uploaded_at), { addSuffix: true })}\n              </span>\n            </div>\n          </div>\n\n          {/* Context Information */}\n          {(document.project || document.house || document.work_entry) && (\n            <div className=\"pt-2 border-t\">\n              <p className=\"text-xs text-muted-foreground mb-1\">Linked to:</p>\n              <div className=\"space-y-1\">\n                {document.project && (\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    Project: {document.project.name}\n                  </Badge>\n                )}\n                {document.house && (\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    House: {document.house.house_number}\n                  </Badge>\n                )}\n                {document.work_entry && (\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    Work Entry: {document.work_entry.stage_code}\n                  </Badge>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          {showActions && (\n            <div className=\"flex gap-2 pt-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handlePreview}\n                className=\"flex-1\"\n              >\n                <Eye className=\"w-4 h-4 mr-2\" />\n                Preview\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleDownload}\n                className=\"flex-1\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                Download\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Preview Dialog */}\n      <Dialog open={previewOpen} onOpenChange={setPreviewOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh]\">\n          <DialogHeader>\n            <DialogTitle>{document.original_filename}</DialogTitle>\n            <DialogDescription>\n              {formatFileSize(document.size)} â€¢ {document.mime_type}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex-1 overflow-auto\">\n            {document.mime_type.startsWith(\"image/\") ? (\n              <img\n                src={document.url}\n                alt={document.original_filename}\n                className=\"max-w-full h-auto mx-auto\"\n              />\n            ) : document.mime_type.includes(\"pdf\") ? (\n              <iframe\n                src={document.url}\n                className=\"w-full h-96\"\n                title={document.original_filename}\n              />\n            ) : (\n              <div className=\"text-center py-8\">\n                <FileIcon className=\"w-16 h-16 mx-auto text-muted-foreground mb-4\" />\n                <p className=\"text-muted-foreground\">\n                  Preview not available for this file type\n                </p>\n                <Button onClick={handleDownload} className=\"mt-4\">\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Download File\n                </Button>\n              </div>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2311, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/components/documents/document-list.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Search, Filter, Grid, List, Upload, FolderOpen } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { DocumentItem } from \"./document-item\";\nimport { DocumentUpload } from \"./document-upload\";\nimport { useDocuments, useDocumentCategories } from \"@/hooks/use-documents\";\nimport type { DocumentFilters, DocumentCategoryCode, DocumentAccessLevel } from \"@/types\";\n\ninterface DocumentListProps {\n  projectId?: string;\n  houseId?: string;\n  workEntryId?: string;\n  teamId?: string;\n  showUpload?: boolean;\n  title?: string;\n  description?: string;\n}\n\nexport function DocumentList({\n  projectId,\n  houseId,\n  workEntryId,\n  teamId,\n  showUpload = true,\n  title = \"Documents\",\n  description,\n}: DocumentListProps) {\n  const [viewMode, setViewMode] = useState<\"grid\" | \"list\">(\"grid\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState<DocumentCategoryCode | \"all\">(\"all\");\n  const [accessLevelFilter, setAccessLevelFilter] = useState<DocumentAccessLevel | \"all\">(\"all\");\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\n\n  // Build filters\n  const filters: DocumentFilters = {\n    project_id: projectId,\n    house_id: houseId,\n    work_entry_id: workEntryId,\n    team_id: teamId,\n    search: searchQuery || undefined,\n    category: categoryFilter !== \"all\" ? categoryFilter : undefined,\n    access_level: accessLevelFilter !== \"all\" ? accessLevelFilter : undefined,\n    page: 1,\n    per_page: 50,\n  };\n\n  const { data: documentsResponse, isLoading, error } = useDocuments(filters);\n  const { data: categories } = useDocumentCategories();\n\n  const documents = documentsResponse?.items || [];\n  const totalDocuments = documentsResponse?.total || 0;\n\n  const handleUploadComplete = () => {\n    setUploadDialogOpen(false);\n  };\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"text-center\">\n            <p className=\"text-destructive\">Failed to load documents</p>\n            <p className=\"text-sm text-muted-foreground mt-1\">{error.message}</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold tracking-tight\">{title}</h2>\n          {description && (\n            <p className=\"text-muted-foreground\">{description}</p>\n          )}\n        </div>\n        {showUpload && (\n          <Dialog open={uploadDialogOpen} onOpenChange={setUploadDialogOpen}>\n            <DialogTrigger asChild>\n              <Button>\n                <Upload className=\"mr-2 h-4 w-4\" />\n                Upload Documents\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>Upload Documents</DialogTitle>\n                <DialogDescription>\n                  Upload and organize your project documents\n                </DialogDescription>\n              </DialogHeader>\n              <DocumentUpload\n                projectId={projectId}\n                houseId={houseId}\n                workEntryId={workEntryId}\n                teamId={teamId}\n                onUploadComplete={handleUploadComplete}\n              />\n            </DialogContent>\n          </Dialog>\n        )}\n      </div>\n\n      {/* Filters and Search */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Filters</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4\">\n            {/* Search */}\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search documents...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n\n            {/* Category Filter */}\n            <Select\n              value={categoryFilter}\n              onValueChange={(value) => setCategoryFilter(value as DocumentCategoryCode | \"all\")}\n            >\n              <SelectTrigger className=\"w-[200px]\">\n                <SelectValue placeholder=\"Category\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Categories</SelectItem>\n                {categories?.map((category) => (\n                  <SelectItem key={category.code} value={category.code}>\n                    {category.name_en || category.name_ru || category.code}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n\n            {/* Access Level Filter */}\n            <Select\n              value={accessLevelFilter}\n              onValueChange={(value) => setAccessLevelFilter(value as DocumentAccessLevel | \"all\")}\n            >\n              <SelectTrigger className=\"w-[150px]\">\n                <SelectValue placeholder=\"Access\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Access</SelectItem>\n                <SelectItem value=\"public\">Public</SelectItem>\n                <SelectItem value=\"project\">Project</SelectItem>\n                <SelectItem value=\"team\">Team</SelectItem>\n                <SelectItem value=\"private\">Private</SelectItem>\n                <SelectItem value=\"admin\">Admin</SelectItem>\n              </SelectContent>\n            </Select>\n\n            {/* View Mode Toggle */}\n            <div className=\"flex border rounded-md\">\n              <Button\n                variant={viewMode === \"grid\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setViewMode(\"grid\")}\n                className=\"rounded-r-none\"\n              >\n                <Grid className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={viewMode === \"list\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setViewMode(\"list\")}\n                className=\"rounded-l-none\"\n              >\n                <List className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Statistics */}\n      <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n        <span>{totalDocuments} documents</span>\n        {searchQuery && <span>â€¢ Searching for \"{searchQuery}\"</span>}\n        {categoryFilter !== \"all\" && (\n          <Badge variant=\"secondary\">\n            {categories?.find(c => c.code === categoryFilter)?.name.en || categoryFilter}\n          </Badge>\n        )}\n        {accessLevelFilter !== \"all\" && (\n          <Badge variant=\"secondary\">{accessLevelFilter} access</Badge>\n        )}\n      </div>\n\n      {/* Document List */}\n      {isLoading ? (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {Array.from({ length: 6 }).map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-4 bg-muted rounded w-3/4\"></div>\n                <div className=\"h-3 bg-muted rounded w-1/2\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-20 bg-muted rounded\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : documents.length === 0 ? (\n        <Card>\n          <CardContent className=\"p-12\">\n            <div className=\"text-center\">\n              <FolderOpen className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-medium mb-2\">No documents found</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                {searchQuery || categoryFilter !== \"all\" || accessLevelFilter !== \"all\"\n                  ? \"Try adjusting your filters or search terms\"\n                  : \"Get started by uploading your first document\"}\n              </p>\n              {showUpload && (\n                <Dialog open={uploadDialogOpen} onOpenChange={setUploadDialogOpen}>\n                  <DialogTrigger asChild>\n                    <Button>\n                      <Upload className=\"mr-2 h-4 w-4\" />\n                      Upload Documents\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n                    <DialogHeader>\n                      <DialogTitle>Upload Documents</DialogTitle>\n                      <DialogDescription>\n                        Upload and organize your project documents\n                      </DialogDescription>\n                    </DialogHeader>\n                    <DocumentUpload\n                      projectId={projectId}\n                      houseId={houseId}\n                      workEntryId={workEntryId}\n                      teamId={teamId}\n                      onUploadComplete={handleUploadComplete}\n                    />\n                  </DialogContent>\n                </Dialog>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <div\n          className={\n            viewMode === \"grid\"\n              ? \"grid gap-4 md:grid-cols-2 lg:grid-cols-3\"\n              : \"space-y-2\"\n          }\n        >\n          {documents.map((document) => (\n            <DocumentItem\n              key={document.id}\n              document={document}\n              compact={viewMode === \"list\"}\n              onEdit={(doc) => {\n                console.log(\"Edit document:\", doc.id);\n                // TODO: Implement edit functionality\n              }}\n              onShare={(doc) => {\n                console.log(\"Share document:\", doc.id);\n                // TODO: Implement share functionality\n              }}\n              onViewVersions={(doc) => {\n                console.log(\"View versions:\", doc.id);\n                // TODO: Implement versions functionality\n              }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Load More / Pagination */}\n      {totalDocuments > documents.length && (\n        <div className=\"text-center pt-4\">\n          <Button variant=\"outline\">\n            Load More Documents\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAOA;AACA;AAQA;AAQA;AACA;AACA;AAhCA;;;;;;;;;;;;;AA6CO,SAAS,aAAa,EAC3B,SAAS,EACT,OAAO,EACP,WAAW,EACX,MAAM,EACN,aAAa,IAAI,EACjB,QAAQ,WAAW,EACnB,WAAW,EACO;IAClB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAkB;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAA+B;IACnF,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAA8B;IACxF,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IAEzD,gBAAgB;IAChB,MAAM,UAA2B;QAC/B,YAAY;QACZ,UAAU;QACV,eAAe;QACf,SAAS;QACT,QAAQ,eAAe;QACvB,UAAU,mBAAmB,QAAQ,iBAAiB;QACtD,cAAc,sBAAsB,QAAQ,oBAAoB;QAChE,MAAM;QACN,UAAU;IACZ;IAEA,MAAM,EAAE,MAAM,iBAAiB,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAA,gJAAY,EAAC;IACnE,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,IAAA,yJAAqB;IAElD,MAAM,YAAY,mBAAmB,SAAS,EAAE;IAChD,MAAM,iBAAiB,mBAAmB,SAAS;IAEnD,MAAM,uBAAuB;QAC3B,oBAAoB;IACtB;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC,wIAAI;sBACH,cAAA,8OAAC,+IAAW;gBAAC,WAAU;0BACrB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAmB;;;;;;sCAChC,8OAAC;4BAAE,WAAU;sCAAsC,MAAM,OAAO;;;;;;;;;;;;;;;;;;;;;;IAK1E;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAqC;;;;;;4BAClD,6BACC,8OAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;oBAGzC,4BACC,8OAAC,4IAAM;wBAAC,MAAM;wBAAkB,cAAc;;0CAC5C,8OAAC,mJAAa;gCAAC,OAAO;0CACpB,cAAA,8OAAC,4IAAM;;sDACL,8OAAC,gNAAM;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;0CAIvC,8OAAC,mJAAa;gCAAC,WAAU;;kDACvB,8OAAC,kJAAY;;0DACX,8OAAC,iJAAW;0DAAC;;;;;;0DACb,8OAAC,uJAAiB;0DAAC;;;;;;;;;;;;kDAIrB,8OAAC,uKAAc;wCACb,WAAW;wCACX,SAAS;wCACT,aAAa;wCACb,QAAQ;wCACR,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;0BAQ5B,8OAAC,wIAAI;;kCACH,8OAAC,8IAAU;kCACT,cAAA,8OAAC,6IAAS;4BAAC,WAAU;sCAAU;;;;;;;;;;;kCAEjC,8OAAC,+IAAW;kCACV,cAAA,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,gNAAM;gDAAC,WAAU;;;;;;0DAClB,8OAAC,0IAAK;gDACJ,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,WAAU;;;;;;;;;;;;;;;;;8CAMhB,8OAAC,4IAAM;oCACL,OAAO;oCACP,eAAe,CAAC,QAAU,kBAAkB;;sDAE5C,8OAAC,mJAAa;4CAAC,WAAU;sDACvB,cAAA,8OAAC,iJAAW;gDAAC,aAAY;;;;;;;;;;;sDAE3B,8OAAC,mJAAa;;8DACZ,8OAAC,gJAAU;oDAAC,OAAM;8DAAM;;;;;;gDACvB,YAAY,IAAI,CAAC,yBAChB,8OAAC,gJAAU;wDAAqB,OAAO,SAAS,IAAI;kEACjD,SAAS,OAAO,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI;uDADvC,SAAS,IAAI;;;;;;;;;;;;;;;;;8CAQpC,8OAAC,4IAAM;oCACL,OAAO;oCACP,eAAe,CAAC,QAAU,qBAAqB;;sDAE/C,8OAAC,mJAAa;4CAAC,WAAU;sDACvB,cAAA,8OAAC,iJAAW;gDAAC,aAAY;;;;;;;;;;;sDAE3B,8OAAC,mJAAa;;8DACZ,8OAAC,gJAAU;oDAAC,OAAM;8DAAM;;;;;;8DACxB,8OAAC,gJAAU;oDAAC,OAAM;8DAAS;;;;;;8DAC3B,8OAAC,gJAAU;oDAAC,OAAM;8DAAU;;;;;;8DAC5B,8OAAC,gJAAU;oDAAC,OAAM;8DAAO;;;;;;8DACzB,8OAAC,gJAAU;oDAAC,OAAM;8DAAU;;;;;;8DAC5B,8OAAC,gJAAU;oDAAC,OAAM;8DAAQ;;;;;;;;;;;;;;;;;;8CAK9B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,4IAAM;4CACL,SAAS,aAAa,SAAS,YAAY;4CAC3C,MAAK;4CACL,SAAS,IAAM,YAAY;4CAC3B,WAAU;sDAEV,cAAA,8OAAC,iNAAI;gDAAC,WAAU;;;;;;;;;;;sDAElB,8OAAC,4IAAM;4CACL,SAAS,aAAa,SAAS,YAAY;4CAC3C,MAAK;4CACL,SAAS,IAAM,YAAY;4CAC3B,WAAU;sDAEV,cAAA,8OAAC,0MAAI;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ1B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;4BAAM;4BAAe;;;;;;;oBACrB,6BAAe,8OAAC;;4BAAK;4BAAkB;4BAAY;;;;;;;oBACnD,mBAAmB,uBAClB,8OAAC,0IAAK;wBAAC,SAAQ;kCACZ,YAAY,KAAK,CAAA,IAAK,EAAE,IAAI,KAAK,iBAAiB,KAAK,MAAM;;;;;;oBAGjE,sBAAsB,uBACrB,8OAAC,0IAAK;wBAAC,SAAQ;;4BAAa;4BAAkB;;;;;;;;;;;;;YAKjD,0BACC,8OAAC;gBAAI,WAAU;0BACZ,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBACjC,8OAAC,wIAAI;wBAAS,WAAU;;0CACtB,8OAAC,8IAAU;;kDACT,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;0CAEjB,8OAAC,+IAAW;0CACV,cAAA,8OAAC;oCAAI,WAAU;;;;;;;;;;;;uBANR;;;;;;;;;uBAWb,UAAU,MAAM,KAAK,kBACvB,8OAAC,wIAAI;0BACH,cAAA,8OAAC,+IAAW;oBAAC,WAAU;8BACrB,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,gOAAU;gCAAC,WAAU;;;;;;0CACtB,8OAAC;gCAAG,WAAU;0CAA2B;;;;;;0CACzC,8OAAC;gCAAE,WAAU;0CACV,eAAe,mBAAmB,SAAS,sBAAsB,QAC9D,+CACA;;;;;;4BAEL,4BACC,8OAAC,4IAAM;gCAAC,MAAM;gCAAkB,cAAc;;kDAC5C,8OAAC,mJAAa;wCAAC,OAAO;kDACpB,cAAA,8OAAC,4IAAM;;8DACL,8OAAC,gNAAM;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;;;;;kDAIvC,8OAAC,mJAAa;wCAAC,WAAU;;0DACvB,8OAAC,kJAAY;;kEACX,8OAAC,iJAAW;kEAAC;;;;;;kEACb,8OAAC,uJAAiB;kEAAC;;;;;;;;;;;;0DAIrB,8OAAC,uKAAc;gDACb,WAAW;gDACX,SAAS;gDACT,aAAa;gDACb,QAAQ;gDACR,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qCAShC,8OAAC;gBACC,WACE,aAAa,SACT,6CACA;0BAGL,UAAU,GAAG,CAAC,CAAC,yBACd,8OAAC,mKAAY;wBAEX,UAAU;wBACV,SAAS,aAAa;wBACtB,QAAQ,CAAC;4BACP,QAAQ,GAAG,CAAC,kBAAkB,IAAI,EAAE;wBACpC,qCAAqC;wBACvC;wBACA,SAAS,CAAC;4BACR,QAAQ,GAAG,CAAC,mBAAmB,IAAI,EAAE;wBACrC,sCAAsC;wBACxC;wBACA,gBAAgB,CAAC;4BACf,QAAQ,GAAG,CAAC,kBAAkB,IAAI,EAAE;wBACpC,yCAAyC;wBAC3C;uBAdK,SAAS,EAAE;;;;;;;;;;YAqBvB,iBAAiB,UAAU,MAAM,kBAChC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,4IAAM;oBAAC,SAAQ;8BAAU;;;;;;;;;;;;;;;;;AAOpC","debugId":null}},
    {"offset": {"line": 3034, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/components/documents/index.ts"],"sourcesContent":["export { DocumentUpload } from \"./document-upload\";\nexport { DocumentItem } from \"./document-item\";\nexport { DocumentList } from \"./document-list\";"],"names":[],"mappings":";AAAA;AACA;AACA","debugId":null}},
    {"offset": {"line": 3045, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/T7/cometa/cometa-separated-projects/cometa-frontend-nextjs/src/app/%28dashboard%29/dashboard/documents/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport {\n  FileText,\n  Upload,\n  Search,\n  Filter,\n  Folder,\n  Tags,\n  Users,\n  BarChart3,\n  Settings,\n  Archive,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { DocumentList, DocumentUpload } from \"@/components/documents\";\nimport {\n  useDocuments,\n  useDocumentCategories,\n  useSearchDocuments,\n} from \"@/hooks/use-documents\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport type { DocumentSearchRequest } from \"@/types\";\n\nexport default function DocumentsPage() {\n  const [activeTab, setActiveTab] = useState(\"all\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\n  const { user } = useAuth();\n\n  // Get document statistics\n  const { data: allDocuments } = useDocuments({ page: 1, per_page: 1 });\n  const { data: myDocuments } = useDocuments({\n    uploaded_by: user?.id,\n    page: 1,\n    per_page: 1,\n  });\n  const { data: recentDocuments } = useDocuments({\n    uploaded_after: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n    page: 1,\n    per_page: 1,\n  });\n  const { data: categories } = useDocumentCategories();\n\n  const searchDocuments = useSearchDocuments();\n\n  const handleSearch = async (query: string) => {\n    if (!query.trim()) return;\n\n    const searchRequest: DocumentSearchRequest = {\n      query,\n      include_content: true,\n      highlight: true,\n      fuzzy: true,\n    };\n\n    try {\n      const results = await searchDocuments.mutateAsync(searchRequest);\n      console.log(\"Search results:\", results);\n      // TODO: Handle search results display\n    } catch (error) {\n      console.error(\"Search failed:\", error);\n    }\n  };\n\n  const getTabFilters = () => {\n    switch (activeTab) {\n      case \"my\":\n        return { uploaded_by: user?.id };\n      case \"recent\":\n        return {\n          uploaded_after: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n        };\n      case \"shared\":\n        return { access_level: \"public\" as const };\n      default:\n        return {};\n    }\n  };\n\n  return (\n    <div className=\"flex-1 space-y-4 p-4 md:p-8 pt-6\">\n      <div className=\"flex items-center justify-between space-y-2\">\n        <div>\n          <h2 className=\"text-3xl font-bold tracking-tight\">Documents</h2>\n          <p className=\"text-muted-foreground\">\n            Manage your project files and documents\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Dialog open={uploadDialogOpen} onOpenChange={setUploadDialogOpen}>\n            <DialogTrigger asChild>\n              <Button>\n                <Upload className=\"mr-2 h-4 w-4\" />\n                Upload Documents\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>Upload Documents</DialogTitle>\n                <DialogDescription>\n                  Upload and organize your project documents\n                </DialogDescription>\n              </DialogHeader>\n              <DocumentUpload\n                onUploadComplete={() => setUploadDialogOpen(false)}\n              />\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      {/* Statistics Cards */}\n      <div className=\"grid gap-4 md:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Documents</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{allDocuments?.total || 0}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Across all projects\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">My Documents</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{myDocuments?.total || 0}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Uploaded by you\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Recent Documents</CardTitle>\n            <Archive className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{recentDocuments?.total || 0}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Last 7 days\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Categories</CardTitle>\n            <Tags className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{categories?.length || 0}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Document types\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Global Search */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Document Search</CardTitle>\n          <CardDescription>\n            Search across all documents including their content\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex gap-2\">\n            <div className=\"flex-1\">\n              <Input\n                placeholder=\"Search documents and content...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    handleSearch(searchQuery);\n                  }\n                }}\n              />\n            </div>\n            <Button\n              onClick={() => handleSearch(searchQuery)}\n              disabled={!searchQuery.trim() || searchDocuments.isPending}\n            >\n              <Search className=\"h-4 w-4 mr-2\" />\n              {searchDocuments.isPending ? \"Searching...\" : \"Search\"}\n            </Button>\n          </div>\n          {searchDocuments.data && (\n            <div className=\"mt-4\">\n              <p className=\"text-sm text-muted-foreground mb-2\">\n                Found {searchDocuments.data.total} results\n              </p>\n              {/* TODO: Display search results */}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Document Tabs */}\n      <Card>\n        <CardHeader>\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"all\">\n                All Documents\n                {allDocuments?.total && (\n                  <Badge variant=\"secondary\" className=\"ml-1 h-4 text-xs\">\n                    {allDocuments.total}\n                  </Badge>\n                )}\n              </TabsTrigger>\n              <TabsTrigger value=\"my\">\n                My Documents\n                {myDocuments?.total && (\n                  <Badge variant=\"secondary\" className=\"ml-1 h-4 text-xs\">\n                    {myDocuments.total}\n                  </Badge>\n                )}\n              </TabsTrigger>\n              <TabsTrigger value=\"recent\">\n                Recent\n                {recentDocuments?.total && (\n                  <Badge variant=\"secondary\" className=\"ml-1 h-4 text-xs\">\n                    {recentDocuments.total}\n                  </Badge>\n                )}\n              </TabsTrigger>\n              <TabsTrigger value=\"shared\">Shared</TabsTrigger>\n            </TabsList>\n          </Tabs>\n        </CardHeader>\n        <CardContent>\n          <DocumentList\n            key={activeTab} // Force remount when tab changes\n            {...getTabFilters()}\n            showUpload={false}\n            title=\"\"\n            description=\"\"\n          />\n        </CardContent>\n      </Card>\n\n      {/* Quick Actions */}\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card className=\"cursor-pointer hover:bg-muted/50 transition-colors\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Folder className=\"h-5 w-5\" />\n              Browse by Category\n            </CardTitle>\n            <CardDescription>\n              Explore documents organized by type and category\n            </CardDescription>\n          </CardHeader>\n        </Card>\n\n        <Card className=\"cursor-pointer hover:bg-muted/50 transition-colors\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BarChart3 className=\"h-5 w-5\" />\n              Document Analytics\n            </CardTitle>\n            <CardDescription>\n              View storage usage and document statistics\n            </CardDescription>\n          </CardHeader>\n        </Card>\n\n        <Card className=\"cursor-pointer hover:bg-muted/50 transition-colors\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Settings className=\"h-5 w-5\" />\n              Document Settings\n            </CardTitle>\n            <CardDescription>\n              Manage categories, access controls, and preferences\n            </CardDescription>\n          </CardHeader>\n        </Card>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}