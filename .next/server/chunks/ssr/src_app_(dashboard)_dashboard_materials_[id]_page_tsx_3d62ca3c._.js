module.exports=[7833,a=>{"use strict";a.s(["default",()=>B]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(24569),g=a.i(81560),h=a.i(83497),i=a.i(73570),j=a.i(24669),k=a.i(94101),l=a.i(14548),m=a.i(33508),n=a.i(91965),o=a.i(10227),p=a.i(67900),q=a.i(99570),r=a.i(66718),s=a.i(70430),t=a.i(29246),u=a.i(91119),v=a.i(86304),w=a.i(75083),x=a.i(80701),y=a.i(86192),z=a.i(7671),A=a.i(23292);function B(){let a=(0,d.useParams)(),B=(0,d.useRouter)(),C=a.id,[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)({name:"",description:"",unit:"",sku:"",default_price_eur:0,purchase_price_eur:0,min_stock_level:0}),{data:J,isLoading:K,error:L}=(0,z.useMaterial)(C),M=(0,z.useUpdateMaterial)(),N=(0,z.useDeleteMaterial)();c.default.useEffect(()=>{J&&!D&&I({name:J.name||"",description:J.description||"",unit:J.unit||"",sku:J.sku||"",default_price_eur:J.default_price_eur||0,purchase_price_eur:J.purchase_price_eur||0,min_stock_level:J.min_stock_level||0})},[J,D]);let O=async()=>{try{await M.mutateAsync({id:C,data:H}),E(!1),A.toast.success("Material updated successfully")}catch(a){A.toast.error("Failed to update material")}},P=async()=>{try{await N.mutateAsync(C),A.toast.success("Material deleted successfully"),B.push("/dashboard/materials")}catch(a){A.toast.error("Failed to delete material")}};if(K)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded mb-4"}),(0,b.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})});if(L||!J)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(i.AlertTriangle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Material Not Found"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"The material you're looking for doesn't exist."}),(0,b.jsxs)(q.Button,{onClick:()=>B.push("/dashboard/materials"),children:[(0,b.jsx)(e.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Materials"]})]})});let Q=(()=>{if(!J)return{status:"unknown",color:"gray"};let{available_qty:a,min_stock_level:b}=J;return a<=0?{status:"Out of Stock",color:"red"}:a<=b?{status:"Low Stock",color:"yellow"}:{status:"In Stock",color:"green"}})();return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(q.Button,{variant:"ghost",onClick:()=>B.push("/dashboard/materials"),children:[(0,b.jsx)(e.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:D?(0,b.jsx)(r.Input,{value:H.name,onChange:a=>I({...H,name:a.target.value}),className:"text-2xl font-bold"}):J.name}),(0,b.jsx)("p",{className:"text-gray-600",children:"Material Details"})]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:D?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(q.Button,{variant:"outline",onClick:()=>{E(!1),J&&I({name:J.name||"",description:J.description||"",unit:J.unit||"",sku:J.sku||"",default_price_eur:J.default_price_eur||0,purchase_price_eur:J.purchase_price_eur||0,min_stock_level:J.min_stock_level||0})},children:[(0,b.jsx)(m.X,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,b.jsxs)(q.Button,{onClick:O,disabled:M.isPending,children:[(0,b.jsx)(l.Save,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(q.Button,{variant:"outline",onClick:()=>{J&&(I({name:J.name||"",description:J.description||"",unit:J.unit||"",sku:J.sku||"",default_price_eur:J.default_price_eur||0,purchase_price_eur:J.purchase_price_eur||0,min_stock_level:J.min_stock_level||0}),E(!0))},children:[(0,b.jsx)(f.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,b.jsxs)(q.Button,{variant:"destructive",onClick:()=>G(!0),children:[(0,b.jsx)(g.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Current Stock"}),(0,b.jsx)(h.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(u.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[J.current_stock_qty," ",J.unit]}),(0,b.jsx)(v.Badge,{variant:"green"===Q.color?"default":"yellow"===Q.color?"secondary":"destructive",children:Q.status})]})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Available"}),(0,b.jsx)(j.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(u.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[J.available_qty," ",J.unit]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[J.reserved_qty," reserved"]})]})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Unit Price"}),(0,b.jsx)(k.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(u.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["€",J.default_price_eur.toFixed(2)]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Purchase: €",J.purchase_price_eur.toFixed(2)]})]})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Category"}),(0,b.jsx)(p.Building2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(u.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:J.category}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["SKU: ",J.sku||"N/A"]})]})]})]}),(0,b.jsxs)(w.Tabs,{defaultValue:"details",className:"space-y-4",children:[(0,b.jsxs)(w.TabsList,{children:[(0,b.jsx)(w.TabsTrigger,{value:"details",children:"Details"}),(0,b.jsx)(w.TabsTrigger,{value:"history",children:"History"}),(0,b.jsx)(w.TabsTrigger,{value:"allocations",children:"Allocations"})]}),(0,b.jsx)(w.TabsContent,{value:"details",className:"space-y-4",children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Material Information"}),(0,b.jsx)(u.CardDescription,{children:"Basic information about this material"})]}),(0,b.jsxs)(u.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"name",children:"Name"}),D?(0,b.jsx)(r.Input,{id:"name",value:H.name,onChange:a=>I({...H,name:a.target.value})}):(0,b.jsx)("p",{className:"text-sm text-gray-900",children:J.name})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"sku",children:"SKU"}),D?(0,b.jsx)(r.Input,{id:"sku",value:H.sku,onChange:a=>I({...H,sku:a.target.value})}):(0,b.jsx)("p",{className:"text-sm text-gray-900",children:J.sku||"N/A"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"unit",children:"Unit"}),D?(0,b.jsxs)(x.Select,{value:H.unit,onValueChange:a=>I({...H,unit:a}),children:[(0,b.jsx)(x.SelectTrigger,{children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"piece",children:"Piece"}),(0,b.jsx)(x.SelectItem,{value:"meter",children:"Meter"}),(0,b.jsx)(x.SelectItem,{value:"kg",children:"Kilogram"}),(0,b.jsx)(x.SelectItem,{value:"liter",children:"Liter"}),(0,b.jsx)(x.SelectItem,{value:"box",children:"Box"}),(0,b.jsx)(x.SelectItem,{value:"roll",children:"Roll"})]})]}):(0,b.jsx)("p",{className:"text-sm text-gray-900",children:J.unit})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"category",children:"Category"}),(0,b.jsx)("p",{className:"text-sm text-gray-900",children:J.category})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"default_price",children:"Default Price (EUR)"}),D?(0,b.jsx)(r.Input,{id:"default_price",type:"number",step:"0.01",value:H.default_price_eur,onChange:a=>I({...H,default_price_eur:parseFloat(a.target.value)||0})}):(0,b.jsxs)("p",{className:"text-sm text-gray-900",children:["€",J.default_price_eur.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"purchase_price",children:"Purchase Price (EUR)"}),D?(0,b.jsx)(r.Input,{id:"purchase_price",type:"number",step:"0.01",value:H.purchase_price_eur,onChange:a=>I({...H,purchase_price_eur:parseFloat(a.target.value)||0})}):(0,b.jsxs)("p",{className:"text-sm text-gray-900",children:["€",J.purchase_price_eur.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"min_stock",children:"Minimum Stock Level"}),D?(0,b.jsx)(r.Input,{id:"min_stock",type:"number",value:H.min_stock_level,onChange:a=>I({...H,min_stock_level:parseInt(a.target.value)||0})}):(0,b.jsxs)("p",{className:"text-sm text-gray-900",children:[J.min_stock_level," ",J.unit]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"storage",children:"Storage Location"}),(0,b.jsx)("p",{className:"text-sm text-gray-900",children:J.storage_location||"Main Warehouse"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"description",children:"Description"}),D?(0,b.jsx)(t.Textarea,{id:"description",value:H.description,onChange:a=>I({...H,description:a.target.value}),rows:3}):(0,b.jsx)("p",{className:"text-sm text-gray-900",children:J.description||"No description available"})]})]})]})}),(0,b.jsx)(w.TabsContent,{value:"history",className:"space-y-4",children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Stock Movement History"}),(0,b.jsx)(u.CardDescription,{children:"Recent stock movements for this material"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(n.History,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Stock movement history will be implemented with inventory tracking"})]})})]})}),(0,b.jsx)(w.TabsContent,{value:"allocations",className:"space-y-4",children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Current Allocations"}),(0,b.jsx)(u.CardDescription,{children:"Materials currently allocated to projects"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(o.Truck,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Material allocations will be loaded from the database"})]})})]})})]}),(0,b.jsx)(y.AlertDialog,{open:F,onOpenChange:G,children:(0,b.jsxs)(y.AlertDialogContent,{children:[(0,b.jsxs)(y.AlertDialogHeader,{children:[(0,b.jsx)(y.AlertDialogTitle,{children:"Delete Material"}),(0,b.jsxs)(y.AlertDialogDescription,{children:['Are you sure you want to delete "',J.name,'"? This action cannot be undone. This will also remove all associated warehouse entries.']})]}),(0,b.jsxs)(y.AlertDialogFooter,{children:[(0,b.jsx)(y.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(y.AlertDialogAction,{onClick:P,className:"bg-red-600 hover:bg-red-700",disabled:N.isPending,children:N.isPending?"Deleting...":"Delete"})]})]})})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_materials_%5Bid%5D_page_tsx_3d62ca3c._.js.map