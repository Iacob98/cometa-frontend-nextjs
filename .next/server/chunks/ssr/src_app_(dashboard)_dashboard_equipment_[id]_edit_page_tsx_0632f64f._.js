module.exports=[10105,a=>{"use strict";a.s(["default",()=>z]);var b=a.i(87924),c=a.i(59501),d=a.i(95245),e=a.i(56757),f=a.i(72131),g=a.i(50944),h=a.i(210),i=a.i(14548),j=a.i(96221),k=a.i(94101),l=a.i(79808),m=a.i(23292),n=a.i(99570),o=a.i(41921),p=a.i(66718),q=a.i(80701),r=a.i(91119),s=a.i(5084),t=a.i(75083),u=a.i(15055),v=a.i(33140);let w=e.z.object({name:e.z.string().min(2,{message:"Equipment name must be at least 2 characters."}).max(100,{message:"Equipment name must not exceed 100 characters."}),type:e.z.enum(["machine","tool","measuring_device"]),inventory_no:e.z.string().optional(),owned:e.z.boolean().default(!0),status:e.z.enum(["available","in_use","maintenance","broken"]).default("available"),purchase_price_eur:e.z.string().optional().transform(a=>a?parseFloat(a):void 0),rental_price_per_day_eur:e.z.string().optional().transform(a=>a?parseFloat(a):void 0),rental_price_per_hour_eur:e.z.string().optional().transform(a=>a?parseFloat(a):void 0),current_location:e.z.string().optional()}),x=[{value:"machine",label:"Machine",icon:(0,b.jsx)(l.Wrench,{className:"h-4 w-4"})},{value:"tool",label:"Tool",icon:(0,b.jsx)(l.Wrench,{className:"h-4 w-4"})},{value:"measuring_device",label:"Measuring Device",icon:(0,b.jsx)(l.Wrench,{className:"h-4 w-4"})}],y=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Under Maintenance"},{value:"broken",label:"Broken/Out of Service"}];function z(){let a=(0,g.useRouter)(),e=(0,g.useParams)().id,[z,A]=(0,f.useState)(!0),[B,C]=(0,f.useState)(!1),[D,E]=(0,f.useState)(null),F=(0,d.useForm)({resolver:(0,c.zodResolver)(w),defaultValues:{name:"",type:"tool",inventory_no:"",owned:!0,status:"available",current_location:""}});async function G(b){console.log("ðŸ”§ Submitting equipment update:",b),C(!0);try{let c={name:b.name,type:b.type,inventory_no:b.inventory_no||void 0,owned:b.owned,status:b.status,purchase_price_eur:b.purchase_price_eur,rental_price_per_day_eur:b.rental_price_per_day_eur,rental_price_per_hour_eur:b.rental_price_per_hour_eur,current_location:b.current_location||void 0};console.log("ðŸ”§ Sending equipment data to API:",c);let d=await fetch(`/api/equipment/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(console.log("ðŸ”§ Update response status:",d.status),!d.ok){let a=await d.text();console.error("ðŸ”§ Update API error response:",a);let b="Failed to update equipment";try{b=JSON.parse(a).error||b}catch(c){b=`Server error (${d.status}): ${a}`}throw Error(b)}let f=await d.json();console.log("ðŸ”§ Equipment updated successfully:",f),m.toast.success("Equipment updated successfully!"),a.push("/dashboard/equipment")}catch(a){console.error("ðŸ”§ Equipment update error:",a),m.toast.error(a instanceof Error?a.message:"Failed to update equipment")}finally{C(!1)}}return((0,f.useEffect)(()=>{!async function(){if(!e){console.error("No equipmentId provided to edit page"),m.toast.error("No equipment ID provided"),a.push("/dashboard/equipment");return}console.log("ðŸ”§ Loading equipment with ID:",e),A(!0);try{let a=await fetch(`/api/equipment/${e}`);if(console.log("ðŸ”§ API response status:",a.status),!a.ok){let b=await a.text();if(console.error("ðŸ”§ API error response:",b),404===a.status)throw Error("Equipment not found");if(500===a.status)throw Error("Server error while loading equipment");throw Error(`Failed to load equipment (${a.status})`)}let b=await a.json();console.log("ðŸ”§ Loaded equipment data:",b),E(b),F.reset({name:b.name||"",type:b.type||"tool",inventory_no:b.inventory_no||"",owned:b.owned??!0,status:b.status||"available",purchase_price_eur:b.purchase_price_eur?.toString()||"",rental_price_per_day_eur:b.rental_price_per_day_eur?.toString()||"",rental_price_per_hour_eur:b.rental_price_per_hour_eur?.toString()||"",current_location:b.current_location||""}),console.log("ðŸ”§ Form populated successfully")}catch(c){console.error("ðŸ”§ Failed to load equipment:",c);let b=c instanceof Error?c.message:"Failed to load equipment data";m.toast.error(b),a.push("/dashboard/equipment")}finally{A(!1)}}()},[e,F,a]),z)?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(n.Button,{variant:"ghost",size:"sm",onClick:()=>a.back(),className:"flex items-center",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(v.Skeleton,{className:"h-8 w-64 mb-2"}),(0,b.jsx)(v.Skeleton,{className:"h-4 w-96"})]})]})}),(0,b.jsx)(s.Separator,{}),(0,b.jsxs)("div",{className:"max-w-4xl space-y-6",children:[(0,b.jsx)(v.Skeleton,{className:"h-10 w-full"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:6}).map((a,c)=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(v.Skeleton,{className:"h-10 w-full"})]},c))})]})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(n.Button,{variant:"ghost",size:"sm",onClick:()=>a.back(),className:"flex items-center",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Equipment"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Update information for ",D?.name||"this equipment"]})]})]})}),(0,b.jsx)(s.Separator,{}),(0,b.jsx)("div",{className:"max-w-4xl",children:(0,b.jsx)(o.Form,{...F,children:(0,b.jsxs)("form",{onSubmit:F.handleSubmit(G),className:"space-y-8",children:[(0,b.jsxs)(t.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,b.jsxs)(t.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(t.TabsTrigger,{value:"basic",children:"Basic Information"}),(0,b.jsx)(t.TabsTrigger,{value:"financial",children:"Financial Details"})]}),(0,b.jsx)(t.TabsContent,{value:"basic",className:"space-y-6",children:(0,b.jsxs)(r.Card,{children:[(0,b.jsxs)(r.CardHeader,{children:[(0,b.jsxs)(r.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(l.Wrench,{className:"h-5 w-5 mr-2"}),"Equipment Details"]}),(0,b.jsx)(r.CardDescription,{children:"Update the basic information about the equipment"})]}),(0,b.jsx)(r.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(o.FormField,{control:F.control,name:"name",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Equipment Name *"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(p.Input,{placeholder:"e.g. Hydraulic Excavator CAT 320",...a})}),(0,b.jsx)(o.FormDescription,{children:"A descriptive name for the equipment"}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:F.control,name:"type",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Equipment Type *"}),(0,b.jsxs)(q.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(q.SelectTrigger,{children:(0,b.jsx)(q.SelectValue,{placeholder:"Select equipment type"})})}),(0,b.jsx)(q.SelectContent,{children:x.map(a=>(0,b.jsx)(q.SelectItem,{value:a.value,children:(0,b.jsxs)("div",{className:"flex items-center",children:[a.icon,(0,b.jsx)("span",{className:"ml-2",children:a.label})]})},a.value))})]}),(0,b.jsx)(o.FormDescription,{children:"Select the type of equipment"}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:F.control,name:"inventory_no",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Inventory Number"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(p.Input,{placeholder:"e.g. EQ-001, TOOL-123",...a})}),(0,b.jsx)(o.FormDescription,{children:"Unique identifier for tracking"}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:F.control,name:"status",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Status"}),(0,b.jsxs)(q.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(q.SelectTrigger,{children:(0,b.jsx)(q.SelectValue,{placeholder:"Select status"})})}),(0,b.jsx)(q.SelectContent,{children:y.map(a=>(0,b.jsx)(q.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(o.FormDescription,{children:"Current operational status"}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:F.control,name:"current_location",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Current Location"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(p.Input,{placeholder:"e.g. Warehouse A, Site B",...a})}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:F.control,name:"owned",render:({field:a})=>(0,b.jsxs)(o.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(u.Checkbox,{checked:a.value,onCheckedChange:a.onChange})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(o.FormLabel,{children:"Company Owned Equipment"}),(0,b.jsx)(o.FormDescription,{children:"Check if this equipment is owned by the company (vs. rented)"})]}),(0,b.jsx)(o.FormMessage,{})]})})]})})]})}),(0,b.jsx)(t.TabsContent,{value:"financial",className:"space-y-6",children:(0,b.jsxs)(r.Card,{children:[(0,b.jsxs)(r.CardHeader,{children:[(0,b.jsxs)(r.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(k.DollarSign,{className:"h-5 w-5 mr-2"}),"Financial Information"]}),(0,b.jsx)(r.CardDescription,{children:"Update purchase cost and rental rates for the equipment"})]}),(0,b.jsx)(r.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(o.FormField,{control:F.control,name:"purchase_price_eur",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Purchase Price (â‚¬)"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(p.Input,{type:"number",step:"0.01",placeholder:"0.00",...a})}),(0,b.jsx)(o.FormDescription,{children:"Original purchase cost in euros"}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)("div",{}),(0,b.jsx)(o.FormField,{control:F.control,name:"rental_price_per_day_eur",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Daily Rental Rate (â‚¬)"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(p.Input,{type:"number",step:"0.01",placeholder:"0.00",...a})}),(0,b.jsx)(o.FormDescription,{children:"Rate charged per day when renting to projects"}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:F.control,name:"rental_price_per_hour_eur",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Hourly Rental Rate (â‚¬)"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(p.Input,{type:"number",step:"0.01",placeholder:"0.00",...a})}),(0,b.jsx)(o.FormDescription,{children:"Rate charged per hour when renting to projects"}),(0,b.jsx)(o.FormMessage,{})]})})]})})]})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6",children:[(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:B,children:"Cancel"}),(0,b.jsx)(n.Button,{type:"submit",disabled:B,children:B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Save,{className:"h-4 w-4 mr-2"}),"Update Equipment"]})})]})]})})})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_equipment_%5Bid%5D_edit_page_tsx_0632f64f._.js.map