module.exports=[9333,a=>{"use strict";a.s(["default",()=>t]);var b=a.i(87924),c=a.i(50944),d=a.i(95245),e=a.i(59501),f=a.i(56757),g=a.i(30769),h=a.i(210),i=a.i(14548),j=a.i(67900),k=a.i(73570),l=a.i(99570),m=a.i(91119),n=a.i(41921),o=a.i(66718),p=a.i(80701),q=a.i(86456),r=a.i(47507);let s=f.z.object({name:f.z.string().min(1,"Project name is required").max(255,"Project name too long"),customer:f.z.string().optional(),city:f.z.string().optional(),address:f.z.string().optional(),contact_24h:f.z.string().optional(),start_date:f.z.string().optional(),end_date_plan:f.z.string().optional(),total_length_m:f.z.coerce.number().min(0,"Length must be positive"),base_rate_per_m:f.z.coerce.number().min(0,"Rate must be positive"),language_default:f.z.enum(["ru","en","de","uz","tr"]),status:f.z.enum(["draft","active","waiting_invoice","closed"])});function t(){let a=(0,c.useParams)(),f=(0,c.useRouter)(),{canManageProjects:t}=(0,r.usePermissions)(),u=(0,q.useUpdateProject)(),v=a.id,{data:w,isLoading:x,error:y}=(0,q.useProject)(v),z=(0,d.useForm)({resolver:(0,e.zodResolver)(s),defaultValues:{name:"",customer:"",city:"",address:"",contact_24h:"",start_date:"",end_date_plan:"",total_length_m:0,base_rate_per_m:15.5,language_default:"de",status:"draft"}});w&&!z.formState.isDirty&&z.reset({name:w.name,customer:w.customer||"",city:w.city||"",address:w.address||"",contact_24h:w.contact_24h||"",start_date:w.start_date?new Date(w.start_date).toISOString().split("T")[0]:"",end_date_plan:w.end_date_plan?new Date(w.end_date_plan).toISOString().split("T")[0]:"",total_length_m:w.total_length_m,base_rate_per_m:w.base_rate_per_m,language_default:w.language_default||"de",status:w.status});let A=async a=>{try{let b={...a,start_date:a.start_date||void 0,end_date_plan:a.end_date_plan||void 0};await u.mutateAsync({id:v,data:b}),f.push(`/dashboard/projects/${v}`)}catch(a){console.error("Failed to update project:",a)}},B=[{value:"de",label:"German (Deutsch)"},{value:"en",label:"English"},{value:"ru",label:"Russian (Русский)"},{value:"uz",label:"Uzbek (Oʻzbek)"},{value:"tr",label:"Turkish (Türkçe)"}],C=[{value:"draft",label:"Draft"},{value:"active",label:"Active"},{value:"waiting_invoice",label:"Waiting Invoice"},{value:"closed",label:"Closed"}];return t?x?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-8 w-64 bg-muted animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-4 w-48 bg-muted animate-pulse rounded"})]})]}),(0,b.jsx)("div",{className:"max-w-2xl space-y-6",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-48 bg-muted animate-pulse rounded-lg"},c))})]}):y||!w?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:()=>f.back(),className:"flex items-center space-x-2",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Back"})]})}),(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"py-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(k.AlertTriangle,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"Project not found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"The project you're looking for doesn't exist or you don't have permission to view it."})]})})})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:()=>f.back(),className:"flex items-center space-x-2",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Back"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Project"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Modify project details and configuration"})]})]})}),(0,b.jsx)("div",{className:"max-w-2xl",children:(0,b.jsx)(n.Form,{...z,children:(0,b.jsxs)("form",{onSubmit:z.handleSubmit(A),className:"space-y-6",children:[(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsxs)(m.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Building2,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Basic Information"})]}),(0,b.jsx)(m.CardDescription,{children:"Update the fundamental details about the project"})]}),(0,b.jsxs)(m.CardContent,{className:"space-y-6",children:[(0,b.jsx)(n.FormField,{control:z.control,name:"name",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Project Name *"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{placeholder:"e.g., Fiber Installation Berlin District 1",...a})}),(0,b.jsx)(n.FormDescription,{children:"A clear, descriptive name for the project"}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(n.FormField,{control:z.control,name:"customer",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Customer"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{placeholder:"e.g., Deutsche Telekom",...a})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:z.control,name:"city",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"City"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{placeholder:"e.g., Berlin",...a})}),(0,b.jsx)(n.FormMessage,{})]})})]}),(0,b.jsx)(n.FormField,{control:z.control,name:"address",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Project Address"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{placeholder:"e.g., Hauptstraße 123, 10115 Berlin",...a})}),(0,b.jsx)(n.FormDescription,{children:"Primary address or area where the work will be performed"}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:z.control,name:"contact_24h",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"24h Emergency Contact"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{placeholder:"e.g., +49 30 12345678",...a})}),(0,b.jsx)(n.FormDescription,{children:"Contact number for emergencies during the project"}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(n.FormField,{control:z.control,name:"language_default",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Default Language"}),(0,b.jsxs)(p.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"Select project language"})})}),(0,b.jsx)(p.SelectContent,{children:B.map(a=>(0,b.jsx)(p.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(n.FormDescription,{children:"Primary language used for project documentation and interface"}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:z.control,name:"status",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Project Status"}),(0,b.jsxs)(p.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"Select project status"})})}),(0,b.jsx)(p.SelectContent,{children:C.map(a=>(0,b.jsx)(p.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(n.FormDescription,{children:"Current status of the project"}),(0,b.jsx)(n.FormMessage,{})]})})]})]})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(m.CardTitle,{children:"Project Scope"}),(0,b.jsx)(m.CardDescription,{children:"Update the scope and financial parameters of the project"})]}),(0,b.jsxs)(m.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(n.FormField,{control:z.control,name:"total_length_m",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Total Length (meters) *"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{type:"number",step:"0.01",min:"0",placeholder:"e.g., 1500",...a})}),(0,b.jsx)(n.FormDescription,{children:"Total length of fiber cable to be installed"}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:z.control,name:"base_rate_per_m",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Rate per Meter (€) *"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{type:"number",step:"0.01",min:"0",placeholder:"e.g., 15.50",...a})}),(0,b.jsx)(n.FormDescription,{children:"Base rate charged per meter of installation"}),(0,b.jsx)(n.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"rounded-md bg-muted p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium",children:"Estimated Project Value:"}),(0,b.jsxs)("span",{className:"text-lg font-bold",children:["€",(z.watch("total_length_m")*z.watch("base_rate_per_m")).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[z.watch("total_length_m")," meters × €",z.watch("base_rate_per_m")," per meter"]})]})]})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsxs)(m.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.CalendarIcon,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Project Timeline"})]}),(0,b.jsx)(m.CardDescription,{children:"Update the planned start and end dates (optional)"})]}),(0,b.jsx)(m.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(n.FormField,{control:z.control,name:"start_date",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Planned Start Date"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{type:"date",...a})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:z.control,name:"end_date_plan",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Planned End Date"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.Input,{type:"date",...a})}),(0,b.jsx)(n.FormMessage,{})]})})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,b.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>f.back(),children:"Cancel"}),(0,b.jsxs)(l.Button,{type:"submit",disabled:u.isPending,className:"flex items-center space-x-2",children:[u.isPending?(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}):(0,b.jsx)(i.Save,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Save Changes"})]})]})]})})})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:()=>f.back(),className:"flex items-center space-x-2",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Back"})]})}),(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"py-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(k.AlertTriangle,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"Access Denied"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"You don't have permission to edit projects."})]})})})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_projects_%5Bid%5D_edit_page_tsx_f10c593b._.js.map