(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";e.s(["Trash2",()=>s],27612);let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},88511,e=>{"use strict";e.s(["Edit",()=>s],88511);let s=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},46897,e=>{"use strict";e.s(["MapPin",()=>s],46897);let s=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3116,e=>{"use strict";e.s(["Clock",()=>s],3116);let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},71689,e=>{"use strict";e.s(["ArrowLeft",()=>s],71689);let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},72436,e=>{"use strict";e.s(["Separator",()=>d],72436);var s=e.i(43476),t=e.i(71645),r=e.i(48425),a="horizontal",i=["horizontal","vertical"],n=t.forwardRef((e,t)=>{var n;let{decorative:l,orientation:d=a,...c}=e,o=(n=d,i.includes(n))?d:a;return(0,s.jsx)(r.Primitive.div,{"data-orientation":o,...l?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...c,ref:t})});n.displayName="Separator";var l=e.i(75157);let d=t.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",decorative:i=!0,...d}=e;return(0,s.jsx)(n,{ref:t,decorative:i,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...d})});d.displayName=n.displayName},88980,e=>{"use strict";e.s(["useApproveWorkEntry",()=>o,"useCreateWorkEntry",()=>d,"useDeleteWorkEntry",()=>c,"usePendingApprovals",()=>m,"useWorkEntries",()=>n,"useWorkEntry",()=>l,"useWorkStages",()=>x]);var s=e.i(66027),t=e.i(54616),r=e.i(12598),a=e.i(46696);let i={all:["work-entries"],lists:()=>[...i.all,"list"],list:e=>[...i.lists(),e],details:()=>[...i.all,"detail"],detail:e=>[...i.details(),e],stages:()=>[...i.all,"stages"]};function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&""!==r&&t.append(s,r.toString())}),(0,s.useQuery)({queryKey:i.list(e),queryFn:async()=>{let e=await fetch("/api/work-entries?".concat(t.toString()));if(!e.ok)throw Error("Failed to fetch work entries");return e.json()}})}function l(e){return(0,s.useQuery)({queryKey:i.detail(e),queryFn:async()=>{let s=await fetch("/api/work-entries/".concat(e));if(!s.ok)throw Error("Failed to fetch work entry");return s.json()},enabled:!!e})}function d(){let e=(0,r.useQueryClient)();return(0,t.useMutation)({mutationFn:async e=>{let s=await fetch("/api/work-entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).error||"Failed to create work entry");return s.json()},onSuccess:()=>{e.invalidateQueries({queryKey:i.lists()}),a.toast.success("Work entry created successfully")},onError:e=>{a.toast.error(e.message)}})}function c(){let e=(0,r.useQueryClient)();return(0,t.useMutation)({mutationFn:async e=>{let s=await fetch("/api/work-entries/".concat(e),{method:"DELETE"});if(!s.ok)throw Error((await s.json()).error||"Failed to delete work entry");return s.json()},onSuccess:()=>{e.invalidateQueries({queryKey:i.lists()}),a.toast.success("Work entry deleted successfully")},onError:e=>{a.toast.error(e.message)}})}function o(){let e=(0,r.useQueryClient)();return(0,t.useMutation)({mutationFn:async e=>{let s=await fetch("/api/work-entries/".concat(e,"/approve"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error((await s.json()).error||"Failed to approve work entry");return s.json()},onSuccess:()=>{e.invalidateQueries({queryKey:i.lists()}),a.toast.success("Work entry approved successfully")},onError:e=>{a.toast.error(e.message)}})}function m(){return n({approved:"false",page:1,per_page:50})}function x(){return(0,s.useQuery)({queryKey:i.stages(),queryFn:async()=>{let e=await fetch("/api/work-stages");if(!e.ok)throw Error("Failed to fetch work stages");return e.json()},staleTime:6e5})}},86909,e=>{"use strict";e.s(["requireAuth",()=>r]);var s=e.i(18566),t=e.i(71436);function r(){(function(){let e=(0,t.getStoredToken)(),s=(0,t.getStoredUser)();return e&&s?s:null})()||(0,s.redirect)("/login")}},89302,e=>{"use strict";e.s(["default",()=>y]);var s=e.i(43476),t=e.i(18566),r=e.i(71645),a=e.i(71689),i=e.i(46897),n=e.i(87316),l=e.i(84614),d=e.i(69638),c=e.i(3116),o=e.i(88511),m=e.i(27612),x=e.i(78583),u=e.i(19455),h=e.i(15288),p=e.i(87486),j=e.i(72436),f=e.i(88980),v=e.i(86909);function y(e){let{params:y}=e;(0,v.requireAuth)();let g=(0,t.useRouter)(),{id:N}=(0,r.use)(y),{data:k,isLoading:w,error:C}=(0,f.useWorkEntry)(N),b=(0,f.useDeleteWorkEntry)(),_=async()=>{confirm("Are you sure you want to delete this work entry? This action cannot be undone.")&&(await b.mutateAsync(N),g.push("/dashboard/work-entries"))};return C?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(u.Button,{variant:"ghost",size:"sm",onClick:()=>g.back(),className:"flex items-center space-x-2",children:[(0,s.jsx)(a.ArrowLeft,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Work Entry Details"})]})}),(0,s.jsx)(h.Card,{children:(0,s.jsx)(h.CardContent,{className:"py-8",children:(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:"Failed to load work entry. Please try again later."})})})]}):w?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(u.Button,{variant:"ghost",size:"sm",onClick:()=>g.back(),className:"flex items-center space-x-2",children:[(0,s.jsx)(a.ArrowLeft,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Work Entry Details"})]})}),(0,s.jsx)(h.Card,{children:(0,s.jsx)(h.CardContent,{className:"py-8",children:(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded flex-1"}),(0,s.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-20"})]},t))})})})]}):k?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(u.Button,{variant:"ghost",size:"sm",onClick:()=>g.back(),className:"flex items-center space-x-2",children:[(0,s.jsx)(a.ArrowLeft,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Work Entry Details"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:[k.task," • ",k.project_name]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(u.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(o.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,s.jsxs)(u.Button,{variant:"destructive",size:"sm",onClick:_,children:[(0,s.jsx)(m.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(h.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.FileText,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Work Details"})]}),(0,s.jsx)(p.Badge,{variant:(e=>{switch(e){case"completed":return"default";case"pending_approval":default:return"secondary";case"in_progress":return"outline"}})(k.status),children:(e=>{switch(e){case"completed":return"Completed";case"pending_approval":return"Pending Approval";case"in_progress":return"In Progress";default:return e}})(k.status)})]}),(0,s.jsx)(h.CardDescription,{children:k.description})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Stage"}),(0,s.jsx)("p",{className:"font-medium",children:k.task})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Method"}),(0,s.jsx)("p",{className:"font-medium",children:(e=>{switch(e){case"hand":return"Manual";case"excavator":return"Excavator";case"trencher":return"Trencher";case"mole":return"Mole";default:return e||"—"}})(k.method)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Meters Completed"}),(0,s.jsxs)("p",{className:"font-medium",children:[k.meters_done,"m"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(k.date).toLocaleDateString()})]})]}),(k.width_m||k.depth_m||k.cables_count)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Separator,{}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[k.width_m&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Width"}),(0,s.jsxs)("p",{className:"font-medium",children:[k.width_m,"m"]})]}),k.depth_m&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Depth"}),(0,s.jsxs)("p",{className:"font-medium",children:[k.depth_m,"m"]})]}),k.cables_count&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Cables"}),(0,s.jsx)("p",{className:"font-medium",children:k.cables_count})]})]})]}),k.has_protection_pipe&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Separator,{}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm",children:"Protection pipe installed"})]})]}),k.soil_type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Separator,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Soil Type"}),(0,s.jsx)("p",{className:"font-medium",children:k.soil_type})]})]}),k.notes&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Separator,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:k.notes})]})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{children:[(0,s.jsx)(h.CardTitle,{children:"Photos"}),(0,s.jsx)(h.CardDescription,{children:"Work progress and completion photos"})]}),(0,s.jsx)(h.CardContent,{children:k.photos&&k.photos.length>0?(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.photos.map((e,t)=>(0,s.jsx)("div",{className:"aspect-square bg-muted rounded-lg",children:(0,s.jsx)("img",{src:e,alt:"Work photo ".concat(t+1),className:"w-full h-full object-cover rounded-lg"})},t))}):(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No photos uploaded for this work entry."})})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.MapPin,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Project"})]})}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),(0,s.jsx)("p",{className:"font-medium",children:k.project_name})]}),k.project_customer&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),(0,s.jsx)("p",{className:"font-medium",children:k.project_customer})]}),k.project_city&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),(0,s.jsx)("p",{className:"font-medium",children:k.project_city})]}),k.project_address&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:k.project_address})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(l.User,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Worker"})]})}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),(0,s.jsx)("p",{className:"font-medium",children:k.worker_name})]}),k.worker_email&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:k.worker_email})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"flex items-center space-x-2",children:[k.approved?(0,s.jsx)(d.CheckCircle,{className:"h-5 w-5 text-green-600"}):(0,s.jsx)(c.Clock,{className:"h-5 w-5 text-yellow-600"}),(0,s.jsx)("span",{children:"Approval Status"})]})}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.Badge,{variant:k.approved?"default":"secondary",children:k.approved?"Approved":"Pending Approval"})}),k.approved&&k.approved_by_name&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Approved by"}),(0,s.jsx)("p",{className:"font-medium",children:k.approved_by_name})]}),k.approved_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Approved on"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(k.approved_at).toLocaleString()})]})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.Calendar,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Timeline"})]})}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(k.created_at).toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(k.updated_at).toLocaleString()})]})]})]})]})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(u.Button,{variant:"ghost",size:"sm",onClick:()=>g.back(),className:"flex items-center space-x-2",children:[(0,s.jsx)(a.ArrowLeft,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Work Entry Details"})]})}),(0,s.jsx)(h.Card,{children:(0,s.jsx)(h.CardContent,{className:"py-8",children:(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:"Work entry not found."})})})]})}}]);