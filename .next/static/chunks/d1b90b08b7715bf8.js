(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87130,e=>{"use strict";e.s(["Filter",()=>t],87130);let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},25652,e=>{"use strict";e.s(["TrendingUp",()=>t],25652);let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},46897,e=>{"use strict";e.s(["MapPin",()=>t],46897);let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3116,e=>{"use strict";e.s(["Clock",()=>t],3116);let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},55838,(e,t,a)=>{"use strict";var r=e.r(71645),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useState,n=r.useEffect,s=r.useLayoutEffect,o=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!i(e,a)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),r=l({inst:{value:a,getSnapshot:t}}),i=r[0].inst,c=r[1];return s(function(){i.value=a,i.getSnapshot=t,u(i)&&c({inst:i})},[e,a,t]),n(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),o(a),a};a.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},2239,(e,t,a)=>{"use strict";t.exports=e.r(55838)},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},84774,e=>{"use strict";e.s(["Table",()=>i,"TableBody",()=>n,"TableCell",()=>u,"TableHead",()=>o,"TableHeader",()=>l,"TableRow",()=>s]);var t=e.i(43476),a=e.i(71645),r=e.i(75157);let i=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",i),...l})})});i.displayName="Table";let l=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",i),...l})});l.displayName="TableHeader";let n=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",i),...l})});n.displayName="TableBody",a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",i),...l})}).displayName="TableFooter";let s=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",i),...l})});s.displayName="TableRow";let o=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("th",{ref:a,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",i),...l})});o.displayName="TableHead";let u=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("td",{ref:a,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",i),...l})});u.displayName="TableCell",a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",i),...l})}).displayName="TableCaption"},27612,e=>{"use strict";e.s(["Trash2",()=>t],27612);let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},88511,e=>{"use strict";e.s(["Edit",()=>t],88511);let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},86536,e=>{"use strict";e.s(["Eye",()=>t],86536);let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},64483,49933,e=>{"use strict";e.s(["useCreateMaterialOrderWithBudget",()=>f,"useDeleteMaterialOrder",()=>v,"useMaterialOrder",()=>m,"useMaterialOrders",()=>p,"useUpdateMaterialOrder",()=>h],64483);var t=e.i(66027),a=e.i(54616),r=e.i(12598),i=e.i(46696);function l(e){return(0,t.useQuery)({queryKey:["material-order-budget",e],queryFn:async()=>{let t=await fetch("/api/materials/orders/".concat(e,"/budget"));if(!t.ok)throw Error("Failed to fetch budget impact");return t.json()},enabled:!!e})}function n(){let e=function(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{orderId:t,data:a}=e,r=await fetch("/api/materials/orders/".concat(t,"/budget"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error((await r.json()).error||"Failed to create budget transaction");return r.json()},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["material-order-budget",a.orderId]}),e.invalidateQueries({queryKey:["material-orders"]}),e.invalidateQueries({queryKey:["financial-summary"]}),e.invalidateQueries({queryKey:["project",t.project_id]}),i.toast.success("Budget transaction created: â‚¬".concat(t.amount_deducted.toFixed(2)," deducted"))},onError:e=>{i.toast.error(e.message||"Failed to create budget transaction")}})}();return{deductFromBudget:async function(t){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!a)return null;try{return await e.mutateAsync({orderId:t,data:{deduct_from_budget:!0}})}catch(e){return console.error("Auto budget deduction failed:",e),null}},isLoading:e.isPending,error:e.error}}e.s(["useAutoBudgetDeduction",()=>n,"useMaterialOrderBudgetImpact",()=>l],49933);let s={all:["material-orders"],lists:()=>[...s.all,"list"],list:e=>[...s.lists(),e],details:()=>[...s.all,"detail"],detail:e=>[...s.details(),e]};async function o(e){let t=new URLSearchParams;(null==e?void 0:e.project_id)&&t.set("project_id",e.project_id),(null==e?void 0:e.supplier_id)&&t.set("supplier_id",e.supplier_id),(null==e?void 0:e.status)&&t.set("status",e.status),(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.per_page)&&t.set("per_page",e.per_page.toString());let a=await fetch("/api/materials/orders?".concat(t.toString()));if(!a.ok)throw Error("Failed to fetch material orders");return a.json()}async function u(e){let t=await fetch("/api/materials/orders/".concat(e));if(!t.ok)throw Error("Failed to fetch material order");return t.json()}async function c(e){let t=await fetch("/api/materials/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to create material order");return t.json()}async function d(e,t){let a=await fetch("/api/materials/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to update material order");return a.json()}async function y(e){let t=await fetch("/api/materials/orders/".concat(e),{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete material order")}function p(e){return(0,t.useQuery)({queryKey:s.list(e||{}),queryFn:()=>o(e),staleTime:3e5})}function m(e){return(0,t.useQuery)({queryKey:s.detail(e),queryFn:()=>u(e),enabled:!!e,staleTime:3e5})}function f(){let e=function(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:c,onSuccess:t=>{e.invalidateQueries({queryKey:s.lists()}),e.setQueryData(s.detail(t.id),t),i.toast.success("Material order created successfully")},onError:e=>{i.toast.error("Failed to create order: ".concat(e.message))}})}(),{deductFromBudget:t}=n();return(0,a.useMutation)({mutationFn:async a=>{let{deduct_from_budget:r=!0,...l}=a,n=await e.mutateAsync(l);if(r&&n.project_id)try{await t(n.id,!0)}catch(e){console.warn("Budget deduction failed, but order was created:",e),i.toast.warning("Order created but budget deduction failed. Please manage manually.")}return n},onSuccess:e=>{i.toast.success("Order created and â‚¬".concat(e.total_cost_eur.toFixed(2)," deducted from project budget"))},onError:e=>{i.toast.error("Failed to create order: ".concat(e.message))}})}function h(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>{let{id:t,data:a}=e;return d(t,a)},onSuccess:t=>{e.setQueryData(s.detail(t.id),t),e.invalidateQueries({queryKey:s.lists()}),i.toast.success("Order updated successfully")},onError:e=>{i.toast.error("Failed to update order: ".concat(e.message))}})}function v(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:y,onSuccess:(t,a)=>{e.removeQueries({queryKey:s.detail(a)}),e.invalidateQueries({queryKey:s.lists()}),i.toast.success("Order deleted successfully")},onError:e=>{i.toast.error("Failed to delete order: ".concat(e.message))}})}},4382,e=>{"use strict";e.s(["invalidateAllMaterialQueries",()=>c,"useAdjustStock",()=>w,"useAssignMaterialToProject",()=>j,"useCreateMaterial",()=>h,"useDeleteMaterial",()=>g,"useDeleteMaterialAssignment",()=>S,"useLowStockMaterials",()=>p,"useMaterial",()=>y,"useMaterials",()=>d,"useOrders",()=>x,"useSuppliers",()=>b,"useUnifiedProjectMaterials",()=>f,"useUnifiedWarehouseMaterials",()=>m,"useUpdateMaterial",()=>v,"useUpdateMaterialAssignment",()=>E]);var t=e.i(66027),a=e.i(54616),r=e.i(12598),i=e.i(46696),l=e.i(41931);let n={all:["materials"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),e],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e],lowStock:()=>[...n.all,"low-stock"]},s={all:["suppliers"],lists:()=>[...s.all,"list"],details:()=>[...s.all,"detail"],detail:e=>[...s.details(),e]},o={all:["allocations"],lists:()=>[...o.all,"list"],list:e=>[...o.lists(),e],details:()=>[...o.all,"detail"],detail:e=>[...o.details(),e]},u={all:["orders"],lists:()=>[...u.all,"list"],list:e=>[...u.lists(),e],details:()=>[...u.all,"detail"],detail:e=>[...u.details(),e]};function c(e){e.invalidateQueries({queryKey:n.all}),e.invalidateQueries({queryKey:o.all}),e.invalidateQueries({queryKey:u.all}),e.invalidateQueries({queryKey:[...n.all,"unified-warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"allocation-targets"]}),e.refetchQueries({queryKey:[...n.all,"unified-warehouse"],type:"active"})}function d(e){return(0,t.useQuery)({queryKey:n.list(e||{}),queryFn:()=>l.materialsApi.getMaterials(e),staleTime:12e4})}function y(e){return(0,t.useQuery)({queryKey:n.detail(e),queryFn:()=>l.materialsApi.getMaterial(e),enabled:!!e,staleTime:3e5})}function p(){return(0,t.useQuery)({queryKey:n.lowStock(),queryFn:async()=>{let e=await fetch("/api/materials/low-stock");if(!e.ok)throw Error("Failed to fetch low stock materials");return(await e.json()).materials||[]},staleTime:12e4})}function m(){return(0,t.useQuery)({queryKey:[...n.all,"unified-warehouse"],queryFn:async()=>{let e=await fetch("/api/materials/unified?view=warehouse");if(!e.ok)throw Error("Failed to fetch warehouse materials");return(await e.json()).materials||[]},staleTime:3e4,gcTime:3e5,refetchOnWindowFocus:!0,refetchInterval:6e4})}function f(e){return(0,t.useQuery)({queryKey:[...o.all,"project",e,"unified"],queryFn:async()=>{let t=await fetch("/api/materials/unified?view=project_allocations&project_id=".concat(e));if(!t.ok)throw Error("Failed to fetch project materials");let a=await t.json();return{materials:a.materials||[],summary:a.allocation_summary}},enabled:!!e,staleTime:6e4,gcTime:3e5})}function h(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>l.materialsApi.createMaterial(e),onSuccess:t=>{e.invalidateQueries({queryKey:n.lists()}),e.setQueryData(n.detail(t.id),t),i.toast.success("Material created successfully")},onError:e=>{i.toast.error("Failed to create material: ".concat(e.message))}})}function v(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>{let{id:t,data:a}=e;return l.materialsApi.updateMaterial(t,a)},onMutate:async t=>{let{id:a,data:r}=t;await e.cancelQueries({queryKey:n.detail(a)});let i=e.getQueryData(n.detail(a));return e.setQueryData(n.detail(a),e=>e?{...e,...r}:e),{previousMaterial:i}},onError:(t,a,r)=>{let{id:l}=a;(null==r?void 0:r.previousMaterial)&&e.setQueryData(n.detail(l),r.previousMaterial),i.toast.error("Failed to update material: ".concat(t.message))},onSuccess:()=>{e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:n.lowStock()}),i.toast.success("Material updated successfully")},onSettled:(t,a,r)=>{let{id:i}=r;e.invalidateQueries({queryKey:n.detail(i)})}})}function g(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>l.materialsApi.deleteMaterial(e),onSuccess:(t,a)=>{e.removeQueries({queryKey:n.detail(a)}),e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:n.lowStock()}),i.toast.success("Material deleted successfully")},onError:e=>{i.toast.error("Failed to delete material: ".concat(e.message))}})}function w(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>{let{id:t,adjustment:a}=e;return l.materialsApi.adjustStock(t,a)},onSuccess:t=>{e.setQueryData(n.detail(t.id),t),e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:n.lowStock()}),e.invalidateQueries({queryKey:[...n.all,"unified-warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"allocation-targets"]}),i.toast.success("Stock adjusted successfully")},onError:e=>{i.toast.error("Failed to adjust stock: ".concat(e.message))}})}function b(){return(0,t.useQuery)({queryKey:s.lists(),queryFn:()=>l.suppliersApi.getSuppliers(),staleTime:6e5})}function x(e){return(0,t.useQuery)({queryKey:u.list(e||{}),queryFn:()=>l.materialOrdersApi.getOrders(e),staleTime:18e4})}function j(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let t=await fetch("/api/materials/assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).message||"Failed to assign material");return t.json()},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:[...n.all,"project",a.project_id]}),e.invalidateQueries({queryKey:[...o.all,"project",a.project_id,"unified"]}),e.invalidateQueries({queryKey:[...n.all,"warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"unified-warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"allocation-targets"]}),e.refetchQueries({queryKey:[...o.all,"project",a.project_id,"unified"]}),e.refetchQueries({queryKey:[...n.all,"unified-warehouse"]}),i.toast.success("Material assigned successfully")},onError:e=>{i.toast.error("Failed to assign material: ".concat(e.message))}})}function E(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{assignment_id:t,...a}=e,r=await fetch("/api/materials/assignments/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error((await r.json()).message||"Failed to update material assignment");return r.json()},onSuccess:(t,a)=>{e.invalidateQueries({predicate:e=>"materials"===e.queryKey[0]&&"project"===e.queryKey[1]}),e.invalidateQueries({predicate:e=>e.queryKey.includes("unified")}),e.invalidateQueries({queryKey:[...n.all,"warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"unified-warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"allocation-targets"]}),i.toast.success("Material assignment updated successfully")},onError:e=>{i.toast.error("Failed to update material assignment: ".concat(e.message))}})}function S(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let t=await fetch("/api/materials/assignments/".concat(e),{method:"DELETE"});if(!t.ok)throw Error((await t.json()).message||"Failed to delete material assignment");return t.json()},onSuccess:(t,a)=>{e.invalidateQueries({predicate:e=>"materials"===e.queryKey[0]&&"project"===e.queryKey[1]}),e.invalidateQueries({predicate:e=>e.queryKey.includes("unified")}),e.invalidateQueries({queryKey:[...n.all,"warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"unified-warehouse"]}),e.invalidateQueries({queryKey:[...n.all,"allocation-targets"]}),i.toast.success("Material assignment deleted successfully")},onError:e=>{i.toast.error("Failed to delete material assignment: ".concat(e.message))}})}},86241,e=>{"use strict";e.s(["useAllocations",()=>s,"useCreateAllocation",()=>o]);var t=e.i(54616),a=e.i(66027),r=e.i(12598),i=e.i(46696),l=e.i(4382);let n={getAllocations:async e=>{let t=new URLSearchParams;(null==e?void 0:e.project_id)&&t.append("project_id",e.project_id),(null==e?void 0:e.crew_id)&&t.append("crew_id",e.crew_id),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.material_id)&&t.append("material_id",e.material_id);let a="/api/materials/allocations".concat(t.toString()?"?".concat(t.toString()):""),r=await fetch(a);if(!r.ok)throw Error("Failed to fetch allocations");return(await r.json()).allocations||[]},createAllocation:async e=>{let t=await fetch("/api/materials/allocations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to create allocation");return t.json()}};function s(e){return(0,a.useQuery)({queryKey:["allocations",e],queryFn:()=>n.getAllocations(e)})}function o(){let e=(0,r.useQueryClient)();return(0,t.useMutation)({mutationFn:n.createAllocation,onSuccess:t=>{(0,l.invalidateAllMaterialQueries)(e),e.invalidateQueries({queryKey:["allocations","project"]}),i.toast.success(t.message||"Allocation created successfully")},onError:e=>{i.toast.error(e.message)}})}},41071,e=>{"use strict";e.s(["MoreHorizontal",()=>t],41071);let t=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},73884,e=>{"use strict";e.s(["XCircle",()=>t],73884);let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},29228,55706,e=>{"use strict";e.s(["LineChart",()=>l],29228);var t=e.i(71645),a=e.i(25949),r=e.i(33369),i=["axis"],l=(0,t.forwardRef)((e,l)=>t.createElement(r.CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:i,tooltipPayloadSearcher:a.arrayTooltipSearcher,categoricalChartProps:e,ref:l}));e.s(["Line",()=>es,"computeLinePoints",()=>en],55706);var n=t,s=e.i(7670),o=e.i(72733),u=e.i(38279),c=e.i(97865),d=e.i(7467),y=e.i(94395),p=e.i(81977),m=e.i(62728),f=e.i(79812),h=e.i(41818),v=e.i(844),g=e.i(45542),w=e.i(59798),b=e.i(46710),x=e.i(75337),j=e.i(61849),E=e.i(92860),S=e.i(61764),k=(e,t,a,r)=>(0,S.selectAxisWithScale)(e,"xAxis",t,r),Q=(e,t,a,r)=>(0,S.selectTicksOfGraphicalItem)(e,"xAxis",t,r),q=(e,t,a,r)=>(0,S.selectAxisWithScale)(e,"yAxis",a,r),A=(e,t,a,r)=>(0,S.selectTicksOfGraphicalItem)(e,"yAxis",a,r),M=(0,j.createSelector)([b.selectChartLayout,k,q,Q,A],(e,t,a,r,i)=>(0,f.isCategoricalAxis)(e,"xAxis")?(0,f.getBandSizeOfAxis)(t,r,!1):(0,f.getBandSizeOfAxis)(a,i,!1));function K(e){return"line"===e.type}var P=(0,j.createSelector)([S.selectUnfilteredCartesianItems,(e,t,a,r,i)=>i],(e,t)=>e.filter(K).find(e=>e.id===t)),F=(0,j.createSelector)([b.selectChartLayout,k,q,Q,A,P,M,E.selectChartDataWithIndexesIfNotInPanorama],(e,t,a,r,i,l,n,s)=>{var o,{chartData:u,dataStartIndex:c,dataEndIndex:d}=s;if(null!=l&&null!=t&&null!=a&&null!=r&&null!=i&&0!==r.length&&0!==i.length&&null!=n){var{dataKey:y,data:p}=l;if(null!=(o=null!=p&&p.length>0?p:null==u?void 0:u.slice(c,d+1)))return en({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:i,dataKey:y,bandSize:n,displayedData:o})}}),T=e.i(27241),O=e.i(95146),C=e.i(40657),N=e.i(51883),D=e.i(52734),I=e.i(15549),_=e.i(91187),L=e.i(57999),R=e.i(66576),B=["id"],z=["type","layout","connectNulls","needClip"],U=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach(function(t){var r,i,l;r=e,i=t,l=a[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in r?Object.defineProperty(r,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[i]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function W(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function J(){return(J=Object.assign.bind()).apply(null,arguments)}function G(e){var{dataKey:t,data:a,stroke:r,strokeWidth:i,fill:l,name:n,hide:s,unit:o}=e;return{dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:void 0,name:(0,f.getTooltipNameProp)(n,t),hide:s,type:e.tooltipType,color:e.stroke,unit:o}}}var X=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Y(e){var{clipPathId:t,points:a,props:r}=e,{dot:i,dataKey:l,needClip:o}=r;if(null==a||!i&&1!==a.length)return null;var{id:d}=r,y=W(r,B),m=(0,p.isClipDot)(i),f=(0,L.svgPropertiesNoEvents)(y),h=(0,p.filterProps)(i,!0),v=a.map((e,t)=>{var r,o=H(H(H({key:"dot-".concat(t),r:3},f),h),{},{index:t,cx:e.x,cy:e.y,dataKey:l,value:e.value,payload:e.payload,points:a});if(n.isValidElement(i))r=n.cloneElement(i,o);else if("function"==typeof i)r=i(o);else{var c=(0,s.clsx)("recharts-line-dot","boolean"!=typeof i?i.className:"");r=n.createElement(u.Dot,J({},o,{className:c}))}return r}),g={clipPath:o?"url(#clipPath-".concat(m?"":"dots-").concat(t,")"):void 0};return n.createElement(c.Layer,J({className:"recharts-line-dots",key:"dots"},g),v)}function Z(e){var{showLabels:t,children:a,points:r}=e,i=(0,n.useMemo)(()=>null==r?void 0:r.map(e=>{var t={x:e.x,y:e.y,width:0,height:0};return H(H({},t),{},{value:e.value,payload:e.payload,viewBox:t,parentViewBox:void 0,fill:void 0})}),[r]);return n.createElement(d.CartesianLabelListContextProvider,{value:t?i:null},a)}function $(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:i,props:l}=e,{type:s,layout:u,connectNulls:c,needClip:d}=l,y=W(l,z),m=H(H({},(0,p.filterProps)(y,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:r,type:s,layout:u,connectNulls:c,strokeDasharray:null!=i?i:l.strokeDasharray});return n.createElement(n.Fragment,null,(null==r?void 0:r.length)>1&&n.createElement(o.Curve,J({},m,{pathRef:a})),n.createElement(Y,{points:r,clipPathId:t,props:l}))}function ee(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:l}=e,{points:s,strokeDasharray:o,isAnimationActive:u,animationBegin:c,animationDuration:p,animationEasing:m,animateNewValues:f,width:h,height:v,onAnimationEnd:g,onAnimationStart:w}=a,b=i.current,x=(0,C.useAnimationId)(a,"recharts-line-"),[j,E]=(0,n.useState)(!1),S=(0,n.useCallback)(()=>{"function"==typeof g&&g(),E(!1)},[g]),k=(0,n.useCallback)(()=>{"function"==typeof w&&w(),E(!0)},[w]),Q=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(r.current),q=l.current;return n.createElement(Z,{points:s,showLabels:!j},a.children,n.createElement(R.JavascriptAnimate,{animationId:x,begin:c,duration:p,isActive:u,easing:m,onAnimationEnd:S,onAnimationStart:k,key:x},e=>{var c,d=Math.min((0,y.interpolate)(q,Q+q,e),Q);if(c=u?o?((e,t,a)=>{var r=a.reduce((e,t)=>e+t);if(!r)return X(t,e);for(var i=Math.floor(e/r),l=e%r,n=t-e,s=[],o=0,u=0;o<a.length;u+=a[o],++o)if(u+a[o]>l){s=[...a.slice(0,o),l-u];break}var c=s.length%2==0?[0,n]:[n];return[...function(e,t){for(var a=e.length%2!=0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...a];return r}(a,i),...s,...c].map(e=>"".concat(e,"px")).join(", ")})(d,Q,"".concat(o).split(/[,\s]+/gim).map(e=>parseFloat(e))):X(Q,d):null==o?void 0:String(o),b){var p=b.length/s.length,m=1===e?s:s.map((t,a)=>{var r=Math.floor(a*p);if(b[r]){var i=b[r];return H(H({},t),{},{x:(0,y.interpolate)(i.x,t.x,e),y:(0,y.interpolate)(i.y,t.y,e)})}return f?H(H({},t),{},{x:(0,y.interpolate)(2*h,t.x,e),y:(0,y.interpolate)(v/2,t.y,e)}):H(H({},t),{},{x:t.x,y:t.y})});return i.current=m,n.createElement($,{props:a,points:m,clipPathId:t,pathRef:r,strokeDasharray:c})}return e>0&&Q>0&&(i.current=s,l.current=d),n.createElement($,{props:a,points:s,clipPathId:t,pathRef:r,strokeDasharray:c})}),n.createElement(d.LabelListFromLabelProp,{label:a.label}))}function et(e){var{clipPathId:t,props:a}=e,r=(0,n.useRef)(null),i=(0,n.useRef)(0),l=(0,n.useRef)(null);return n.createElement(ee,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:l})}var ea=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:(0,f.getValueByDataKey)(e.payload,t)});class er extends n.Component{render(){var e,{hide:t,dot:a,points:r,className:i,xAxisId:l,yAxisId:o,top:u,left:d,width:y,height:m,id:f,needClip:v}=this.props;if(t)return null;var b=(0,s.clsx)("recharts-line",i),{r:x=3,strokeWidth:j=2}=null!=(e=(0,p.filterProps)(a,!1))?e:{r:3,strokeWidth:2},E=(0,p.isClipDot)(a),S=2*x+j;return n.createElement(n.Fragment,null,n.createElement(c.Layer,{className:b},v&&n.createElement("defs",null,n.createElement(w.GraphicalItemClipPath,{clipPathId:f,xAxisId:l,yAxisId:o}),!E&&n.createElement("clipPath",{id:"clipPath-dots-".concat(f)},n.createElement("rect",{x:d-S/2,y:u-S/2,width:y+S,height:m+S}))),n.createElement(g.SetErrorBarContext,{xAxisId:l,yAxisId:o,data:r,dataPointFormatter:ea,errorBarOffset:0},n.createElement(et,{props:this.props,clipPathId:f}))),n.createElement(h.ActivePoints,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var ei={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!m.Global.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function el(e){var t=(0,N.resolveDefaultProps)(e,ei),{activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:s,connectNulls:o,dot:u,hide:c,isAnimationActive:d,label:y,legendType:p,xAxisId:m,yAxisId:f,id:h}=t,v=W(t,U),{needClip:g}=(0,w.useNeedsClip)(m,f),j=(0,D.usePlotArea)(),E=(0,b.useChartLayout)(),S=(0,x.useIsPanorama)(),k=(0,T.useAppSelector)(e=>F(e,m,f,S,h));if("horizontal"!==E&&"vertical"!==E||null==k||null==j)return null;var{height:Q,width:q,x:A,y:M}=j;return n.createElement(er,J({},v,{id:h,connectNulls:o,dot:u,activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:s,isAnimationActive:d,hide:c,label:y,legendType:p,xAxisId:m,yAxisId:f,points:k,layout:E,height:Q,width:q,left:A,top:M,needClip:g}))}function en(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:l,dataKey:n,bandSize:s,displayedData:o}=e;return o.map((e,o)=>{var u=(0,f.getValueByDataKey)(e,n);if("horizontal"===t)return{x:(0,f.getCateCoordinateOfLine)({axis:a,ticks:i,bandSize:s,entry:e,index:o}),y:(0,y.isNullish)(u)?null:r.scale(u),value:u,payload:e};var c=(0,y.isNullish)(u)?null:a.scale(u),d=(0,f.getCateCoordinateOfLine)({axis:r,ticks:l,bandSize:s,entry:e,index:o});return null==c||null==d?null:{x:c,y:d,value:u,payload:e}}).filter(Boolean)}var es=n.memo(function(e){var t=(0,N.resolveDefaultProps)(e,ei),a=(0,x.useIsPanorama)();return n.createElement(I.RegisterGraphicalItemId,{id:t.id,type:"line"},e=>n.createElement(n.Fragment,null,n.createElement(O.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:r,value:(0,f.getTooltipNameProp)(a,t),payload:e}]})(t)}),n.createElement(v.SetTooltipEntrySettings,{fn:G,args:t}),n.createElement(_.SetCartesianGraphicalItem,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),n.createElement(el,J({},t,{id:e}))))});es.displayName="Line"}]);