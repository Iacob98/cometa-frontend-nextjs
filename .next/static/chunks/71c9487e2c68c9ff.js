(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56031,e=>{"use strict";e.s(["default",()=>v]);var l=e.i(43476),s=e.i(71645),a=e.i(45423),t=e.i(39616),i=e.i(69638),r=e.i(19455),n=e.i(93479),d=e.i(15288),c=e.i(77572),o=e.i(87486),x=e.i(67489),u=e.i(76639),h=e.i(74061),m=e.i(15410),j=e.i(93900),f=e.i(71436),g=e.i(23281);function v(){let[e,v]=(0,s.useState)("all"),[N,p]=(0,s.useState)(""),[C,w]=(0,s.useState)("all"),[y,b]=(0,s.useState)("all"),[S,T]=(0,s.useState)(!1),{user:L}=(0,f.useAuth)(),{isConnected:I}=(0,g.useWebSocket)(),{markAllAsRead:B,isLoading:k}=(0,j.useNotificationActions)(),{data:U,isLoading:A}=(0,j.useUserNotifications)((null==L?void 0:L.id)||""),{data:_,isLoading:D}=(0,j.useUnreadNotifications)((null==L?void 0:L.id)||""),{data:H,isLoading:P}=(0,j.useUrgentNotifications)((null==L?void 0:L.id)||""),{data:R,isLoading:V}=(0,j.useRecentNotifications)((null==L?void 0:L.id)||""),{data:O}=(0,j.useUnreadNotificationCount)((null==L?void 0:L.id)||""),{data:M,isLoading:W}=(()=>{switch(e){case"unread":return{data:_,isLoading:D};case"urgent":return{data:H,isLoading:P};case"recent":return{data:R,isLoading:V};default:return{data:U,isLoading:A}}})(),q=(null==M?void 0:M.items)||[];return N&&(q=q.filter(e=>e.title.toLowerCase().includes(N.toLowerCase())||e.body.toLowerCase().includes(N.toLowerCase()))),"all"!==C&&(q=q.filter(e=>e.priority===C)),"all"!==y&&(q=q.filter(e=>e.type===y)),(0,l.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Notifications"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Manage your notifications and preferences"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(I?"bg-green-500":"bg-red-500")}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:I?"Real-time connected":"Offline"})]}),(0,l.jsxs)(u.Dialog,{open:S,onOpenChange:T,children:[(0,l.jsx)(u.DialogTrigger,{asChild:!0,children:(0,l.jsxs)(r.Button,{variant:"outline",size:"sm",children:[(0,l.jsx)(t.Settings,{className:"mr-2 h-4 w-4"}),"Preferences"]})}),(0,l.jsxs)(u.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,l.jsxs)(u.DialogHeader,{children:[(0,l.jsx)(u.DialogTitle,{children:"Notification Preferences"}),(0,l.jsx)(u.DialogDescription,{children:"Manage how and when you receive notifications."})]}),(0,l.jsx)(h.NotificationPreferences,{userId:(null==L?void 0:L.id)||""})]})]}),O&&O.count>0&&(0,l.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{(null==L?void 0:L.id)&&B(L.id)},disabled:k,children:[(0,l.jsx)(i.CheckCircle,{className:"mr-2 h-4 w-4"}),"Mark All Read (",O.count,")"]})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,l.jsxs)(d.Card,{children:[(0,l.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Notifications"}),(0,l.jsx)(a.Bell,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)(d.CardContent,{children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:(null==U?void 0:U.total)||0})})]}),(0,l.jsxs)(d.Card,{children:[(0,l.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Unread"}),(0,l.jsx)(o.Badge,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 text-xs",children:(null==O?void 0:O.count)||0})]}),(0,l.jsx)(d.CardContent,{children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:(null==O?void 0:O.count)||0})})]}),(0,l.jsxs)(d.Card,{children:[(0,l.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Urgent"}),(0,l.jsx)(o.Badge,{variant:"destructive",className:"h-4 w-4 rounded-full p-0"})]}),(0,l.jsx)(d.CardContent,{children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:(null==H?void 0:H.total)||0})})]}),(0,l.jsxs)(d.Card,{children:[(0,l.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Recent (24h)"}),(0,l.jsx)(a.Bell,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)(d.CardContent,{children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:(null==R?void 0:R.total)||0})})]})]}),(0,l.jsxs)(d.Card,{children:[(0,l.jsx)(d.CardHeader,{children:(0,l.jsx)(d.CardTitle,{className:"text-lg",children:"Filters"})}),(0,l.jsx)(d.CardContent,{children:(0,l.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(n.Input,{placeholder:"Search notifications...",value:N,onChange:e=>p(e.target.value),className:"max-w-sm"})}),(0,l.jsxs)(x.Select,{value:C,onValueChange:e=>w(e),children:[(0,l.jsx)(x.SelectTrigger,{className:"w-[180px]",children:(0,l.jsx)(x.SelectValue,{placeholder:"Priority"})}),(0,l.jsxs)(x.SelectContent,{children:[(0,l.jsx)(x.SelectItem,{value:"all",children:"All Priorities"}),(0,l.jsx)(x.SelectItem,{value:"low",children:"Low"}),(0,l.jsx)(x.SelectItem,{value:"normal",children:"Normal"}),(0,l.jsx)(x.SelectItem,{value:"high",children:"High"}),(0,l.jsx)(x.SelectItem,{value:"urgent",children:"Urgent"})]})]}),(0,l.jsxs)(x.Select,{value:y,onValueChange:e=>b(e),children:[(0,l.jsx)(x.SelectTrigger,{className:"w-[200px]",children:(0,l.jsx)(x.SelectValue,{placeholder:"Type"})}),(0,l.jsxs)(x.SelectContent,{children:[(0,l.jsx)(x.SelectItem,{value:"all",children:"All Types"}),(0,l.jsx)(x.SelectItem,{value:"work_entry_created",children:"Work Entry Created"}),(0,l.jsx)(x.SelectItem,{value:"work_entry_approved",children:"Work Entry Approved"}),(0,l.jsx)(x.SelectItem,{value:"project_status_changed",children:"Project Status"}),(0,l.jsx)(x.SelectItem,{value:"material_low_stock",children:"Low Stock"}),(0,l.jsx)(x.SelectItem,{value:"deadline_reminder",children:"Deadline"}),(0,l.jsx)(x.SelectItem,{value:"approval_required",children:"Approval Required"})]})]})]})})]}),(0,l.jsxs)(d.Card,{children:[(0,l.jsx)(d.CardHeader,{children:(0,l.jsx)(c.Tabs,{value:e,onValueChange:v,className:"w-full",children:(0,l.jsxs)(c.TabsList,{className:"grid w-full grid-cols-4",children:[(0,l.jsxs)(c.TabsTrigger,{value:"all",children:["All",(null==U?void 0:U.total)&&(0,l.jsx)(o.Badge,{variant:"secondary",className:"ml-1 h-4 text-xs",children:U.total})]}),(0,l.jsxs)(c.TabsTrigger,{value:"unread",children:["Unread",O&&O.count>0&&(0,l.jsx)(o.Badge,{variant:"destructive",className:"ml-1 h-4 text-xs",children:O.count})]}),(0,l.jsxs)(c.TabsTrigger,{value:"urgent",children:["Urgent",(null==H?void 0:H.total)&&H.total>0&&(0,l.jsx)(o.Badge,{variant:"destructive",className:"ml-1 h-4 text-xs",children:H.total})]}),(0,l.jsx)(c.TabsTrigger,{value:"recent",children:"Recent"})]})})}),(0,l.jsx)(d.CardContent,{children:W?(0,l.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===q.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(a.Bell,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),(0,l.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No notifications found"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:N||"all"!==C||"all"!==y?"Try adjusting your filters":"You&apos;re all caught up!"})]}):(0,l.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,l.jsx)(m.NotificationItem,{notification:e},e.id))})})]})]})}}]);