(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},32661,e=>{"use strict";e.s(["useCreateProject",()=>l,"useDeleteProject",()=>d,"useProject",()=>u,"useProjectStats",()=>p,"useProjects",()=>o,"useUpdateProject",()=>c]);var t=e.i(66027),r=e.i(54616),a=e.i(12598),s=e.i(46696),i=e.i(41931);let n={all:["projects"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),e],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e]};function o(e){return(0,t.useQuery)({queryKey:n.list(e||{}),queryFn:()=>i.projectsApi.getProjects(e),staleTime:3e5})}function u(e){return(0,t.useQuery)({queryKey:n.detail(e),queryFn:()=>i.projectsApi.getProject(e),enabled:!!e,staleTime:3e5})}function l(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:e=>i.projectsApi.createProject(e),onSuccess:t=>{e.invalidateQueries({queryKey:n.lists()}),e.setQueryData(n.detail(t.id),t),s.toast.success("Project created successfully")},onError:e=>{s.toast.error("Failed to create project: ".concat(e.message))}})}function c(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:e=>{let{id:t,data:r}=e;return i.projectsApi.updateProject(t,r)},onMutate:async t=>{let{id:r,data:a}=t;await e.cancelQueries({queryKey:n.detail(r)});let s=e.getQueryData(n.detail(r));return e.setQueryData(n.detail(r),e=>e?{...e,...a}:e),{previousProject:s}},onError:(t,r,a)=>{let{id:i}=r;(null==a?void 0:a.previousProject)&&e.setQueryData(n.detail(i),a.previousProject),s.toast.error("Failed to update project: ".concat(t.message))},onSuccess:t=>{e.invalidateQueries({queryKey:n.lists()}),s.toast.success("Project updated successfully")},onSettled:(t,r,a)=>{let{id:s}=a;e.invalidateQueries({queryKey:n.detail(s)})}})}function d(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:e=>i.projectsApi.deleteProject(e),onSuccess:(t,r)=>{e.removeQueries({queryKey:n.detail(r)}),e.invalidateQueries({queryKey:n.lists()}),s.toast.success("Project deleted successfully")},onError:e=>{s.toast.error("Failed to delete project: ".concat(e.message))}})}function p(e){return(0,t.useQuery)({queryKey:[...n.detail(e),"stats"],queryFn:async()=>{let t=await fetch("/api/projects/".concat(e,"/stats"));if(!t.ok)throw Error("Failed to fetch project statistics");return t.json()},staleTime:12e4,enabled:!!e})}},24687,e=>{"use strict";e.s(["Textarea",()=>s]);var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...i})});s.displayName="Textarea"},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},27612,e=>{"use strict";e.s(["Trash2",()=>t],27612);let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},88511,e=>{"use strict";e.s(["Edit",()=>t],88511);let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},43432,e=>{"use strict";e.s(["Phone",()=>t],43432);let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},63488,e=>{"use strict";e.s(["Mail",()=>t],63488);let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},55838,(e,t,r)=>{"use strict";var a=e.r(71645),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useState,n=a.useEffect,o=a.useLayoutEffect,u=a.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=i({inst:{value:r,getSnapshot:t}}),s=a[0].inst,c=a[1];return o(function(){s.value=r,s.getSnapshot=t,l(s)&&c({inst:s})},[e,r,t]),n(function(){return l(s)&&c({inst:s}),e(function(){l(s)&&c({inst:s})})},[e]),u(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},99676,e=>{"use strict";e.s(["Avatar",()=>S,"AvatarFallback",()=>F,"AvatarImage",()=>E],99676);var t=e.i(43476),r=e.i(71645),a=e.i(30030),s=e.i(30207),i=e.i(34620),n=e.i(48425),o=e.i(2239);function u(){return()=>{}}var l="Avatar",[c,d]=(0,a.createContextScope)(l),[p,f]=c(l),y=r.forwardRef((e,a)=>{let{__scopeAvatar:s,...i}=e,[o,u]=r.useState("idle");return(0,t.jsx)(p,{scope:s,imageLoadingStatus:o,onImageLoadingStatusChange:u,children:(0,t.jsx)(n.Primitive.span,{...i,ref:a})})});y.displayName=l;var m="AvatarImage",h=r.forwardRef((e,a)=>{let{__scopeAvatar:l,src:c,onLoadingStatusChange:d=()=>{},...p}=e,y=f(m,l),h=function(e,t){let{referrerPolicy:a,crossOrigin:s}=t,n=(0,o.useSyncExternalStore)(u,()=>!0,()=>!1),l=r.useRef(null),c=n?(l.current||(l.current=new window.Image),l.current):null,[d,p]=r.useState(()=>g(c,e));return(0,i.useLayoutEffect)(()=>{p(g(c,e))},[c,e]),(0,i.useLayoutEffect)(()=>{let e=e=>()=>{p(e)};if(!c)return;let t=e("loaded"),r=e("error");return c.addEventListener("load",t),c.addEventListener("error",r),a&&(c.referrerPolicy=a),"string"==typeof s&&(c.crossOrigin=s),()=>{c.removeEventListener("load",t),c.removeEventListener("error",r)}},[c,s,a]),d}(c,p),v=(0,s.useCallbackRef)(e=>{d(e),y.onImageLoadingStatusChange(e)});return(0,i.useLayoutEffect)(()=>{"idle"!==h&&v(h)},[h,v]),"loaded"===h?(0,t.jsx)(n.Primitive.img,{...p,ref:a,src:c}):null});h.displayName=m;var v="AvatarFallback",j=r.forwardRef((e,a)=>{let{__scopeAvatar:s,delayMs:i,...o}=e,u=f(v,s),[l,c]=r.useState(void 0===i);return r.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>c(!0),i);return()=>window.clearTimeout(e)}},[i]),l&&"loaded"!==u.imageLoadingStatus?(0,t.jsx)(n.Primitive.span,{...o,ref:a}):null});function g(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}j.displayName=v;var w=e.i(75157);let S=r.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(y,{ref:r,className:(0,w.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});S.displayName=y.displayName;let E=r.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(h,{ref:r,className:(0,w.cn)("aspect-square h-full w-full",a),...s})});E.displayName=h.displayName;let F=r.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(j,{ref:r,className:(0,w.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});F.displayName=j.displayName},927,e=>{"use strict";e.s(["useCreateSupplier",()=>w,"useCreateSupplierContact",()=>Q,"useCreateSupplierMaterial",()=>q,"useCreateSupplierProjectAssignment",()=>C,"useDeleteSupplier",()=>E,"useDeleteSupplierContact",()=>b,"useSupplier",()=>g,"useSupplierContacts",()=>F,"useSupplierMaterials",()=>k,"useSupplierProjects",()=>P,"useSuppliers",()=>j,"useUpdateSupplier",()=>S]);var t=e.i(66027),r=e.i(54616),a=e.i(12598),s=e.i(46696);let i={all:["suppliers"],lists:()=>[...i.all,"list"],list:e=>[...i.lists(),{filters:e}],details:()=>[...i.all,"detail"],detail:e=>[...i.details(),e]};async function n(){let e=await fetch("/api/suppliers");if(!e.ok)throw Error("Failed to fetch suppliers");return((await e.json()).items||[]).map(e=>({...e,org_name:e.name}))}async function o(e){let t=await fetch("/api/suppliers/".concat(e));if(!t.ok)throw Error("Failed to fetch supplier");return t.json()}async function u(e){let t={...e,name:e.org_name,org_name:void 0},r=await fetch("/api/suppliers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create supplier");let a=await r.json();return{...a,org_name:a.name}}async function l(e){let{id:t,...r}=e,a=await fetch("/api/suppliers/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to update supplier");return a.json()}async function c(e){if(!(await fetch("/api/suppliers/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete supplier")}async function d(e){let t=await fetch("/api/suppliers/".concat(e,"/contacts"));if(!t.ok)throw Error("Failed to fetch supplier contacts");return t.json()}async function p(e,t){let r=await fetch("/api/suppliers/".concat(e,"/contacts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create supplier contact");return r.json()}async function f(e,t){if(!(await fetch("/api/suppliers/".concat(e,"/contacts/").concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete supplier contact")}async function y(e,t){let r=new URL("/api/suppliers/".concat(e,"/materials"),window.location.origin);t&&r.searchParams.set("project_id",t);let a=await fetch(r.toString());if(!a.ok)throw Error("Failed to fetch supplier materials");return a.json()}async function m(e,t){let r=await fetch("/api/suppliers/".concat(e,"/materials"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error((await r.json().catch(()=>({error:"Unknown error"}))).error||"Failed to create supplier material (".concat(r.status,")"));return r.json()}async function h(e){let t=await fetch("/api/suppliers/".concat(e,"/projects"));if(!t.ok)throw Error("Failed to fetch supplier projects");return t.json()}async function v(e,t){let r=await fetch("/api/suppliers/".concat(e,"/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to assign supplier to project");return r.json()}function j(){return(0,t.useQuery)({queryKey:i.lists(),queryFn:n,staleTime:3e5})}function g(e){return(0,t.useQuery)({queryKey:i.detail(e),queryFn:()=>o(e),enabled:!!e,staleTime:3e5})}function w(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:u,onSuccess:t=>{e.setQueryData(i.lists(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e,t]}),e.invalidateQueries({queryKey:i.all}),s.toast.success("Supplier created successfully")},onError:e=>{s.toast.error("Failed to create supplier: ".concat(e.message))}})}function S(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:l,onSuccess:t=>{e.setQueryData(i.lists(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>e.id===t.id?t:e)}),e.setQueryData(i.detail(t.id),t),e.invalidateQueries({queryKey:i.all}),s.toast.success("Supplier updated successfully")},onError:e=>{s.toast.error("Failed to update supplier: ".concat(e.message))}})}function E(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:c,onSuccess:(t,r)=>{e.setQueryData(i.lists(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(e=>e.id!==r)}),e.removeQueries({queryKey:i.detail(r)}),e.invalidateQueries({queryKey:i.all}),s.toast.success("Supplier deleted successfully")},onError:e=>{s.toast.error("Failed to delete supplier: ".concat(e.message))}})}function F(e){return(0,t.useQuery)({queryKey:[...i.detail(e),"contacts"],queryFn:()=>d(e),enabled:!!e,staleTime:3e5})}function Q(e){let t=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:t=>p(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:[...i.detail(e),"contacts"]}),s.toast.success("Contact created successfully")},onError:e=>{s.toast.error("Failed to create contact: ".concat(e.message))}})}function b(e){let t=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:t=>f(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:[...i.detail(e),"contacts"]}),s.toast.success("Contact deleted successfully")},onError:e=>{s.toast.error("Failed to delete contact: ".concat(e.message))}})}function k(e,r){return(0,t.useQuery)({queryKey:[...i.detail(e),"materials",{projectId:r}],queryFn:()=>y(e,r),enabled:!!e,staleTime:3e5})}function q(e){let t=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:t=>m(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:[...i.detail(e),"materials"]}),s.toast.success("Material created successfully")},onError:e=>{s.toast.error("Failed to create material: ".concat(e.message))}})}function P(e){return(0,t.useQuery)({queryKey:[...i.detail(e),"projects"],queryFn:()=>h(e),enabled:!!e,staleTime:3e5})}function C(e){let t=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:t=>v(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:[...i.detail(e),"projects"]}),s.toast.success("Supplier assigned to project successfully")},onError:e=>{s.toast.error("Failed to assign supplier to project: ".concat(e.message))}})}}]);