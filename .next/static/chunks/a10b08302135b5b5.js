(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32661,e=>{"use strict";e.s(["useCreateProject",()=>d,"useDeleteProject",()=>u,"useProject",()=>c,"useProjectStats",()=>m,"useProjects",()=>i,"useUpdateProject",()=>o]);var s=e.i(66027),t=e.i(54616),a=e.i(12598),r=e.i(46696),l=e.i(41931);let n={all:["projects"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),e],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e]};function i(e){return(0,s.useQuery)({queryKey:n.list(e||{}),queryFn:()=>l.projectsApi.getProjects(e),staleTime:3e5})}function c(e){return(0,s.useQuery)({queryKey:n.detail(e),queryFn:()=>l.projectsApi.getProject(e),enabled:!!e,staleTime:3e5})}function d(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l.projectsApi.createProject(e),onSuccess:s=>{e.invalidateQueries({queryKey:n.lists()}),e.setQueryData(n.detail(s.id),s),r.toast.success("Project created successfully")},onError:e=>{r.toast.error("Failed to create project: ".concat(e.message))}})}function o(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>{let{id:s,data:t}=e;return l.projectsApi.updateProject(s,t)},onMutate:async s=>{let{id:t,data:a}=s;await e.cancelQueries({queryKey:n.detail(t)});let r=e.getQueryData(n.detail(t));return e.setQueryData(n.detail(t),e=>e?{...e,...a}:e),{previousProject:r}},onError:(s,t,a)=>{let{id:l}=t;(null==a?void 0:a.previousProject)&&e.setQueryData(n.detail(l),a.previousProject),r.toast.error("Failed to update project: ".concat(s.message))},onSuccess:s=>{e.invalidateQueries({queryKey:n.lists()}),r.toast.success("Project updated successfully")},onSettled:(s,t,a)=>{let{id:r}=a;e.invalidateQueries({queryKey:n.detail(r)})}})}function u(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l.projectsApi.deleteProject(e),onSuccess:(s,t)=>{e.removeQueries({queryKey:n.detail(t)}),e.invalidateQueries({queryKey:n.lists()}),r.toast.success("Project deleted successfully")},onError:e=>{r.toast.error("Failed to delete project: ".concat(e.message))}})}function m(e){return(0,s.useQuery)({queryKey:[...n.detail(e),"stats"],queryFn:async()=>{let s=await fetch("/api/projects/".concat(e,"/stats"));if(!s.ok)throw Error("Failed to fetch project statistics");return s.json()},staleTime:12e4,enabled:!!e})}},7233,e=>{"use strict";e.s(["Plus",()=>s],7233);let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},84774,e=>{"use strict";e.s(["Table",()=>r,"TableBody",()=>n,"TableCell",()=>d,"TableHead",()=>c,"TableHeader",()=>l,"TableRow",()=>i]);var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...l})})});r.displayName="Table";let l=t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...l})});l.displayName="TableHeader";let n=t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...l})});n.displayName="TableBody",t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...l})}).displayName="TableFooter";let i=t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...l})});i.displayName="TableRow";let c=t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...l})});c.displayName="TableHead";let d=t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...l})});d.displayName="TableCell",t.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...l})}).displayName="TableCaption"},27612,e=>{"use strict";e.s(["Trash2",()=>s],27612);let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},88511,e=>{"use strict";e.s(["Edit",()=>s],88511);let s=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},86536,e=>{"use strict";e.s(["Eye",()=>s],86536);let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},46897,e=>{"use strict";e.s(["MapPin",()=>s],46897);let s=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3116,e=>{"use strict";e.s(["Clock",()=>s],3116);let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},43432,e=>{"use strict";e.s(["Phone",()=>s],43432);let s=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},20306,e=>{"use strict";e.s(["useCreateCrew",()=>d,"useCreateTeam",()=>p,"useCrew",()=>c,"useDeleteCrew",()=>u,"useForemenUsers",()=>h,"useGlobalTeams",()=>m,"useProjectTeams",()=>x,"useTeams",()=>i,"useUpdateCrew",()=>o,"useUpdateTeam",()=>j]);var s=e.i(66027),t=e.i(54616),a=e.i(12598),r=e.i(46696),l=e.i(41931);let n={all:["teams"],crews:()=>[...n.all,"crews"],crew:e=>[...n.all,"crew",e]};function i(){return(0,s.useQuery)({queryKey:n.crews(),queryFn:async()=>{let e=await fetch("/api/crews");if(!e.ok)throw Error("Failed to fetch crews");return(await e.json()).crews||[]},staleTime:3e4})}function c(e){return(0,s.useQuery)({queryKey:n.crew(e),queryFn:()=>l.teamsApi.getCrew(e),enabled:!!e,staleTime:3e5})}function d(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l.teamsApi.createCrew(e),onSuccess:s=>{e.invalidateQueries({queryKey:n.crews()}),e.setQueryData(n.crew(s.id),s),r.toast.success("Team created successfully")},onError:e=>{r.toast.error("Failed to create team: ".concat(e.message))}})}function o(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>{let{id:s,data:t}=e;return l.teamsApi.updateCrew(s,t)},onMutate:async s=>{let{id:t,data:a}=s;await e.cancelQueries({queryKey:n.crew(t)});let r=e.getQueryData(n.crew(t));return e.setQueryData(n.crew(t),e=>e?{...e,...a}:e),{previousCrew:r}},onError:(s,t,a)=>{let{id:l}=t;(null==a?void 0:a.previousCrew)&&e.setQueryData(n.crew(l),a.previousCrew),r.toast.error("Failed to update team: ".concat(s.message))},onSuccess:()=>{e.invalidateQueries({queryKey:n.crews()}),r.toast.success("Team updated successfully")},onSettled:(s,t,a)=>{let{id:r}=a;e.invalidateQueries({queryKey:n.crew(r)})}})}function u(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l.teamsApi.deleteCrew(e),onSuccess:(s,t)=>{e.removeQueries({queryKey:n.crew(t)}),e.invalidateQueries({queryKey:n.crews()}),r.toast.success("Team deleted successfully")},onError:e=>{r.toast.error("Failed to delete team: ".concat(e.message))}})}function m(){return(0,s.useQuery)({queryKey:["global-teams"],queryFn:async()=>{let e=await fetch("/api/crews");if(!e.ok)throw Error("Failed to fetch global teams");let s=(await e.json()).crews||[],t={};return s.forEach(e=>{e.project_id&&(t[e.name]=(t[e.name]||0)+1)}),s.map(e=>{var s;return{id:e.id,name:e.name,foreman_name:(null==(s=e.foreman)?void 0:s.full_name)||e.foreman_name,is_active:"active"===e.status,project_count:t[e.name]||0,specialization:"mixed"}})}})}function h(){return(0,s.useQuery)({queryKey:["foremen-users"],queryFn:async()=>{let e=await fetch("/api/users?role=foreman&is_active=true");if(!e.ok){let e=await fetch("/api/users?role=pm&is_active=true");if(!e.ok)throw Error("Failed to fetch users");return(await e.json()).items||[]}let s=await e.json();if(0===s.items.length){let e=await fetch("/api/users?is_active=true");if(!e.ok)throw Error("Failed to fetch users");return((await e.json()).items||[]).filter(e=>"foreman"===e.role||"pm"===e.role)}return s.items||[]}})}function p(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:async e=>{let s=await fetch("/api/crews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).error||"Failed to create team");return s.json()},onSuccess:(s,t)=>{t.project_id&&(e.invalidateQueries({queryKey:["project-teams",t.project_id]}),e.invalidateQueries({queryKey:["project-preparation",t.project_id]})),e.invalidateQueries({queryKey:["global-teams"]}),e.invalidateQueries({queryKey:n.crews()}),r.toast.success(s.message||"Team created successfully")},onError:e=>{r.toast.error(e.message)}})}function x(e){return(0,s.useQuery)({queryKey:["project-teams",e],queryFn:async()=>{let s=await fetch("/api/crews?project_id=".concat(e));if(!s.ok)throw Error("Failed to fetch project teams");return(await s.json()).crews||[]},enabled:!!e})}function j(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:async e=>{let{id:s,data:t}=e,a=await fetch("/api/crews/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to update team");return a.json()},onSuccess:(s,t)=>{e.invalidateQueries({queryKey:["project-teams"]}),e.invalidateQueries({queryKey:["global-teams"]}),e.invalidateQueries({queryKey:n.crews()}),e.invalidateQueries({queryKey:["project-preparation"]}),r.toast.success(s.message||"Team updated successfully")},onError:e=>{r.toast.error(e.message)}})}},67757,e=>{"use strict";e.s(["useCompletedConnections",()=>f,"useCreateHouse",()=>o,"useDeleteHouse",()=>m,"useHouses",()=>c,"useInProgressConnections",()=>y,"usePendingConnections",()=>x,"useProjectHouses",()=>d,"useScheduleAppointment",()=>p,"useScheduledAppointments",()=>j,"useTodaysAppointments",()=>g,"useUpdateHouse",()=>u]);var s=e.i(66027),t=e.i(54616),a=e.i(12598),r=e.i(46696),l=e.i(41931);let n={all:["houses"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),e],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e],project:e=>[...n.all,"project",e],team:e=>[...n.all,"team",e]},i={all:["appointments"],lists:()=>[...i.all,"list"],list:e=>[...i.lists(),e],details:()=>[...i.all,"detail"],detail:e=>[...i.details(),e]};function c(e){return(0,s.useQuery)({queryKey:n.list(e||{}),queryFn:()=>l.housesApi.getHouses(e),staleTime:18e4})}function d(e){return(0,s.useQuery)({queryKey:n.project(e),queryFn:()=>l.housesApi.getProjectHouses(e),enabled:!!e,staleTime:18e4})}function o(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l.housesApi.createHouse(e),onSuccess:s=>{e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:n.project(s.project_id)}),e.setQueryData(n.detail(s.id),s),r.toast.success("House created successfully")},onError:e=>{r.toast.error("Failed to create house: ".concat(e.message))}})}function u(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>{let{id:s,data:t}=e;return l.housesApi.updateHouse(s,t)},onMutate:async s=>{let{id:t,data:a}=s;await e.cancelQueries({queryKey:n.detail(t)});let r=e.getQueryData(n.detail(t));return e.setQueryData(n.detail(t),e=>e?{...e,...a}:e),{previousHouse:r}},onError:(s,t,a)=>{let{id:l}=t;(null==a?void 0:a.previousHouse)&&e.setQueryData(n.detail(l),a.previousHouse),r.toast.error("Failed to update house: ".concat(s.message))},onSuccess:s=>{e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:n.project(s.project_id)}),s.assigned_team_id&&e.invalidateQueries({queryKey:n.team(s.assigned_team_id)}),r.toast.success("House updated successfully")},onSettled:(s,t,a)=>{let{id:r}=a;e.invalidateQueries({queryKey:n.detail(r)})}})}function m(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l.housesApi.deleteHouse(e),onSuccess:(s,t)=>{e.removeQueries({queryKey:n.detail(t)}),e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:n.all}),r.toast.success("House deleted successfully")},onError:e=>{r.toast.error("Failed to delete house: ".concat(e.message))}})}function h(e){return(0,s.useQuery)({queryKey:i.list(e||{}),queryFn:()=>l.appointmentsApi.getAppointments(e),staleTime:12e4})}function p(){let e=(0,a.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l.housesApi.scheduleAppointment(e),onSuccess:s=>{e.invalidateQueries({queryKey:i.lists()}),e.invalidateQueries({queryKey:n.detail(s.house_id)}),e.setQueryData(i.detail(s.id),s),r.toast.success("Appointment scheduled successfully")},onError:e=>{r.toast.error("Failed to schedule appointment: ".concat(e.message))}})}function x(){return c({status:"not_assigned",page:1,per_page:50})}function j(){return h({status:"scheduled",page:1,per_page:20})}function y(){return c({status:"in_progress",page:1,per_page:20})}function f(){return c({status:"connected",page:1,per_page:20})}function g(){let e=new Date().toISOString().split("T")[0];return h({scheduled_date_from:e,scheduled_date_to:e,page:1,per_page:50})}},25262,e=>{"use strict";e.s(["default",()=>A],25262);var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(7233),l=e.i(55436),n=e.i(94351),i=e.i(87316),c=e.i(46897),d=e.i(43432),o=e.i(3116),u=e.i(69638),m=e.i(63209),h=e.i(86536),p=e.i(88511),x=e.i(27612),j=e.i(75254);let y=(0,j.default)("calendar-plus",[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),f=(0,j.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),g=(0,j.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var v=e.i(19455),C=e.i(93479),w=e.i(15288),b=e.i(87486),N=e.i(84774),T=e.i(55146),Q=e.i(67489),_=e.i(77572),S=e.i(67757),H=e.i(32661),k=e.i(20306),q=e.i(71436);function A(){let e=(0,a.useRouter)(),{canManageConnections:j}=(0,q.usePermissions)(),A=(0,S.useDeleteHouse)();(0,S.useScheduleAppointment)();let[P,M]=(0,t.useState)(""),[F,K]=(0,t.useState)("all"),[D,E]=(0,t.useState)("all"),{data:I,isLoading:R,error:V}=(0,S.useHouses)({search:P||void 0,status:"all"===F?void 0:F,project_id:"all"===D?void 0:D,page:1,per_page:20}),{data:B}=(0,S.usePendingConnections)(),{data:O}=(0,S.useScheduledAppointments)(),{data:U}=(0,S.useInProgressConnections)(),{data:z}=(0,S.useCompletedConnections)(),{data:L}=(0,S.useTodaysAppointments)(),{data:G}=(0,H.useProjects)({page:1,per_page:100}),{data:J}=(0,k.useTeams)(),W=(null==I?void 0:I.items)||[],X=(null==G?void 0:G.items)||[],Y=async(e,s)=>{confirm('Are you sure you want to delete house "'.concat(s,'"? This action cannot be undone.'))&&await A.mutateAsync(e)};return V?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"House Connections"})}),(0,s.jsx)(w.Card,{children:(0,s.jsx)(w.CardContent,{className:"py-8",children:(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:"Failed to load house connections. Please try again later."})})})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"House Connections"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage house connection appointments and track progress"})]}),j&&(0,s.jsxs)(v.Button,{onClick:()=>e.push("/dashboard/houses/new"),children:[(0,s.jsx)(r.Plus,{className:"mr-2 h-4 w-4"}),"New House"]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-5",children:[(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Pending"}),(0,s.jsx)(m.AlertCircle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==B?void 0:B.length)||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting assignment"})]})]}),(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Scheduled"}),(0,s.jsx)(i.Calendar,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==O?void 0:O.total)||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Appointments set"})]})]}),(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"In Progress"}),(0,s.jsx)(o.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==U?void 0:U.length)||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active work"})]})]}),(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Completed"}),(0,s.jsx)(u.CheckCircle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==z?void 0:z.length)||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Connections done"})]})]}),(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.CardTitle,{className:"text-sm font-medium",children:"Today"}),(0,s.jsx)(i.Calendar,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==L?void 0:L.total)||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Appointments today"})]})]})]}),(0,s.jsxs)(_.Tabs,{defaultValue:"all",className:"space-y-4",children:[(0,s.jsxs)(_.TabsList,{children:[(0,s.jsxs)(_.TabsTrigger,{value:"all",children:["All Houses (",W.length,")"]}),(0,s.jsxs)(_.TabsTrigger,{value:"pending",children:["Pending (",(null==B?void 0:B.length)||0,")"]}),(0,s.jsxs)(_.TabsTrigger,{value:"scheduled",children:["Scheduled (",(null==O?void 0:O.total)||0,")"]}),(0,s.jsxs)(_.TabsTrigger,{value:"today",children:["Today (",(null==L?void 0:L.total)||0,")"]}),(0,s.jsxs)(_.TabsTrigger,{value:"completed",children:["Completed (",(null==z?void 0:z.length)||0,")"]})]}),(0,s.jsxs)(_.TabsContent,{value:"all",className:"space-y-6",children:[(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{children:[(0,s.jsx)(w.CardTitle,{children:"Filter Houses"}),(0,s.jsx)(w.CardDescription,{children:"Search and filter house connections by various criteria"})]}),(0,s.jsx)(w.CardContent,{children:(0,s.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(C.Input,{placeholder:"Search by house number, address, or customer...",value:P,onChange:e=>M(e.target.value),className:"pl-8"})]})}),(0,s.jsxs)(Q.Select,{value:D,onValueChange:E,children:[(0,s.jsx)(Q.SelectTrigger,{className:"w-48",children:(0,s.jsx)(Q.SelectValue,{placeholder:"Filter by project"})}),(0,s.jsxs)(Q.SelectContent,{children:[(0,s.jsx)(Q.SelectItem,{value:"all",children:"All Projects"}),X.map(e=>(0,s.jsx)(Q.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)(Q.Select,{value:F,onValueChange:e=>K(e),children:[(0,s.jsx)(Q.SelectTrigger,{className:"w-48",children:(0,s.jsx)(Q.SelectValue,{placeholder:"Filter by status"})}),(0,s.jsxs)(Q.SelectContent,{children:[(0,s.jsx)(Q.SelectItem,{value:"all",children:"All Status"}),(0,s.jsx)(Q.SelectItem,{value:"not_assigned",children:"Not Assigned"}),(0,s.jsx)(Q.SelectItem,{value:"appointment_scheduled",children:"Scheduled"}),(0,s.jsx)(Q.SelectItem,{value:"in_progress",children:"In Progress"}),(0,s.jsx)(Q.SelectItem,{value:"connected",children:"Connected"}),(0,s.jsx)(Q.SelectItem,{value:"partial_only",children:"Partial Only"}),(0,s.jsx)(Q.SelectItem,{value:"postponed",children:"Postponed"})]})]})]})})]}),(0,s.jsxs)(w.Card,{children:[(0,s.jsx)(w.CardHeader,{children:(0,s.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Home,{className:"h-5 w-5"}),"House Connections"]})}),(0,s.jsx)(w.CardContent,{children:R?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded flex-1"}),(0,s.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-20"}),(0,s.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-16"})]},t))}):0===W.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(n.Home,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No houses found"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:P||"all"!==F||"all"!==D?"No houses match your current filters.":"Get started by adding houses for connection."}),j&&(0,s.jsxs)(v.Button,{className:"mt-4",onClick:()=>e.push("/dashboard/houses/new"),children:[(0,s.jsx)(r.Plus,{className:"mr-2 h-4 w-4"}),"Add House"]})]}):(0,s.jsxs)(N.Table,{children:[(0,s.jsx)(N.TableHeader,{children:(0,s.jsxs)(N.TableRow,{children:[(0,s.jsx)(N.TableHead,{children:"House & Address"}),(0,s.jsx)(N.TableHead,{children:"Customer"}),(0,s.jsx)(N.TableHead,{children:"Project"}),(0,s.jsx)(N.TableHead,{children:"Connection Info"}),(0,s.jsx)(N.TableHead,{children:"Status"}),(0,s.jsx)(N.TableHead,{children:"Assigned Team"}),(0,s.jsx)(N.TableHead,{children:"Scheduled Date"}),(0,s.jsx)(N.TableHead,{className:"w-[100px]",children:"Actions"})]})}),(0,s.jsx)(N.TableBody,{children:W.map(t=>{var a,r;return(0,s.jsxs)(N.TableRow,{children:[(0,s.jsx)(N.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium",children:["#",t.house_number]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center space-x-1",children:[(0,s.jsx)(c.MapPin,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:t.address})]})]})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsxs)("div",{children:[t.customer_name&&(0,s.jsx)("div",{className:"font-medium text-sm",children:t.customer_name}),t.customer_contact&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center space-x-1",children:[(0,s.jsx)(d.Phone,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:t.customer_contact})]}),!t.customer_name&&!t.customer_contact&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})]})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:(null==(a=t.project)?void 0:a.name)||"Project ".concat(t.project_id)})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-sm",children:"full"===t.connection_type?"Full Connection":"Partial Connection"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["trench"===t.connection_method?"Trenching":"Mole"," • ",t.estimated_length_m,"m"]})]})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsx)(b.Badge,{variant:(e=>{switch(e){case"connected":return"default";case"in_progress":default:return"secondary";case"appointment_scheduled":case"partial_only":return"outline";case"postponed":return"destructive"}})(t.status),children:(e=>{switch(e){case"not_assigned":return"Not Assigned";case"appointment_scheduled":return"Scheduled";case"in_progress":return"In Progress";case"connected":return"Connected";case"partial_only":return"Partial Only";case"postponed":return"Postponed";default:return e}})(t.status)})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:(null==(r=t.assigned_team)?void 0:r.name)||"—"})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:t.scheduled_date?(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(i.Calendar,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:new Date(t.scheduled_date).toLocaleDateString()})]}):"—"})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsxs)(T.DropdownMenu,{children:[(0,s.jsx)(T.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsxs)(v.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,s.jsx)(p.Edit,{className:"h-4 w-4"})]})}),(0,s.jsxs)(T.DropdownMenuContent,{align:"end",children:[(0,s.jsx)(T.DropdownMenuLabel,{children:"Actions"}),(0,s.jsxs)(T.DropdownMenuItem,{onClick:()=>e.push("/dashboard/houses/".concat(t.id)),children:[(0,s.jsx)(h.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]}),j&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(T.DropdownMenuItem,{onClick:()=>e.push("/dashboard/houses/".concat(t.id,"/edit")),children:[(0,s.jsx)(p.Edit,{className:"mr-2 h-4 w-4"}),"Edit House"]}),"not_assigned"===t.status&&(0,s.jsxs)(T.DropdownMenuItem,{onClick:()=>e.push("/dashboard/houses/".concat(t.id,"/schedule")),children:[(0,s.jsx)(y,{className:"mr-2 h-4 w-4"}),"Schedule Appointment"]}),"appointment_scheduled"===t.status&&(0,s.jsxs)(T.DropdownMenuItem,{onClick:()=>e.push("/dashboard/houses/".concat(t.id,"/start")),children:[(0,s.jsx)(f,{className:"mr-2 h-4 w-4"}),"Start Connection"]}),"in_progress"===t.status&&(0,s.jsxs)(T.DropdownMenuItem,{onClick:()=>e.push("/dashboard/houses/".concat(t.id,"/complete")),children:[(0,s.jsx)(g,{className:"mr-2 h-4 w-4"}),"Complete Connection"]}),(0,s.jsx)(T.DropdownMenuSeparator,{}),(0,s.jsxs)(T.DropdownMenuItem,{className:"text-destructive",onClick:()=>Y(t.id,t.house_number),children:[(0,s.jsx)(x.Trash2,{className:"mr-2 h-4 w-4"}),"Delete House"]})]})]})]})})]},t.id)})})]})})]})]}),(0,s.jsx)(_.TabsContent,{value:"pending",className:"space-y-6",children:(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{children:[(0,s.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(m.AlertCircle,{className:"h-5 w-5"}),"Pending Connections"]}),(0,s.jsx)(w.CardDescription,{children:"Houses awaiting team assignment and appointment scheduling"})]}),(0,s.jsx)(w.CardContent,{children:(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Pending connections management will be implemented with team assignment interface."})})]})}),(0,s.jsx)(_.TabsContent,{value:"scheduled",className:"space-y-6",children:(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{children:[(0,s.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Calendar,{className:"h-5 w-5"}),"Scheduled Appointments"]}),(0,s.jsx)(w.CardDescription,{children:"Houses with confirmed appointment dates"})]}),(0,s.jsx)(w.CardContent,{children:(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Scheduled appointments calendar view will be implemented."})})]})}),(0,s.jsx)(_.TabsContent,{value:"today",className:"space-y-6",children:(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{children:[(0,s.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Clock,{className:"h-5 w-5"}),"Today's Appointments"]}),(0,s.jsx)(w.CardDescription,{children:"Appointments scheduled for today"})]}),(0,s.jsx)(w.CardContent,{children:(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Today's appointments dashboard will be implemented with real-time status updates."})})]})}),(0,s.jsx)(_.TabsContent,{value:"completed",className:"space-y-6",children:(0,s.jsxs)(w.Card,{children:[(0,s.jsxs)(w.CardHeader,{children:[(0,s.jsxs)(w.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.CheckCircle,{className:"h-5 w-5"}),"Completed Connections"]}),(0,s.jsx)(w.CardDescription,{children:"Successfully completed house connections"})]}),(0,s.jsx)(w.CardContent,{children:(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Completed connections history and statistics will be implemented."})})]})})]})]})}}]);