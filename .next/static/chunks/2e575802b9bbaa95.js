(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8478,e=>{"use strict";e.s(["default",()=>L],8478);var s=e.i(43476),r=e.i(71645),t=e.i(18566),a=e.i(53145),l=e.i(94814),i=e.i(81307),n=e.i(71689),d=e.i(7233),c=e.i(88511),o=e.i(27612),m=e.i(84614),x=e.i(43432),h=e.i(63488),j=e.i(7486),u=e.i(88844),p=e.i(61911);let g=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var N=e.i(39616),v=e.i(19455),f=e.i(93479),b=e.i(24687),C=e.i(15288),F=e.i(87486),y=e.i(99676),w=e.i(77572),_=e.i(76639),S=e.i(3133),I=e.i(67489),P=e.i(99375),A=e.i(927),M=e.i(71436),z=e.i(32661);let T=i.z.object({contact_name:i.z.string().min(1,"Contact name is required"),position:i.z.string().optional(),department:i.z.string().optional(),phone:i.z.string().optional(),email:i.z.string().email("Invalid email").optional().or(i.z.literal("")),is_primary:i.z.boolean().default(!1),notes:i.z.string().optional()}),k=i.z.object({material_name:i.z.string().min(1,"Material name is required"),category:i.z.string().optional(),unit:i.z.string().min(1,"Unit is required"),supplier_part_number:i.z.string().optional(),unit_price:i.z.number().positive("Price must be positive"),minimum_order_qty:i.z.number().positive("Minimum order quantity must be positive").default(1),lead_time_days:i.z.string().optional().transform(e=>""===e?void 0:parseInt(e)||void 0),is_preferred:i.z.boolean().default(!1),notes:i.z.string().optional()}),B=i.z.object({project_id:i.z.string().min(1,"Project is required"),notes:i.z.string().optional(),assigned_by:i.z.string().optional()});function L(){let e=(0,t.useParams)(),i=(0,t.useRouter)(),{canManageInventory:L}=(0,M.usePermissions)(),D=e.id,[q,H]=(0,r.useState)(!1),[O,U]=(0,r.useState)(!1),[V,E]=(0,r.useState)(!1),[R,K]=(0,r.useState)(null),{data:G,isLoading:Q}=(0,A.useSupplier)(D),{data:J=[],isLoading:W}=(0,A.useSupplierContacts)(D),{data:X=[],isLoading:Y}=(0,A.useSupplierMaterials)(D),{data:Z=[],isLoading:$}=(0,A.useSupplierProjects)(D),{data:ee,isLoading:es}=(0,z.useProjects)(),er=(null==ee?void 0:ee.items)||[],et=(0,A.useCreateSupplierContact)(D),ea=(0,A.useDeleteSupplierContact)(D),el=(0,A.useCreateSupplierMaterial)(D),ei=(0,A.useCreateSupplierProjectAssignment)(D),en=(0,a.useForm)({resolver:(0,l.zodResolver)(T),defaultValues:{contact_name:"",position:"",department:"",phone:"",email:"",is_primary:!1,notes:""}}),ed=(0,a.useForm)({resolver:(0,l.zodResolver)(k),defaultValues:{material_name:"",category:"",unit:"",supplier_part_number:"",unit_price:0,minimum_order_qty:1,lead_time_days:"",is_preferred:!1,notes:""}}),ec=(0,a.useForm)({resolver:(0,l.zodResolver)(B),defaultValues:{project_id:"",notes:"",assigned_by:""}}),eo=async e=>{try{await et.mutateAsync(e),H(!1),en.reset()}catch(e){}},em=async e=>{try{await el.mutateAsync(e),U(!1),ed.reset()}catch(e){}},ex=async e=>{try{await ei.mutateAsync(e),E(!1),ec.reset()}catch(e){}},eh=async e=>{if(window.confirm("Are you sure you want to delete this contact?"))try{await ea.mutateAsync(e)}catch(e){}};return Q?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(v.Button,{variant:"ghost",size:"sm",onClick:()=>i.back(),children:[(0,s.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsx)("div",{className:"h-8 bg-muted rounded w-64 animate-pulse"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:(0,s.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,s.jsxs)(C.Card,{className:"animate-pulse",children:[(0,s.jsx)(C.CardHeader,{children:(0,s.jsx)("div",{className:"h-6 bg-muted rounded w-48"})}),(0,s.jsxs)(C.CardContent,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-4 bg-muted rounded"}),(0,s.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"})]})]})})})]}):G?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(v.Button,{variant:"ghost",size:"sm",onClick:()=>i.back(),children:[(0,s.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:G.org_name}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Supplier Details & Management"})]})]}),L&&(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(v.Button,{variant:"outline",children:[(0,s.jsx)(N.Settings,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,s.jsxs)(v.Button,{children:[(0,s.jsx)(c.Edit,{className:"mr-2 h-4 w-4"}),"Edit Supplier"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(w.Tabs,{defaultValue:"overview",className:"space-y-6",children:[(0,s.jsxs)(w.TabsList,{children:[(0,s.jsx)(w.TabsTrigger,{value:"overview",children:"Overview"}),(0,s.jsx)(w.TabsTrigger,{value:"contacts",children:"Contacts"}),(0,s.jsx)(w.TabsTrigger,{value:"materials",children:"Materials"}),(0,s.jsx)(w.TabsTrigger,{value:"projects",children:"Projects"})]}),(0,s.jsx)(w.TabsContent,{value:"overview",className:"space-y-6",children:(0,s.jsxs)(C.Card,{children:[(0,s.jsx)(C.CardHeader,{children:(0,s.jsx)(C.CardTitle,{children:"Supplier Information"})}),(0,s.jsxs)(C.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Organization"}),(0,s.jsx)("p",{className:"text-sm",children:G.org_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),(0,s.jsx)(F.Badge,{variant:G.is_active?"default":"secondary",children:G.is_active?"Active":"Inactive"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Primary Contact"}),(0,s.jsx)("p",{className:"text-sm",children:G.contact_person})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),(0,s.jsx)("p",{className:"text-sm",children:G.phone||"Not provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,s.jsx)("p",{className:"text-sm",children:G.email||"Not provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),(0,s.jsx)("p",{className:"text-sm",children:G.address||"Not provided"})]})]}),G.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),(0,s.jsx)("p",{className:"text-sm",children:G.notes})]})]})]})}),(0,s.jsx)(w.TabsContent,{value:"contacts",className:"space-y-6",children:(0,s.jsxs)(C.Card,{children:[(0,s.jsxs)(C.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C.CardTitle,{children:"Contact Persons"}),(0,s.jsx)(C.CardDescription,{children:"Manage contacts for this supplier"})]}),L&&(0,s.jsxs)(_.Dialog,{open:q,onOpenChange:H,children:[(0,s.jsx)(_.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(v.Button,{size:"sm",children:[(0,s.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Add Contact"]})}),(0,s.jsxs)(_.DialogContent,{children:[(0,s.jsxs)(_.DialogHeader,{children:[(0,s.jsx)(_.DialogTitle,{children:"Add New Contact"}),(0,s.jsxs)(_.DialogDescription,{children:["Add a new contact person for ",G.org_name]})]}),(0,s.jsx)(S.Form,{...en,children:(0,s.jsxs)("form",{onSubmit:en.handleSubmit(eo),className:"space-y-4",children:[(0,s.jsx)(S.FormField,{control:en.control,name:"contact_name",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Contact Name *"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"e.g., John Smith",...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(S.FormField,{control:en.control,name:"position",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Position"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"e.g., Sales Manager",...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsx)(S.FormField,{control:en.control,name:"department",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Department"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"e.g., Sales",...r})}),(0,s.jsx)(S.FormMessage,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(S.FormField,{control:en.control,name:"phone",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Phone"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"+1234567890",...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsx)(S.FormField,{control:en.control,name:"email",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Email"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"contact@company.com",...r})}),(0,s.jsx)(S.FormMessage,{})]})}})]}),(0,s.jsx)(S.FormField,{control:en.control,name:"is_primary",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(S.FormLabel,{children:"Primary Contact"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Set as the main contact for this supplier"})]}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(P.Switch,{checked:r.value,onCheckedChange:r.onChange})})]})}}),(0,s.jsx)(S.FormField,{control:en.control,name:"notes",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Notes"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(b.Textarea,{placeholder:"Additional notes...",rows:2,...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsxs)(_.DialogFooter,{children:[(0,s.jsx)(v.Button,{type:"button",variant:"outline",onClick:()=>H(!1),children:"Cancel"}),(0,s.jsx)(v.Button,{type:"submit",children:"Add Contact"})]})]})})]})]})]}),(0,s.jsx)(C.CardContent,{children:W?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0].map((e,r)=>(0,s.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg animate-pulse",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-muted rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-muted rounded w-32 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-muted rounded w-24"})]})]})},r))}):0===J.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(m.User,{className:"mx-auto h-8 w-8 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No contacts"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Get started by adding a contact person."}),L&&(0,s.jsxs)(v.Button,{className:"mt-4",onClick:()=>H(!0),children:[(0,s.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Add Contact"]})]}):(0,s.jsx)("div",{className:"space-y-4",children:J.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(y.Avatar,{children:(0,s.jsx)(y.AvatarFallback,{children:(0,s.jsx)(m.User,{className:"h-4 w-4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.contact_name}),e.is_primary&&(0,s.jsxs)(F.Badge,{variant:"default",className:"text-xs",children:[(0,s.jsx)(g,{className:"h-3 w-3 mr-1"}),"Primary"]})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.position," • ",e.department]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground mt-1",children:[e.phone&&(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(x.Phone,{className:"h-3 w-3 mr-1"}),e.phone]}),e.email&&(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(h.Mail,{className:"h-3 w-3 mr-1"}),e.email]})]})]})]}),L&&(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(v.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(c.Edit,{className:"h-3 w-3"})}),(0,s.jsx)(v.Button,{variant:"ghost",size:"sm",onClick:()=>eh(e.id),children:(0,s.jsx)(o.Trash2,{className:"h-3 w-3"})})]})]},e.id))})})]})}),(0,s.jsx)(w.TabsContent,{value:"materials",className:"space-y-6",children:(0,s.jsxs)(C.Card,{children:[(0,s.jsxs)(C.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C.CardTitle,{children:"Supplier Materials"}),(0,s.jsx)(C.CardDescription,{children:"Materials and equipment available from this supplier"})]}),L&&(0,s.jsxs)(v.Button,{size:"sm",onClick:()=>U(!0),children:[(0,s.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Add Material"]})]}),(0,s.jsx)(C.CardContent,{children:Y?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0].map((e,r)=>(0,s.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg animate-pulse",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-muted rounded-lg"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-muted rounded w-48 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-muted rounded w-32"})]})]})},r))}):0===X.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(u.Package,{className:"mx-auto h-8 w-8 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No materials"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Get started by adding materials or equipment to this supplier."}),L&&(0,s.jsxs)(v.Button,{className:"mt-4",onClick:()=>U(!0),children:[(0,s.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Add Material"]})]}):(0,s.jsx)("div",{className:"space-y-4",children:X.map(e=>{var r,t,a;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-muted rounded-lg flex items-center justify-center",children:(0,s.jsx)(u.Package,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:(null==(r=e.material)?void 0:r.name)||e.material_name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["€",e.unit_price," per ",(null==(t=e.material)?void 0:t.unit)||e.material_unit," • Min order: ",e.minimum_order_qty," ",(null==(a=e.material)?void 0:a.unit)||e.material_unit]}),e.supplier_part_number&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Part #: ",e.supplier_part_number]}),e.is_preferred&&(0,s.jsx)(F.Badge,{variant:"secondary",className:"text-xs",children:"Preferred"})]})]}),L&&(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(v.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(c.Edit,{className:"h-3 w-3"})}),(0,s.jsx)(v.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(o.Trash2,{className:"h-3 w-3"})})]})]},e.id)})})})]})}),(0,s.jsx)(w.TabsContent,{value:"projects",className:"space-y-6",children:(0,s.jsxs)(C.Card,{children:[(0,s.jsxs)(C.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C.CardTitle,{children:"Assigned Projects"}),(0,s.jsx)(C.CardDescription,{children:"Projects where this supplier is assigned"})]}),L&&(0,s.jsxs)(v.Button,{size:"sm",onClick:()=>E(!0),children:[(0,s.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Assign to Project"]})]}),(0,s.jsx)(C.CardContent,{children:$?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0].map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg animate-pulse",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-muted rounded w-56 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-muted rounded w-32"})]}),(0,s.jsx)("div",{className:"h-6 w-16 bg-muted rounded"})]},r))}):0===Z.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(j.Building2,{className:"mx-auto h-8 w-8 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No project assignments"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Assign this supplier to projects to track material orders."}),L&&(0,s.jsxs)(v.Button,{className:"mt-4",onClick:()=>E(!0),children:[(0,s.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Assign to Project"]})]}):(0,s.jsx)("div",{className:"space-y-4",children:Z.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.project_name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Assigned on ",e.assigned_at?new Date(e.assigned_at).toLocaleDateString():"Unknown"]}),e.notes&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.notes})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(F.Badge,{variant:"active"===e.status?"default":"secondary",children:e.status}),L&&(0,s.jsx)(v.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(c.Edit,{className:"h-3 w-3"})})]})]},e.id))})})]})})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(C.Card,{children:[(0,s.jsx)(C.CardHeader,{children:(0,s.jsx)(C.CardTitle,{children:"Quick Stats"})}),(0,s.jsxs)(C.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:"Contacts"})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:J.length})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:"Materials"})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:X.length})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:"Projects"})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:Z.length})]})]})]}),(0,s.jsxs)(C.Card,{children:[(0,s.jsx)(C.CardHeader,{children:(0,s.jsx)(C.CardTitle,{children:"Recent Activity"})}),(0,s.jsx)(C.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Material order placed"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"2 days ago"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Contact updated"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"1 week ago"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Assigned to new project"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"2 weeks ago"})]})]})})]})]})]}),(0,s.jsx)(_.Dialog,{open:O,onOpenChange:U,children:(0,s.jsxs)(_.DialogContent,{className:"max-w-2xl",children:[(0,s.jsxs)(_.DialogHeader,{children:[(0,s.jsx)(_.DialogTitle,{children:"Add New Material"}),(0,s.jsxs)(_.DialogDescription,{children:["Add a new material or equipment item for ",G.org_name]})]}),(0,s.jsx)(S.Form,{...ed,children:(0,s.jsxs)("form",{onSubmit:ed.handleSubmit(em),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(S.FormField,{control:ed.control,name:"material_name",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Material Name *"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"e.g., Fiber optic cable, Cable duct",...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsx)(S.FormField,{control:ed.control,name:"category",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Category"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"e.g., Cables, Equipment",...r})}),(0,s.jsx)(S.FormMessage,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(S.FormField,{control:ed.control,name:"unit",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Unit *"}),(0,s.jsxs)(I.Select,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(I.SelectTrigger,{children:(0,s.jsx)(I.SelectValue,{placeholder:"Select unit"})})}),(0,s.jsxs)(I.SelectContent,{children:[(0,s.jsx)(I.SelectItem,{value:"meter",children:"Meter"}),(0,s.jsx)(I.SelectItem,{value:"piece",children:"Piece"}),(0,s.jsx)(I.SelectItem,{value:"box",children:"Box"}),(0,s.jsx)(I.SelectItem,{value:"roll",children:"Roll"}),(0,s.jsx)(I.SelectItem,{value:"kg",children:"Kilogram"}),(0,s.jsx)(I.SelectItem,{value:"ton",children:"Ton"}),(0,s.jsx)(I.SelectItem,{value:"m3",children:"Cubic Meter"}),(0,s.jsx)(I.SelectItem,{value:"liter",children:"Liter"}),(0,s.jsx)(I.SelectItem,{value:"pallet",children:"Pallet"})]})]}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsx)(S.FormField,{control:ed.control,name:"supplier_part_number",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Supplier Part Number"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{placeholder:"Optional part number",...r})}),(0,s.jsx)(S.FormMessage,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(S.FormField,{control:ed.control,name:"unit_price",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Unit Price (EUR) *"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{type:"number",step:"0.01",placeholder:"0.00",...r,onChange:e=>r.onChange(parseFloat(e.target.value)||0)})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsx)(S.FormField,{control:ed.control,name:"minimum_order_qty",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Minimum Order Quantity *"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{type:"number",placeholder:"1",...r,onChange:e=>r.onChange(parseInt(e.target.value)||1)})}),(0,s.jsx)(S.FormMessage,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(S.FormField,{control:ed.control,name:"lead_time_days",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Lead Time (Days)"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(f.Input,{type:"number",placeholder:"Optional lead time",...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsx)(S.FormField,{control:ed.control,name:"is_preferred",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(S.FormLabel,{children:"Preferred Supplier"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Mark this as preferred supplier for this material"})]}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(P.Switch,{checked:r.value,onCheckedChange:r.onChange})})]})}})]}),(0,s.jsx)(S.FormField,{control:ed.control,name:"notes",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Notes"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(b.Textarea,{placeholder:"Additional notes about this material...",rows:3,...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsxs)(_.DialogFooter,{children:[(0,s.jsx)(v.Button,{type:"button",variant:"outline",onClick:()=>U(!1),children:"Cancel"}),(0,s.jsx)(v.Button,{type:"submit",disabled:el.isPending,children:el.isPending?"Adding...":"Add Material"})]})]})})]})}),(0,s.jsx)(_.Dialog,{open:V,onOpenChange:E,children:(0,s.jsxs)(_.DialogContent,{children:[(0,s.jsxs)(_.DialogHeader,{children:[(0,s.jsx)(_.DialogTitle,{children:"Assign to Project"}),(0,s.jsxs)(_.DialogDescription,{children:["Assign ",G.org_name," to a project for material tracking"]})]}),(0,s.jsx)(S.Form,{...ec,children:(0,s.jsxs)("form",{onSubmit:ec.handleSubmit(ex),className:"space-y-4",children:[(0,s.jsx)(S.FormField,{control:ec.control,name:"project_id",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Project *"}),(0,s.jsxs)(I.Select,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(I.SelectTrigger,{children:(0,s.jsx)(I.SelectValue,{placeholder:"Select a project"})})}),(0,s.jsx)(I.SelectContent,{children:es?(0,s.jsx)(I.SelectItem,{value:"",disabled:!0,children:"Loading projects..."}):0===er.length?(0,s.jsx)(I.SelectItem,{value:"",disabled:!0,children:"No projects available"}):er.filter(e=>!Z.some(s=>s.project_id===e.id)).map(e=>(0,s.jsxs)(I.SelectItem,{value:e.id,children:[e.name," - ",e.customer||"No customer"]},e.id))})]}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsx)(S.FormField,{control:ec.control,name:"notes",render:e=>{let{field:r}=e;return(0,s.jsxs)(S.FormItem,{children:[(0,s.jsx)(S.FormLabel,{children:"Notes"}),(0,s.jsx)(S.FormControl,{children:(0,s.jsx)(b.Textarea,{placeholder:"Assignment notes...",rows:3,...r})}),(0,s.jsx)(S.FormMessage,{})]})}}),(0,s.jsxs)(_.DialogFooter,{children:[(0,s.jsx)(v.Button,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,s.jsx)(v.Button,{type:"submit",disabled:ei.isPending,children:ei.isPending?"Assigning...":"Assign Project"})]})]})})]})})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)(v.Button,{variant:"ghost",size:"sm",onClick:()=>i.back(),children:[(0,s.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,s.jsx)(C.Card,{children:(0,s.jsxs)(C.CardContent,{className:"text-center py-12",children:[(0,s.jsx)(j.Building2,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"Supplier not found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"The supplier you're looking for doesn't exist."})]})})]})}}]);