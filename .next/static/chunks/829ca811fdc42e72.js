(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,e=>{"use strict";e.s(["MapPin",()=>t],46897);let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},24687,e=>{"use strict";e.s(["Textarea",()=>s]);var t=e.i(43476),a=e.i(71645),r=e.i(75157);let s=a.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...i})});s.displayName="Textarea"},88511,e=>{"use strict";e.s(["Edit",()=>t],88511);let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3116,e=>{"use strict";e.s(["Clock",()=>t],3116);let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},31278,e=>{"use strict";e.s(["Loader2",()=>t],31278);let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},72436,e=>{"use strict";e.s(["Separator",()=>d],72436);var t=e.i(43476),a=e.i(71645),r=e.i(48425),s="horizontal",i=["horizontal","vertical"],l=a.forwardRef((e,a)=>{var l;let{decorative:n,orientation:d=s,...o}=e,c=(l=d,i.includes(l))?d:s;return(0,t.jsx)(r.Primitive.div,{"data-orientation":c,...n?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:a})});l.displayName="Separator";var n=e.i(75157);let d=a.forwardRef((e,a)=>{let{className:r,orientation:s="horizontal",decorative:i=!0,...d}=e;return(0,t.jsx)(l,{ref:a,decorative:i,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...d})});d.displayName=l.displayName},64483,49933,e=>{"use strict";e.s(["useCreateMaterialOrderWithBudget",()=>h,"useDeleteMaterialOrder",()=>j,"useMaterialOrder",()=>p,"useMaterialOrders",()=>x,"useUpdateMaterialOrder",()=>f],64483);var t=e.i(66027),a=e.i(54616),r=e.i(12598),s=e.i(46696);function i(e){return(0,t.useQuery)({queryKey:["material-order-budget",e],queryFn:async()=>{let t=await fetch("/api/materials/orders/".concat(e,"/budget"));if(!t.ok)throw Error("Failed to fetch budget impact");return t.json()},enabled:!!e})}function l(){let e=function(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{orderId:t,data:a}=e,r=await fetch("/api/materials/orders/".concat(t,"/budget"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error((await r.json()).error||"Failed to create budget transaction");return r.json()},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["material-order-budget",a.orderId]}),e.invalidateQueries({queryKey:["material-orders"]}),e.invalidateQueries({queryKey:["financial-summary"]}),e.invalidateQueries({queryKey:["project",t.project_id]}),s.toast.success("Budget transaction created: €".concat(t.amount_deducted.toFixed(2)," deducted"))},onError:e=>{s.toast.error(e.message||"Failed to create budget transaction")}})}();return{deductFromBudget:async function(t){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!a)return null;try{return await e.mutateAsync({orderId:t,data:{deduct_from_budget:!0}})}catch(e){return console.error("Auto budget deduction failed:",e),null}},isLoading:e.isPending,error:e.error}}e.s(["useAutoBudgetDeduction",()=>l,"useMaterialOrderBudgetImpact",()=>i],49933);let n={all:["material-orders"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),e],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e]};async function d(e){let t=new URLSearchParams;(null==e?void 0:e.project_id)&&t.set("project_id",e.project_id),(null==e?void 0:e.supplier_id)&&t.set("supplier_id",e.supplier_id),(null==e?void 0:e.status)&&t.set("status",e.status),(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.per_page)&&t.set("per_page",e.per_page.toString());let a=await fetch("/api/materials/orders?".concat(t.toString()));if(!a.ok)throw Error("Failed to fetch material orders");return a.json()}async function o(e){let t=await fetch("/api/materials/orders/".concat(e));if(!t.ok)throw Error("Failed to fetch material order");return t.json()}async function c(e){let t=await fetch("/api/materials/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to create material order");return t.json()}async function u(e,t){let a=await fetch("/api/materials/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to update material order");return a.json()}async function m(e){let t=await fetch("/api/materials/orders/".concat(e),{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete material order")}function x(e){return(0,t.useQuery)({queryKey:n.list(e||{}),queryFn:()=>d(e),staleTime:3e5})}function p(e){return(0,t.useQuery)({queryKey:n.detail(e),queryFn:()=>o(e),enabled:!!e,staleTime:3e5})}function h(){let e=function(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:c,onSuccess:t=>{e.invalidateQueries({queryKey:n.lists()}),e.setQueryData(n.detail(t.id),t),s.toast.success("Material order created successfully")},onError:e=>{s.toast.error("Failed to create order: ".concat(e.message))}})}(),{deductFromBudget:t}=l();return(0,a.useMutation)({mutationFn:async a=>{let{deduct_from_budget:r=!0,...i}=a,l=await e.mutateAsync(i);if(r&&l.project_id)try{await t(l.id,!0)}catch(e){console.warn("Budget deduction failed, but order was created:",e),s.toast.warning("Order created but budget deduction failed. Please manage manually.")}return l},onSuccess:e=>{s.toast.success("Order created and €".concat(e.total_cost_eur.toFixed(2)," deducted from project budget"))},onError:e=>{s.toast.error("Failed to create order: ".concat(e.message))}})}function f(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>{let{id:t,data:a}=e;return u(t,a)},onSuccess:t=>{e.setQueryData(n.detail(t.id),t),e.invalidateQueries({queryKey:n.lists()}),s.toast.success("Order updated successfully")},onError:e=>{s.toast.error("Failed to update order: ".concat(e.message))}})}function j(){let e=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:m,onSuccess:(t,a)=>{e.removeQueries({queryKey:n.detail(a)}),e.invalidateQueries({queryKey:n.lists()}),s.toast.success("Order deleted successfully")},onError:e=>{s.toast.error("Failed to delete order: ".concat(e.message))}})}},73884,e=>{"use strict";e.s(["XCircle",()=>t],73884);let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},68499,e=>{"use strict";e.s(["AlertDialog",()=>O,"AlertDialogAction",()=>L,"AlertDialogCancel",()=>Q,"AlertDialogContent",()=>E,"AlertDialogDescription",()=>B,"AlertDialogFooter",()=>R,"AlertDialogHeader",()=>P,"AlertDialogTitle",()=>q,"AlertDialogTrigger",()=>F],68499);var t=e.i(43476),a=e.i(71645),r=e.i(30030),s=e.i(20783),i=e.i(26999),l=e.i(81140),n=e.i(91918),d="AlertDialog",[o,c]=(0,r.createContextScope)(d,[i.createDialogScope]),u=(0,i.createDialogScope)(),m=e=>{let{__scopeAlertDialog:a,...r}=e,s=u(a);return(0,t.jsx)(i.Root,{...s,...r,modal:!0})};m.displayName=d;var x=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=u(r);return(0,t.jsx)(i.Trigger,{...l,...s,ref:a})});x.displayName="AlertDialogTrigger";var p=e=>{let{__scopeAlertDialog:a,...r}=e,s=u(a);return(0,t.jsx)(i.Portal,{...s,...r})};p.displayName="AlertDialogPortal";var h=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=u(r);return(0,t.jsx)(i.Overlay,{...l,...s,ref:a})});h.displayName="AlertDialogOverlay";var f="AlertDialogContent",[j,g]=o(f),y=(0,n.createSlottable)("AlertDialogContent"),v=a.forwardRef((e,r)=>{let{__scopeAlertDialog:n,children:d,...o}=e,c=u(n),m=a.useRef(null),x=(0,s.useComposedRefs)(r,m),p=a.useRef(null);return(0,t.jsx)(i.WarningProvider,{contentName:f,titleName:N,docsSlug:"alert-dialog",children:(0,t.jsx)(j,{scope:n,cancelRef:p,children:(0,t.jsxs)(i.Content,{role:"alertdialog",...c,...o,ref:x,onOpenAutoFocus:(0,l.composeEventHandlers)(o.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=p.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(y,{children:d}),(0,t.jsx)(A,{contentRef:m})]})})})});v.displayName=f;var N="AlertDialogTitle",b=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=u(r);return(0,t.jsx)(i.Title,{...l,...s,ref:a})});b.displayName=N;var C="AlertDialogDescription",w=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=u(r);return(0,t.jsx)(i.Description,{...l,...s,ref:a})});w.displayName=C;var _=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=u(r);return(0,t.jsx)(i.Close,{...l,...s,ref:a})});_.displayName="AlertDialogAction";var D="AlertDialogCancel",k=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...l}=e,{cancelRef:n}=g(D,r),d=u(r),o=(0,s.useComposedRefs)(a,n);return(0,t.jsx)(i.Close,{...d,...l,ref:o})});k.displayName=D;var A=e=>{let{contentRef:t}=e,r="`".concat(f,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(f,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(f,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},S=e.i(75157),T=e.i(19455);let O=m,F=x,M=a.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(h,{className:(0,S.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:a})});M.displayName=h.displayName;let E=a.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsxs)(p,{children:[(0,t.jsx)(M,{}),(0,t.jsx)(v,{ref:a,className:(0,S.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});E.displayName=v.displayName;let P=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,S.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...r})};P.displayName="AlertDialogHeader";let R=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,S.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r})};R.displayName="AlertDialogFooter";let q=a.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(b,{ref:a,className:(0,S.cn)("text-lg font-semibold",r),...s})});q.displayName=b.displayName;let B=a.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(w,{ref:a,className:(0,S.cn)("text-sm text-muted-foreground",r),...s})});B.displayName=w.displayName;let L=a.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(_,{ref:a,className:(0,S.cn)((0,T.buttonVariants)(),r),...s})});L.displayName=_.displayName;let Q=a.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(k,{ref:a,className:(0,S.cn)((0,T.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});Q.displayName=k.displayName},78917,e=>{"use strict";e.s(["ExternalLink",()=>t],78917);let t=(0,e.i(75254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},7343,e=>{"use strict";e.s(["default",()=>T]);var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(71689),i=e.i(87316),l=e.i(69638),n=e.i(3116),d=e.i(88511),o=e.i(78917),c=e.i(88844),u=e.i(46897),m=e.i(7486),x=e.i(84614),p=e.i(78583),h=e.i(78894),f=e.i(15788),j=e.i(73884),g=e.i(19455),y=e.i(15288),v=e.i(87486),N=e.i(72436),b=e.i(93479),C=e.i(10204),w=e.i(24687),_=e.i(67489),D=e.i(68499),k=e.i(31278),A=e.i(64483),S=e.i(71436);function T(e){let{params:T}=e,O=(0,r.useRouter)(),{id:F}=(0,a.use)(T),{canManageInventory:M}=(0,S.usePermissions)(),[E,P]=(0,a.useState)(!1),[R,q]=(0,a.useState)({status:"",actual_delivery_date:"",notes:""}),{data:B,isLoading:L,error:Q}=(0,A.useMaterialOrder)(F),z=(0,A.useUpdateMaterialOrder)(),I=(0,A.useDeleteMaterialOrder)(),U=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e),K=e=>e?new Date(e).toLocaleDateString("de-DE"):"—",H=async()=>{if(B)try{await z.mutateAsync({id:B.id,data:{status:R.status,actual_delivery_date:R.actual_delivery_date||void 0,notes:R.notes||void 0}}),P(!1)}catch(e){console.error("Failed to update order:",e)}},V=async(e,t)=>{if(B)try{await z.mutateAsync({id:B.id,data:{status:e,actual_delivery_date:t||void 0,notes:B.notes||void 0}})}catch(e){console.error("Failed to update order:",e)}},J=async()=>{if(B)try{await I.mutateAsync(B.id),O.push("/dashboard/materials")}catch(e){console.error("Failed to delete order:",e)}};return L?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin"})}):Q||!B?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>O.back(),children:[(0,t.jsx)(s.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back"]})}),(0,t.jsx)(y.Card,{children:(0,t.jsx)(y.CardContent,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(h.AlertTriangle,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,t.jsx)("h3",{className:"mt-2 text-lg font-semibold",children:"Order not found"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"The material order you're looking for doesn't exist or you don't have permission to view it."})]})})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>O.back(),children:[(0,t.jsx)(s.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold tracking-tight",children:["Order #",B.id.slice(0,8)]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Material order details and management"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{let a={pending:{variant:"outline",icon:n.Clock,color:"text-yellow-600"},ordered:{variant:"secondary",icon:f.Truck,color:"text-blue-600"},delivered:{variant:"default",icon:l.CheckCircle,color:"text-green-600"},cancelled:{variant:"destructive",icon:j.XCircle,color:"text-red-600"},draft:{variant:"outline",icon:p.FileText,color:"text-gray-600"}},r=a[e]||a.pending,s=r.icon;return(0,t.jsxs)(v.Badge,{variant:r.variant,children:[(0,t.jsx)(s,{className:"mr-1 h-3 w-3 ".concat(r.color)}),e.charAt(0).toUpperCase()+e.slice(1)]})})(B.status),M&&!E&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(g.Button,{variant:"outline",onClick:()=>{B&&(q({status:B.status,actual_delivery_date:B.actual_delivery_date||"",notes:B.notes||""}),P(!0))},children:[(0,t.jsx)(d.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),("draft"===B.status||"pending"===B.status)&&(0,t.jsxs)(D.AlertDialog,{children:[(0,t.jsx)(D.AlertDialogTrigger,{asChild:!0,children:(0,t.jsxs)(g.Button,{variant:"destructive",children:[(0,t.jsx)(j.XCircle,{className:"mr-2 h-4 w-4"}),"Delete"]})}),(0,t.jsxs)(D.AlertDialogContent,{children:[(0,t.jsxs)(D.AlertDialogHeader,{children:[(0,t.jsx)(D.AlertDialogTitle,{children:"Delete Material Order"}),(0,t.jsx)(D.AlertDialogDescription,{children:"Are you sure you want to delete this material order? This action cannot be undone. Only draft and pending orders can be deleted."})]}),(0,t.jsxs)(D.AlertDialogFooter,{children:[(0,t.jsx)(D.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(D.AlertDialogAction,{onClick:J,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Order"})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(y.Card,{children:[(0,t.jsx)(y.CardHeader,{children:(0,t.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Package,{className:"h-5 w-5"}),"Order Information"]})}),(0,t.jsxs)(y.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Material"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Material Type:"}),(0,t.jsx)("span",{className:"font-medium",children:B.material_type||"—"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"SKU:"}),(0,t.jsx)("span",{className:"font-mono text-sm",children:B.material_sku||"—"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unit:"}),(0,t.jsx)("span",{children:B.material_unit||"—"})]})]})]}),(0,t.jsx)(N.Separator,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Quantity"}),(0,t.jsxs)("p",{className:"font-medium",children:[B.quantity," ",B.material_unit||"units"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Unit Price"}),(0,t.jsx)("p",{className:"font-medium",children:U(B.unit_price_eur)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Delivery Cost"}),(0,t.jsx)("p",{className:"font-medium",children:U(B.delivery_cost_eur||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Total Cost"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:U(B.total_cost_eur)})]})]}),(0,t.jsx)(N.Separator,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Order Date"}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Calendar,{className:"h-4 w-4"}),K(B.order_date)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Expected Delivery"}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Calendar,{className:"h-4 w-4"}),K(B.expected_delivery_date)]})]}),B.actual_delivery_date&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Actual Delivery"}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.CheckCircle,{className:"h-4 w-4 text-green-600"}),K(B.actual_delivery_date)]})]})]}),B.notes&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Separator,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{className:"text-sm text-muted-foreground",children:"Notes"}),(0,t.jsx)("p",{className:"mt-1 p-3 bg-muted rounded-md text-sm",children:B.notes})]})]})]})]}),E&&(0,t.jsxs)(y.Card,{children:[(0,t.jsxs)(y.CardHeader,{children:[(0,t.jsx)(y.CardTitle,{children:"Edit Order"}),(0,t.jsx)(y.CardDescription,{children:"Update order status, delivery date, and notes"})]}),(0,t.jsxs)(y.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(_.Select,{value:R.status,onValueChange:e=>q({...R,status:e}),children:[(0,t.jsx)(_.SelectTrigger,{children:(0,t.jsx)(_.SelectValue,{placeholder:"Select status"})}),(0,t.jsxs)(_.SelectContent,{children:[(0,t.jsx)(_.SelectItem,{value:"draft",children:"Draft"}),(0,t.jsx)(_.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(_.SelectItem,{value:"ordered",children:"Ordered"}),(0,t.jsx)(_.SelectItem,{value:"delivered",children:"Delivered"}),(0,t.jsx)(_.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{htmlFor:"actual_delivery_date",children:"Actual Delivery Date"}),(0,t.jsx)(b.Input,{id:"actual_delivery_date",type:"date",value:R.actual_delivery_date,onChange:e=>q({...R,actual_delivery_date:e.target.value})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Label,{htmlFor:"notes",children:"Notes"}),(0,t.jsx)(w.Textarea,{id:"notes",value:R.notes,onChange:e=>q({...R,notes:e.target.value}),placeholder:"Add any additional notes about this order...",rows:3})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(g.Button,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),(0,t.jsx)(g.Button,{onClick:H,disabled:z.isPending,children:z.isPending?"Saving...":"Save Changes"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(y.Card,{children:[(0,t.jsx)(y.CardHeader,{children:(0,t.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Building2,{className:"h-5 w-5"}),"Supplier"]})}),(0,t.jsxs)(y.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:B.supplier_name||"—"}),B.supplier_contact&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:B.supplier_contact})]}),B.supplier_phone&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Phone:"}),(0,t.jsx)("span",{children:B.supplier_phone})]}),B.supplier_email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Email:"}),(0,t.jsx)("span",{children:B.supplier_email})]})]})]}),B.project_name&&(0,t.jsxs)(y.Card,{children:[(0,t.jsx)(y.CardHeader,{children:(0,t.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.MapPin,{className:"h-5 w-5"}),"Project"]})}),(0,t.jsx)(y.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"font-medium",children:B.project_name}),B.project_id&&(0,t.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>O.push("/dashboard/projects/".concat(B.project_id)),children:(0,t.jsx)(o.ExternalLink,{className:"h-4 w-4"})})]})})]}),(0,t.jsxs)(y.Card,{children:[(0,t.jsx)(y.CardHeader,{children:(0,t.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.User,{className:"h-5 w-5"}),"Order Details"]})}),(0,t.jsxs)(y.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created by"}),(0,t.jsx)("p",{className:"font-medium",children:B.created_by_name||"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Order ID"}),(0,t.jsx)("p",{className:"font-mono text-sm",children:B.id})]}),B.created_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created"}),(0,t.jsx)("p",{className:"text-sm",children:K(B.created_at)})]})]})]}),M&&!E&&(0,t.jsxs)(y.Card,{children:[(0,t.jsx)(y.CardHeader,{children:(0,t.jsx)(y.CardTitle,{children:"Quick Actions"})}),(0,t.jsxs)(y.CardContent,{className:"space-y-2",children:["pending"===B.status&&(0,t.jsxs)(g.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>V("ordered"),disabled:z.isPending,children:[(0,t.jsx)(f.Truck,{className:"mr-2 h-4 w-4"}),z.isPending?"Updating...":"Mark as Ordered"]}),("pending"===B.status||"ordered"===B.status)&&(0,t.jsxs)(g.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>V("delivered",new Date().toISOString().split("T")[0]),disabled:z.isPending,children:[(0,t.jsx)(l.CheckCircle,{className:"mr-2 h-4 w-4"}),z.isPending?"Updating...":"Mark as Delivered"]})]})]})]})]})]})}}]);