(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64617,e=>{"use strict";e.s(["default",()=>eG],64617);var t=e.i(43476),a=e.i(71645),r=e.i(17923),i=e.i(78583),n=e.i(40160),l=e.i(61911),s=e.i(21218),o=e.i(12426),c=e.i(25652),d=e.i(7486),u=e.i(88844),m=e.i(39616),h=e.i(78894),p=e.i(69638),x=e.i(35408),g=e.i(19455),f=e.i(15288),v=e.i(87486),y=e.i(67489),j=e.i(9694),b=e.i(75225),C=e.i(85183),N=e.i(93230),P=e.i(72526),A=e.i(34239),w=e.i(31195),E=e.i(41891),S=e.i(38814),k=e.i(22787),D=a,I=e.i(7670),T=e.i(72733),O=e.i(38279),L=e.i(97865),M=e.i(7467),R=e.i(62728),B=e.i(94395),U=e.i(79812),F=e.i(81977),W=e.i(41818),K=e.i(844),z=e.i(59798),_=e.i(61849),G=e.i(61764),V=e.i(46710),q=e.i(92860),H=e.i(91526),Y=(e,t,a,r)=>(0,G.selectAxisWithScale)(e,"xAxis",t,r),X=(e,t,a,r)=>(0,G.selectTicksOfGraphicalItem)(e,"xAxis",t,r),J=(e,t,a,r)=>(0,G.selectAxisWithScale)(e,"yAxis",a,r),Q=(e,t,a,r)=>(0,G.selectTicksOfGraphicalItem)(e,"yAxis",a,r),Z=(0,_.createSelector)([V.selectChartLayout,Y,J,X,Q],(e,t,a,r,i)=>(0,U.isCategoricalAxis)(e,"xAxis")?(0,U.getBandSizeOfAxis)(t,r,!1):(0,U.getBandSizeOfAxis)(a,i,!1)),$=(0,_.createSelector)([G.selectUnfilteredCartesianItems,(e,t,a,r,i)=>i],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),ee=(0,_.createSelector)([V.selectChartLayout,Y,J,X,Q,(e,t,a,r,i)=>{var n,l,s=$(e,t,a,r,i);if(null!=s){var o=(0,V.selectChartLayout)(e);if(null!=(l=(0,U.isCategoricalAxis)(o,"xAxis")?(0,G.selectStackGroups)(e,"yAxis",a,r):(0,G.selectStackGroups)(e,"xAxis",t,r))){var{stackId:c}=s,d=(0,H.getStackSeriesIdentifier)(s);if(null!=c&&null!=d){var u=null==(n=l[c])?void 0:n.stackedData;return null==u?void 0:u.find(e=>e.key===d)}}}},q.selectChartDataWithIndexesIfNotInPanorama,Z,$],(e,t,a,r,i,n,l,s,o)=>{var c,{chartData:d,dataStartIndex:u,dataEndIndex:m}=l;if(null!=o&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=a&&null!=r&&null!=i&&0!==r.length&&0!==i.length&&null!=s){var{data:h}=o;if(null!=(c=h&&h.length>0?h:null==d?void 0:d.slice(u,m+1)))return function(e){var t,{areaSettings:{connectNulls:a,baseValue:r,dataKey:i},stackedData:n,layout:l,chartBaseValue:s,xAxis:o,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:m,yAxisTicks:h,bandSize:p}=e,x=n&&n.length,g=((e,t,a,r,i)=>{var n=null!=a?a:t;if((0,B.isNumber)(n))return n;var l="horizontal"===e?i:r,s=l.scale.domain();if("number"===l.type){var o=Math.max(s[0],s[1]),c=Math.min(s[0],s[1]);return"dataMin"===n?c:"dataMax"===n||o<0?o:Math.max(Math.min(s[0],s[1]),0)}return"dataMin"===n?s[0]:"dataMax"===n?s[1]:s[0]})(l,s,r,o,c),f="horizontal"===l,v=!1,y=d.map((e,t)=>{x?r=n[u+t]:Array.isArray(r=(0,U.getValueByDataKey)(e,i))?v=!0:r=[g,r];var r,l=null==r[1]||x&&!a&&null==(0,U.getValueByDataKey)(e,i);return f?{x:(0,U.getCateCoordinateOfLine)({axis:o,ticks:m,bandSize:p,entry:e,index:t}),y:l?null:c.scale(r[1]),value:r,payload:e}:{x:l?null:o.scale(r[1]),y:(0,U.getCateCoordinateOfLine)({axis:c,ticks:h,bandSize:p,entry:e,index:t}),value:r,payload:e}});return t=x||v?y.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return f?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?o.scale(t):null,y:e.y,payload:e.payload}}):f?c.scale(g):o.scale(g),{points:y,baseLine:t,isRange:v}}({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:i,dataStartIndex:u,areaSettings:o,stackedData:n,displayedData:c,chartBaseValue:void 0,bandSize:s})}}),et=e.i(75337),ea=e.i(75502),er=e.i(95146),ei=e.i(27241),en=e.i(40657),el=e.i(51883),es=e.i(22075),eo=e.i(52734),ec=e.i(15549),ed=e.i(91187),eu=e.i(57999),em=e.i(66576),eh=["id"],ep=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ex(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function eg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ef(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(a),!0).forEach(function(t){var r,i,n;r=e,i=t,n=a[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eg(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ev(){return(ev=Object.assign.bind()).apply(null,arguments)}function ey(e,t){return e&&"none"!==e?e:t}function ej(e){var{dataKey:t,data:a,stroke:r,strokeWidth:i,fill:n,name:l,hide:s,unit:o}=e;return{dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:n,dataKey:t,nameKey:void 0,name:(0,U.getTooltipNameProp)(l,t),hide:s,type:e.tooltipType,color:ey(r,n),unit:o}}}function eb(e){var{clipPathId:t,points:a,props:r}=e,{needClip:i,dot:n,dataKey:l}=r;if(null==a||!n&&1!==a.length)return null;var s=(0,F.isClipDot)(n),o=(0,eu.svgPropertiesNoEvents)(r),c=(0,F.filterProps)(n,!0),d=a.map((e,t)=>{var r,i=ef(ef(ef({key:"dot-".concat(t),r:3},o),c),{},{index:t,cx:e.x,cy:e.y,dataKey:l,value:e.value,payload:e.payload,points:a});if(D.isValidElement(n))r=D.cloneElement(n,i);else if("function"==typeof n)r=n(i);else{var s=(0,I.clsx)("recharts-area-dot","boolean"!=typeof n?n.className:"");r=D.createElement(O.Dot,ev({},i,{className:s}))}return r}),u={clipPath:i?"url(#clipPath-".concat(s?"":"dots-").concat(t,")"):void 0};return D.createElement(L.Layer,ev({className:"recharts-area-dots"},u),d)}function eC(e){var{showLabels:t,children:a,points:r}=e,i=r.map(e=>{var t={x:e.x,y:e.y,width:0,height:0};return ef(ef({},t),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:t,fill:void 0})});return D.createElement(M.CartesianLabelListContextProvider,{value:t?i:null},a)}function eN(e){var{points:t,baseLine:a,needClip:r,clipPathId:i,props:n}=e,{layout:l,type:s,stroke:o,connectNulls:c,isRange:d}=n,{id:u}=n,m=ex(n,eh),h=(0,eu.svgPropertiesNoEvents)(m);return D.createElement(D.Fragment,null,(null==t?void 0:t.length)>1&&D.createElement(L.Layer,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},D.createElement(T.Curve,ev({},h,{id:u,points:t,connectNulls:c,type:s,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),"none"!==o&&D.createElement(T.Curve,ev({},h,{className:"recharts-area-curve",layout:l,type:s,connectNulls:c,fill:"none",points:t})),"none"!==o&&d&&D.createElement(T.Curve,ev({},h,{className:"recharts-area-curve",layout:l,type:s,connectNulls:c,fill:"none",points:a}))),D.createElement(eb,{points:t,props:m,clipPathId:i}))}function eP(e){var{alpha:t,baseLine:a,points:r,strokeWidth:i}=e,n=r[0].y,l=r[r.length-1].y;if(!(0,es.isWellBehavedNumber)(n)||!(0,es.isWellBehavedNumber)(l))return null;var s=t*Math.abs(n-l),o=Math.max(...r.map(e=>e.x||0));return((0,B.isNumber)(a)?o=Math.max(a,o):a&&Array.isArray(a)&&a.length&&(o=Math.max(...a.map(e=>e.x||0),o)),(0,B.isNumber)(o))?D.createElement("rect",{x:0,y:n<l?n:n-s,width:o+(i?parseInt("".concat(i),10):1),height:Math.floor(s)}):null}function eA(e){var{alpha:t,baseLine:a,points:r,strokeWidth:i}=e,n=r[0].x,l=r[r.length-1].x;if(!(0,es.isWellBehavedNumber)(n)||!(0,es.isWellBehavedNumber)(l))return null;var s=t*Math.abs(n-l),o=Math.max(...r.map(e=>e.y||0));return((0,B.isNumber)(a)?o=Math.max(a,o):a&&Array.isArray(a)&&a.length&&(o=Math.max(...a.map(e=>e.y||0),o)),(0,B.isNumber)(o))?D.createElement("rect",{x:n<l?n:n-s,y:0,width:s,height:Math.floor(o+(i?parseInt("".concat(i),10):1))}):null}function ew(e){var{alpha:t,layout:a,points:r,baseLine:i,strokeWidth:n}=e;return"vertical"===a?D.createElement(eP,{alpha:t,points:r,baseLine:i,strokeWidth:n}):D.createElement(eA,{alpha:t,points:r,baseLine:i,strokeWidth:n})}function eE(e){var{needClip:t,clipPathId:a,props:r,previousPointsRef:i,previousBaselineRef:n}=e,{points:l,baseLine:s,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:u,onAnimationStart:m,onAnimationEnd:h}=r,p=(0,en.useAnimationId)(r,"recharts-area-"),[x,g]=(0,D.useState)(!1),f=(0,D.useCallback)(()=>{"function"==typeof h&&h(),g(!1)},[h]),v=(0,D.useCallback)(()=>{"function"==typeof m&&m(),g(!0)},[m]),y=i.current,j=n.current;return D.createElement(eC,{showLabels:!x,points:l},r.children,D.createElement(em.JavascriptAnimate,{animationId:p,begin:c,duration:d,isActive:o,easing:u,onAnimationEnd:f,onAnimationStart:v,key:p},e=>{if(y){var c,d=y.length/l.length,u=1===e?l:l.map((t,a)=>{var r=Math.floor(a*d);if(y[r]){var i=y[r];return ef(ef({},t),{},{x:(0,B.interpolate)(i.x,t.x,e),y:(0,B.interpolate)(i.y,t.y,e)})}return t});return c=(0,B.isNumber)(s)?(0,B.interpolate)(j,s,e):(0,B.isNullish)(s)||(0,B.isNan)(s)?(0,B.interpolate)(j,0,e):s.map((t,a)=>{var r=Math.floor(a*d);if(Array.isArray(j)&&j[r]){var i=j[r];return ef(ef({},t),{},{x:(0,B.interpolate)(i.x,t.x,e),y:(0,B.interpolate)(i.y,t.y,e)})}return t}),e>0&&(i.current=u,n.current=c),D.createElement(eN,{points:u,baseLine:c,needClip:t,clipPathId:a,props:r})}return e>0&&(i.current=l,n.current=s),D.createElement(L.Layer,null,o&&D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(a)},D.createElement(ew,{alpha:e,points:l,baseLine:s,layout:r.layout,strokeWidth:r.strokeWidth}))),D.createElement(L.Layer,{clipPath:"url(#animationClipPath-".concat(a,")")},D.createElement(eN,{points:l,baseLine:s,needClip:t,clipPathId:a,props:r})))}),D.createElement(M.LabelListFromLabelProp,{label:r.label}))}function eS(e){var{needClip:t,clipPathId:a,props:r}=e,i=(0,D.useRef)(null),n=(0,D.useRef)();return D.createElement(eE,{needClip:t,clipPathId:a,props:r,previousPointsRef:i,previousBaselineRef:n})}class ek extends D.PureComponent{render(){var e,{hide:t,dot:a,points:r,className:i,top:n,left:l,needClip:s,xAxisId:o,yAxisId:c,width:d,height:u,id:m,baseLine:h}=this.props;if(t)return null;var p=(0,I.clsx)("recharts-area",i),{r:x=3,strokeWidth:g=2}=null!=(e=(0,F.filterProps)(a,!1))?e:{r:3,strokeWidth:2},f=(0,F.isClipDot)(a),v=2*x+g;return D.createElement(D.Fragment,null,D.createElement(L.Layer,{className:p},s&&D.createElement("defs",null,D.createElement(z.GraphicalItemClipPath,{clipPathId:m,xAxisId:o,yAxisId:c}),!f&&D.createElement("clipPath",{id:"clipPath-dots-".concat(m)},D.createElement("rect",{x:l-v/2,y:n-v/2,width:d+v,height:u+v}))),D.createElement(eS,{needClip:s,clipPathId:m,props:this.props})),D.createElement(W.ActivePoints,{points:r,mainColor:ey(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(h)&&D.createElement(W.ActivePoints,{points:h,mainColor:ey(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var eD={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!R.Global.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function eI(e){var t,a=(0,el.resolveDefaultProps)(e,eD),{activeDot:r,animationBegin:i,animationDuration:n,animationEasing:l,connectNulls:s,dot:o,fill:c,fillOpacity:d,hide:u,isAnimationActive:m,legendType:h,stroke:p,xAxisId:x,yAxisId:g}=a,f=ex(a,ep),v=(0,V.useChartLayout)(),y=(0,ea.useChartName)(),{needClip:j}=(0,z.useNeedsClip)(x,g),b=(0,et.useIsPanorama)(),{points:C,isRange:N,baseLine:P}=null!=(t=(0,ei.useAppSelector)(t=>ee(t,x,g,b,e.id)))?t:{},A=(0,eo.usePlotArea)();if("horizontal"!==v&&"vertical"!==v||null==A||"AreaChart"!==y&&"ComposedChart"!==y)return null;var{height:w,width:E,x:S,y:k}=A;return C&&C.length?D.createElement(ek,ev({},f,{activeDot:r,animationBegin:i,animationDuration:n,animationEasing:l,baseLine:P,connectNulls:s,dot:o,fill:c,fillOpacity:d,height:w,hide:u,layout:v,isAnimationActive:m,isRange:N,legendType:h,needClip:j,points:C,stroke:p,width:E,left:S,top:k,xAxisId:x,yAxisId:g})):null}var eT=D.memo(function(e){var t=(0,el.resolveDefaultProps)(e,eD),a=(0,et.useIsPanorama)();return D.createElement(ec.RegisterGraphicalItemId,{id:t.id,type:"area"},e=>D.createElement(D.Fragment,null,D.createElement(er.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,fill:i,legendType:n,hide:l}=e;return[{inactive:l,dataKey:t,type:n,color:ey(r,i),value:(0,U.getTooltipNameProp)(a,t),payload:e}]})(t)}),D.createElement(K.SetTooltipEntrySettings,{fn:ej,args:t}),D.createElement(ed.SetCartesianGraphicalItem,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:(0,U.getNormalizedStackId)(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:a,connectNulls:t.connectNulls}),D.createElement(eI,ev({},t,{id:e}))))});eT.displayName="Area";var eO=e.i(25949),eL=e.i(33369),eM=["axis"],eR=(0,a.forwardRef)((e,t)=>a.createElement(eL.CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:eM,tooltipPayloadSearcher:eO.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),eB=e.i(32661),eU=e.i(88980),eF=e.i(28191),eW=e.i(31894),eK=e.i(4382),ez=e.i(77126),e_=e.i(86241);function eG(){let[e,j]=(0,a.useState)("month"),[b,C]=(0,a.useState)("all"),{data:N,isLoading:P}=(0,eB.useProjects)({page:1,per_page:1e3}),{data:A,isLoading:w}=(0,eU.useWorkEntries)({page:1,per_page:1e3}),{data:E,isLoading:S}=(0,eF.useCrews)({page:1,per_page:1e3}),{data:k,isLoading:D}=(0,eW.useFinancialSummary)(),{data:I,isLoading:T}=(0,eK.useMaterials)({page:1,per_page:1e3}),{data:O,isLoading:L}=(0,ez.useEquipment)({per_page:1e3}),{data:M,isLoading:R}=(0,e_.useAllocations)({page:1,per_page:1e3}),{data:B,isLoading:U}=(0,eK.useOrders)({page:1,per_page:1e3}),F=(null==N?void 0:N.items)||[],W=(null==A?void 0:A.items)||[],K=(null==E?void 0:E.items)||[],z=(null==I?void 0:I.items)||[],_=(null==O?void 0:O.items)||[],G=(null==M?void 0:M.items)||[],V=(null==B?void 0:B.items)||[],q=(0,a.useMemo)(()=>{var e;let t=F.filter(e=>"completed"===e.status).length,a=F.length,r=a>0?Math.round(t/a*100):0,i=K.filter(e=>"active"===e.status).length,n=new Date().getMonth(),l=new Date().getFullYear(),s=W.filter(e=>{if(!e.created_at)return!1;let t=new Date(e.created_at);return t.getMonth()===n&&t.getFullYear()===l}).length,o=F.reduce((e,t)=>e+(t.budget||0),0),c=(null==k||null==(e=k.summary)?void 0:e.total_expenses)||0;return{projectProgress:r,activeCrews:i,monthlyWorkEntries:s,totalBudget:o,totalSpent:c,budgetUtilization:o>0?Math.round(c/o*100):0}},[F,W,K,k]),H=[{title:"Project Progress",description:"Overall project completion status",icon:d.Building2,value:"".concat(q.projectProgress,"%"),trend:"".concat(F.filter(e=>"completed"===e.status).length,"/").concat(F.length),trendUp:q.projectProgress>50},{title:"Active Teams",description:"Currently working crews",icon:l.Users,value:q.activeCrews.toString(),trend:"".concat(K.length," total"),trendUp:q.activeCrews>0},{title:"Work Entries",description:"Total work entries this month",icon:s.Activity,value:q.monthlyWorkEntries.toString(),trend:"".concat(W.length," total"),trendUp:q.monthlyWorkEntries>0},{title:"Budget Utilization",description:"Current budget usage",icon:o.DollarSign,value:new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(q.totalSpent),trend:"".concat(q.budgetUtilization,"% used"),trendUp:q.budgetUtilization<80}],Y=[{id:"project-summary",name:"Project Summary Report",description:"Comprehensive overview of ".concat(F.length," projects"),category:"Project",format:["PDF","Excel"],dataCount:F.length,enabled:F.length>0},{id:"team-performance",name:"Team Performance Report",description:"Performance metrics for ".concat(K.length," teams"),category:"Team",format:["PDF","Excel"],dataCount:K.length,enabled:K.length>0},{id:"financial-summary",name:"Financial Summary",description:"Budget, costs, and financial tracking",category:"Financial",format:["PDF","Excel"],dataCount:F.filter(e=>e.budget).length,enabled:F.some(e=>e.budget)},{id:"materials-usage",name:"Materials Usage Report",description:"Material consumption for ".concat(z.length," items"),category:"Materials",format:["PDF","Excel"],dataCount:z.length,enabled:z.length>0},{id:"work-progress",name:"Work Progress Report",description:"Analysis of ".concat(W.length," work entries"),category:"Progress",format:["PDF","Excel"],dataCount:W.length,enabled:W.length>0},{id:"equipment-usage",name:"Equipment Usage Report",description:"Utilization of ".concat(_.length," equipment items"),category:"Equipment",format:["PDF","Excel"],dataCount:_.length,enabled:_.length>0},{id:"material-orders",name:"Material Orders Report",description:"Status of ".concat(V.length," purchase orders"),category:"Orders",format:["PDF","Excel"],dataCount:V.length,enabled:V.length>0},{id:"allocations-summary",name:"Resource Allocations Report",description:"Overview of ".concat(G.length," resource allocations"),category:"Allocations",format:["PDF","Excel"],dataCount:G.length,enabled:G.length>0}],X=async(t,a)=>{try{let r=await fetch("/api/reports/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:t,format:a,period:e,project:b})});if(r.ok){let e=await r.blob(),i=window.URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="".concat(t,"-").concat(new Date().toISOString().split("T")[0],".").concat(a.toLowerCase()),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(i),document.body.removeChild(n)}else console.error("Failed to generate report")}catch(e){console.error("Error generating report:",e)}};return P||w||S||D||T||L||R||U?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Reports"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading reports data..."})]})}),(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)(f.Card,{children:(0,t.jsx)(f.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-1/2"}),(0,t.jsx)("div",{className:"h-8 bg-muted rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-muted rounded w-full"})]})})},a))})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Reports & Analytics"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Real-time data insights and comprehensive project reports"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(y.Select,{value:e,onValueChange:j,children:[(0,t.jsx)(y.SelectTrigger,{className:"w-40",children:(0,t.jsx)(y.SelectValue,{placeholder:"Select period"})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"week",children:"This Week"}),(0,t.jsx)(y.SelectItem,{value:"month",children:"This Month"}),(0,t.jsx)(y.SelectItem,{value:"quarter",children:"This Quarter"}),(0,t.jsx)(y.SelectItem,{value:"year",children:"This Year"})]})]}),(0,t.jsxs)(y.Select,{value:b,onValueChange:C,children:[(0,t.jsx)(y.SelectTrigger,{className:"w-48",children:(0,t.jsx)(y.SelectValue,{placeholder:"All Projects"})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"all",children:"All Projects"}),F.map(e=>(0,t.jsx)(y.SelectItem,{value:e.id,children:e.name},e.id))]})]})]})]}),(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:H.map(e=>{let a=e.icon;return(0,t.jsxs)(f.Card,{children:[(0,t.jsxs)(f.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(f.CardTitle,{className:"text-sm font-medium",children:e.title}),(0,t.jsx)(a,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(f.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.value}),(0,t.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.trendUp?(0,t.jsx)(c.TrendingUp,{className:"mr-1 h-3 w-3 text-green-600"}):(0,t.jsx)(x.TrendingDown,{className:"mr-1 h-3 w-3 text-red-600"}),(0,t.jsx)("span",{className:e.trendUp?"text-green-600":"text-red-600",children:e.trend})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})]},e.title)})}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)(f.Card,{children:[(0,t.jsxs)(f.CardHeader,{children:[(0,t.jsx)(f.CardTitle,{children:"Project Status Distribution"}),(0,t.jsx)(f.CardDescription,{children:"Current status of all projects"})]}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)(eV,{projects:F})})]}),(0,t.jsxs)(f.Card,{children:[(0,t.jsxs)(f.CardHeader,{children:[(0,t.jsx)(f.CardTitle,{children:"Work Activity Trends"}),(0,t.jsx)(f.CardDescription,{children:"Work entries over the last 30 days"})]}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)(eq,{workEntries:W})})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)(f.Card,{children:[(0,t.jsxs)(f.CardHeader,{children:[(0,t.jsx)(f.CardTitle,{children:"Material Usage Overview"}),(0,t.jsx)(f.CardDescription,{children:"Current inventory and allocation status"})]}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)(eH,{materials:z,allocations:G})})]}),(0,t.jsxs)(f.Card,{children:[(0,t.jsxs)(f.CardHeader,{children:[(0,t.jsx)(f.CardTitle,{children:"Budget Utilization"}),(0,t.jsx)(f.CardDescription,{children:"Project budget vs actual spending"})]}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)(eY,{projects:F,financialData:k})})]})]}),(0,t.jsxs)(f.Card,{children:[(0,t.jsxs)(f.CardHeader,{children:[(0,t.jsxs)(f.CardTitle,{className:"flex items-center space-x-2",children:[(0,t.jsx)(i.FileText,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Available Reports"})]}),(0,t.jsx)(f.CardDescription,{children:"Generate and download comprehensive project reports"})]}),(0,t.jsxs)(f.CardContent,{children:[(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-2",children:Y.filter(e=>e.enabled).map(e=>(0,t.jsx)(f.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsx)(v.Badge,{variant:"secondary",className:{Project:"bg-blue-100 text-blue-800",Team:"bg-green-100 text-green-800",Financial:"bg-yellow-100 text-yellow-800",Materials:"bg-purple-100 text-purple-800",Progress:"bg-indigo-100 text-indigo-800",Equipment:"bg-red-100 text-red-800",Orders:"bg-orange-100 text-orange-800",Allocations:"bg-teal-100 text-teal-800"}[e.category]||"bg-gray-100 text-gray-800",children:e.category}),(0,t.jsxs)(v.Badge,{variant:"outline",children:[e.dataCount," items"]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,t.jsx)(p.CheckCircle,{className:"mr-1 h-3 w-3 text-green-600"}),"Data available: ",e.dataCount," records"]})]}),(0,t.jsx)("div",{className:"flex flex-col space-y-1",children:e.format.map(a=>(0,t.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>X(e.id,a),className:"min-w-20",children:[(0,t.jsx)(n.Download,{className:"mr-1 h-3 w-3"}),a]},a))})]})},e.id))}),Y.filter(e=>!e.enabled).length>0&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Reports with no data available:"}),(0,t.jsx)("div",{className:"grid gap-2 md:grid-cols-2",children:Y.filter(e=>!e.enabled).map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsx)(h.AlertTriangle,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.name})]},e.id))})]})]})]}),(0,t.jsxs)(f.Card,{children:[(0,t.jsxs)(f.CardHeader,{children:[(0,t.jsxs)(f.CardTitle,{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.BarChart3,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Quick Analysis"})]}),(0,t.jsx)(f.CardDescription,{children:"Instant insights from current data"})]}),(0,t.jsx)(f.CardContent,{children:(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(f.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(s.Activity,{className:"h-6 w-6 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:W.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Work Entries"})]})]})}),(0,t.jsx)(f.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(l.Users,{className:"h-6 w-6 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:K.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Active Teams"})]})]})}),(0,t.jsx)(f.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.Package,{className:"h-6 w-6 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:z.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Material Types"})]})]})}),(0,t.jsx)(f.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Settings,{className:"h-6 w-6 text-red-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:_.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Equipment Items"})]})]})})]})})]})]})}let eV=e=>{let{projects:a}=e,r=a.reduce((e,t)=>{let a=t.status||"unknown",r=e.find(e=>e.status===a);return r?r.count+=1:e.push({status:a.charAt(0).toUpperCase()+a.slice(1),count:1}),e},[]),i=["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"];return(0,t.jsx)(w.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(E.PieChart,{children:[(0,t.jsx)(S.Pie,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{status:t,count:a}=e;return"".concat(t,": ").concat(a)},outerRadius:80,fill:"#8884d8",dataKey:"count",children:r.map((e,a)=>(0,t.jsx)(k.Cell,{fill:i[a%i.length]},"cell-".concat(a)))}),(0,t.jsx)(A.Tooltip,{})]})})},eq=e=>{let{workEntries:a}=e,r=Array.from({length:30},(e,t)=>{let a=new Date;return a.setDate(a.getDate()-t),{date:a.toISOString().split("T")[0],day:a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),count:0}}).reverse();return a.forEach(e=>{if(e.created_at){let t=new Date(e.created_at).toISOString().split("T")[0],a=r.find(e=>e.date===t);a&&(a.count+=1)}}),(0,t.jsx)(w.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(eR,{data:r,children:[(0,t.jsx)(P.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(C.XAxis,{dataKey:"day"}),(0,t.jsx)(N.YAxis,{}),(0,t.jsx)(A.Tooltip,{}),(0,t.jsx)(eT,{type:"monotone",dataKey:"count",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6})]})})},eH=e=>{let{materials:a,allocations:r}=e,i=a.map(e=>{let t=r.filter(t=>{var a;return(null==(a=t.material)?void 0:a.id)===e.id}).reduce((e,t)=>e+(t.allocated_qty||0),0);return{name:e.name.length>15?e.name.substring(0,15)+"...":e.name,stock:e.current_stock_qty||0,allocated:t}}).slice(0,8);return(0,t.jsx)(w.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(j.BarChart,{data:i,children:[(0,t.jsx)(P.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(C.XAxis,{dataKey:"name"}),(0,t.jsx)(N.YAxis,{}),(0,t.jsx)(A.Tooltip,{}),(0,t.jsx)(b.Bar,{dataKey:"stock",fill:"#22c55e",name:"In Stock"}),(0,t.jsx)(b.Bar,{dataKey:"allocated",fill:"#3b82f6",name:"Allocated"})]})})},eY=e=>{let{projects:a,financialData:r}=e,i=a.filter(e=>e.budget&&e.budget>0).map(e=>({name:e.name.length>20?e.name.substring(0,20)+"...":e.name,budget:e.budget,spent:0})).slice(0,6);return(0,t.jsx)(w.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(j.BarChart,{data:i,children:[(0,t.jsx)(P.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(C.XAxis,{dataKey:"name"}),(0,t.jsx)(N.YAxis,{}),(0,t.jsx)(A.Tooltip,{formatter:e=>["€".concat(e.toLocaleString()),""]}),(0,t.jsx)(b.Bar,{dataKey:"budget",fill:"#3b82f6",name:"Budget"}),(0,t.jsx)(b.Bar,{dataKey:"spent",fill:"#ef4444",name:"Spent"})]})})}}]);