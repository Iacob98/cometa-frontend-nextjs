(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51892,22305,e=>{"use strict";e.s(["Marker",()=>r],51892);var t=e.i(24049),n=e.i(50699),i=e.i(82310),o=e.i(32322);let r=(0,n.createLayerComponent)(function(e,n){let{position:r,...a}=e,s=new o.Marker(r,a);return(0,t.createElementObject)(s,(0,i.extendContext)(n,{overlayContainer:s}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())});e.s(["Popup",()=>s],22305);var a=e.i(71645);let s=(0,n.createOverlayComponent)(function(e,n){let i=new o.Popup(e,n.overlayContainer);return(0,t.createElementObject)(i,n)},function(e,t,n,i){let{position:o}=n;(0,a.useEffect)(function(){let{instance:n}=e;function r(e){e.popup===n&&(n.update(),i(!0))}function a(e){e.popup===n&&i(!1)}return t.map.on({popupopen:r,popupclose:a}),null==t.overlayContainer?(null!=o&&n.setLatLng(o),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){var e;t.map.off({popupopen:r,popupclose:a}),null==(e=t.overlayContainer)||e.unbindPopup(),t.map.removeLayer(n)}},[e,t,i,o])})},36730,e=>{"use strict";e.s(["useMap",()=>i,"useMapEvents",()=>o]);var t=e.i(82310),n=e.i(71645);function i(){return(0,t.useLeafletContext)().map}function o(e){let t=i();return(0,n.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}},27828,e=>{"use strict";e.s(["Polyline",()=>r]);var t=e.i(24049),n=e.i(50699),i=e.i(82310),o=e.i(32322);let r=(0,n.createPathComponent)(function(e,n){let{positions:r,...a}=e,s=new o.Polyline(r,a);return(0,t.createElementObject)(s,(0,i.extendContext)(n,{overlayContainer:s}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)})},16135,e=>{"use strict";e.s(["FeatureLayer",()=>y,"default",()=>g],16135);var t=e.i(43476),n=e.i(71645),i=e.i(51892),o=e.i(22305),r=e.i(27828),a=e.i(24049),s=e.i(50699),l=e.i(82310),c=e.i(32322);let u=(0,s.createPathComponent)(function(e,t){let{positions:n,...i}=e,o=new c.Polygon(n,i);return(0,a.createElementObject)(o,(0,l.extendContext)(t,{overlayContainer:o}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)});var p=e.i(36730);let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"#ef4444":f(e);return c.default.divIcon({html:'<div style="\n      background-color: '.concat(n,';\n      width: 12px;\n      height: 12px;\n      border: 2px solid white;\n      border-radius: 50%;\n      box-shadow: 0 1px 3px rgba(0,0,0,0.3);\n    "></div>'),className:"custom-marker",iconSize:[16,16],iconAnchor:[8,8]})},f=e=>{switch(e){case"project":return"#3b82f6";case"cabinet":return"#10b981";case"segment":return"#f59e0b";case"cut":return"#ef4444";case"work_entry":return"#8b5cf6";case"house":return"#06b6d4";case"measurement":return"#84cc16";default:return"#6b7280"}};function y(e){var a,s,l;let{features:y,onFeatureClick:g,onFeatureEdit:m,editable:x=!1,selectedFeatureId:h}=e,v=(0,p.useMap)(),b=(0,n.useMemo)(()=>y.reduce((e,t)=>{let n=t.geometry.type;return e[n]||(e[n]=[]),e[n].push(t),e},{}),[y]);(0,n.useEffect)(()=>{if(y.length>0){let e=c.default.latLngBounds([]);y.forEach(t=>{let{geometry:n}=t;"Point"===n.type?e.extend([n.coordinates[1],n.coordinates[0]]):"LineString"===n.type?n.coordinates.forEach(t=>{let[n,i]=t;e.extend([i,n])}):"Polygon"===n.type&&n.coordinates[0].forEach(t=>{let[n,i]=t;e.extend([i,n])})}),e.isValid()&&v.fitBounds(e,{padding:[20,20]})}},[y,v]);let C=e=>{g&&g(e)},j=e=>(0,t.jsx)(o.Popup,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"font-semibold text-sm",children:e.entity_type.charAt(0).toUpperCase()+e.entity_type.slice(1)}),e.properties&&(0,t.jsx)("div",{className:"text-xs space-y-1",children:Object.entries(e.properties).map(e=>{let[n,i]=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium",children:[n,":"]})," ",String(i)]},n)})}),x&&m&&(0,t.jsx)("button",{onClick:()=>m(e),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Edit"})]})});return(0,t.jsxs)(t.Fragment,{children:[null==(a=b.Point)?void 0:a.map(e=>{let[n,o]=e.geometry.coordinates,r=e.id===h;return(0,t.jsx)(i.Marker,{position:[o,n],icon:d(e.entity_type,r),eventHandlers:{click:()=>C(e)},children:j(e)},e.id)}),null==(s=b.LineString)?void 0:s.map(e=>{let n=e.geometry.coordinates.map(e=>{let[t,n]=e;return[n,t]}),i=e.id===h;return(0,t.jsx)(r.Polyline,{positions:n,color:f(e.entity_type),weight:i?5:3,opacity:.8,eventHandlers:{click:()=>C(e)},children:j(e)},e.id)}),null==(l=b.Polygon)?void 0:l.map(e=>{let n=e.geometry.coordinates[0].map(e=>{let[t,n]=e;return[n,t]}),i=e.id===h;return(0,t.jsx)(u,{positions:n,color:f(e.entity_type),weight:i?3:2,fillOpacity:.3,eventHandlers:{click:()=>C(e)},children:j(e)},e.id)})]})}let g=y},99297,e=>{e.n(e.i(16135))}]);