(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24687,e=>{"use strict";e.s(["Textarea",()=>l]);var a=e.i(43476),s=e.i(71645),t=e.i(75157);let l=s.forwardRef((e,s)=>{let{className:l,...r}=e;return(0,a.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l),ref:s,...r})});l.displayName="Textarea"},27612,e=>{"use strict";e.s(["Trash2",()=>a],27612);let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},88511,e=>{"use strict";e.s(["Edit",()=>a],88511);let a=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3116,e=>{"use strict";e.s(["Clock",()=>a],3116);let a=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},86536,e=>{"use strict";e.s(["Eye",()=>a],86536);let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},40160,e=>{"use strict";e.s(["Download",()=>a],40160);let a=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},69074,e=>{"use strict";e.s(["Upload",()=>a],69074);let a=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},68148,e=>{"use strict";e.s(["Progress",()=>f],68148);var a=e.i(43476),s=e.i(71645),t=e.i(30030),l=e.i(48425),r="Progress",[n,i]=(0,t.createContextScope)(r),[d,c]=n(r),o=s.forwardRef((e,s)=>{var t,r,n,i;let{__scopeProgress:c,value:o=null,max:x,getValueLabel:m=h,...v}=e;(x||0===x)&&!j(x)&&console.error((t="".concat(x),r="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let f=j(x)?x:100;null===o||g(o,f)||console.error((n="".concat(o),i="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let y=g(o,f)?o:null,N=p(y)?m(y,f):void 0;return(0,a.jsx)(d,{scope:c,value:y,max:f,children:(0,a.jsx)(l.Primitive.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":p(y)?y:void 0,"aria-valuetext":N,role:"progressbar","data-state":u(y,f),"data-value":null!=y?y:void 0,"data-max":f,...v,ref:s})})});o.displayName=r;var x="ProgressIndicator",m=s.forwardRef((e,s)=>{var t;let{__scopeProgress:r,...n}=e,i=c(x,r);return(0,a.jsx)(l.Primitive.div,{"data-state":u(i.value,i.max),"data-value":null!=(t=i.value)?t:void 0,"data-max":i.max,...n,ref:s})});function h(e,a){return"".concat(Math.round(e/a*100),"%")}function u(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function p(e){return"number"==typeof e}function j(e){return p(e)&&!isNaN(e)&&e>0}function g(e,a){return p(e)&&!isNaN(e)&&e<=a&&e>=0}m.displayName=x;var v=e.i(75157);let f=s.forwardRef((e,s)=>{let{className:t,value:l,...r}=e;return(0,a.jsx)(o,{ref:s,className:(0,v.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:(0,a.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});f.displayName=o.displayName},41071,e=>{"use strict";e.s(["MoreHorizontal",()=>a],41071);let a=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},27516,e=>{"use strict";e.s(["History",()=>a],27516);let a=(0,e.i(75254).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},68232,e=>{"use strict";e.s(["default",()=>K],68232);var a=e.i(43476),s=e.i(71645),t=e.i(78583),l=e.i(69074),r=e.i(55436),n=e.i(75254);let i=(0,n.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),d=(0,n.default)("tags",[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]]);var c=e.i(61911),o=e.i(17923),x=e.i(39616);let m=(0,n.default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var h=e.i(19455),u=e.i(93479),p=e.i(15288),j=e.i(77572),g=e.i(76639),v=e.i(87486),f=e.i(40446),y=e.i(73708),N=e.i(40160),w=e.i(86536),C=e.i(88511),D=e.i(27612);let b=(0,n.default)("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]);var k=e.i(3116),M=e.i(84614);let S=(0,n.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),T=(0,n.default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var _=e.i(41071),B=e.i(27516),I=e.i(30896),H=e.i(55146),z=e.i(60112),U=e.i(94913),A=e.i(75157);let P=e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]};function V(e){var l,r,n,i,d,c;let{document:o,onEdit:x,onShare:m,onViewVersions:u,showActions:j=!0,compact:f=!1}=e,[V,E]=(0,s.useState)(!1),{download:F}=(0,z.useDocumentActions)(),O=(c=o.mime_type).startsWith("image/")?y.Image:c.includes("pdf")||c.includes("document")?t.FileText:I.FileIcon,R=()=>{F({id:o.id,filename:o.original_filename})},L=()=>{o.mime_type.startsWith("image/")||o.mime_type.includes("pdf")?E(!0):R()};return f?(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 hover:bg-muted/50 rounded-lg transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(O,{className:"w-6 h-6 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:o.original_filename}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[P(o.size)," â€¢ ",(0,U.formatDistanceToNow)(new Date(o.uploaded_at),{addSuffix:!0})]})]}),j&&(0,a.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:R,children:(0,a.jsx)(N.Download,{className:"w-4 h-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.Card,{className:"h-full",children:[(0,a.jsx)(p.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,a.jsx)(O,{className:"w-6 h-6 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)(p.CardTitle,{className:"text-base truncate",title:o.original_filename,children:o.original_filename}),(0,a.jsxs)(p.CardDescription,{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:P(o.size)}),o.version>1&&(0,a.jsxs)(v.Badge,{variant:"outline",className:"text-xs",children:["v",o.version]})]})]})]}),j&&(0,a.jsxs)(H.DropdownMenu,{children:[(0,a.jsx)(H.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(h.Button,{variant:"ghost",size:"sm",children:(0,a.jsx)(_.MoreHorizontal,{className:"w-4 h-4"})})}),(0,a.jsxs)(H.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(H.DropdownMenuItem,{onClick:L,children:[(0,a.jsx)(w.Eye,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,a.jsxs)(H.DropdownMenuItem,{onClick:R,children:[(0,a.jsx)(N.Download,{className:"w-4 h-4 mr-2"}),"Download"]}),(0,a.jsx)(H.DropdownMenuSeparator,{}),x&&(0,a.jsxs)(H.DropdownMenuItem,{onClick:()=>x(o),children:[(0,a.jsx)(C.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),m&&(0,a.jsxs)(H.DropdownMenuItem,{onClick:()=>m(o),children:[(0,a.jsx)(b,{className:"w-4 h-4 mr-2"}),"Share"]}),u&&(0,a.jsxs)(H.DropdownMenuItem,{onClick:()=>u(o),children:[(0,a.jsx)(B.History,{className:"w-4 h-4 mr-2"}),"Versions"]}),(0,a.jsx)(H.DropdownMenuSeparator,{}),(0,a.jsxs)(H.DropdownMenuItem,{className:"text-destructive",children:[(0,a.jsx)(D.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),(0,a.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Badge,{variant:"secondary",children:(null==(r=o.category)||null==(l=r.name)?void 0:l.en)||(null==(n=o.category)?void 0:n.code)||"Uncategorized"}),(0,a.jsxs)(v.Badge,{className:(0,A.cn)("text-xs",(e=>{let a={public:"bg-green-100 text-green-800",project:"bg-blue-100 text-blue-800",team:"bg-yellow-100 text-yellow-800",private:"bg-purple-100 text-purple-800",admin:"bg-red-100 text-red-800"};return a[e]||a.project})(o.access_level)),children:[(0,a.jsx)(S,{className:"w-3 h-3 mr-1"}),o.access_level]})]}),o.tags&&o.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[o.tags.slice(0,3).map((e,s)=>(0,a.jsxs)(v.Badge,{variant:"outline",className:"text-xs",children:[(0,a.jsx)(T,{className:"w-3 h-3 mr-1"}),e]},s)),o.tags.length>3&&(0,a.jsxs)(v.Badge,{variant:"outline",className:"text-xs",children:["+",o.tags.length-3]})]}),o.ocr_data&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(t.FileText,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Text extracted (",o.ocr_data.confidence,"% confidence)"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.User,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[null==(i=o.uploader)?void 0:i.first_name," ",null==(d=o.uploader)?void 0:d.last_name]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Clock,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(0,U.formatDistanceToNow)(new Date(o.uploaded_at),{addSuffix:!0})})]})]}),(o.project||o.house||o.work_entry)&&(0,a.jsxs)("div",{className:"pt-2 border-t",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Linked to:"}),(0,a.jsxs)("div",{className:"space-y-1",children:[o.project&&(0,a.jsxs)(v.Badge,{variant:"outline",className:"text-xs",children:["Project: ",o.project.name]}),o.house&&(0,a.jsxs)(v.Badge,{variant:"outline",className:"text-xs",children:["House: ",o.house.house_number]}),o.work_entry&&(0,a.jsxs)(v.Badge,{variant:"outline",className:"text-xs",children:["Work Entry: ",o.work_entry.stage_code]})]})]}),j&&(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:L,className:"flex-1",children:[(0,a.jsx)(w.Eye,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,a.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:R,className:"flex-1",children:[(0,a.jsx)(N.Download,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})]}),(0,a.jsx)(g.Dialog,{open:V,onOpenChange:E,children:(0,a.jsxs)(g.DialogContent,{className:"max-w-4xl max-h-[80vh]",children:[(0,a.jsxs)(g.DialogHeader,{children:[(0,a.jsx)(g.DialogTitle,{children:o.original_filename}),(0,a.jsxs)(g.DialogDescription,{children:[P(o.size)," â€¢ ",o.mime_type]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:o.mime_type.startsWith("image/")?(0,a.jsx)("img",{src:o.url,alt:o.original_filename,className:"max-w-full h-auto mx-auto"}):o.mime_type.includes("pdf")?(0,a.jsx)("iframe",{src:o.url,className:"w-full h-96",title:o.original_filename}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(I.FileIcon,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Preview not available for this file type"}),(0,a.jsxs)(h.Button,{onClick:R,className:"mt-4",children:[(0,a.jsx)(N.Download,{className:"w-4 h-4 mr-2"}),"Download File"]})]})})]})})]})}let E=(0,n.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),F=(0,n.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),O=(0,n.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var R=e.i(67489);function L(e){var t;let{projectId:n,houseId:i,workEntryId:d,teamId:c,showUpload:o=!0,title:x="Documents",description:m}=e,[j,y]=(0,s.useState)("grid"),[N,w]=(0,s.useState)(""),[C,D]=(0,s.useState)("all"),[b,k]=(0,s.useState)("all"),[M,S]=(0,s.useState)(!1),{data:T,isLoading:_,error:B}=(0,z.useDocuments)({project_id:n,house_id:i,work_entry_id:d,team_id:c,search:N||void 0,category:"all"!==C?C:void 0,access_level:"all"!==b?b:void 0,page:1,per_page:50}),{data:I}=(0,z.useDocumentCategories)(),H=(null==T?void 0:T.items)||[],U=(null==T?void 0:T.total)||0,A=()=>{S(!1)};return B?(0,a.jsx)(p.Card,{children:(0,a.jsx)(p.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-destructive",children:"Failed to load documents"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:B.message})]})})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:x}),m&&(0,a.jsx)("p",{className:"text-muted-foreground",children:m})]}),o&&(0,a.jsxs)(g.Dialog,{open:M,onOpenChange:S,children:[(0,a.jsx)(g.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(h.Button,{children:[(0,a.jsx)(l.Upload,{className:"mr-2 h-4 w-4"}),"Upload Documents"]})}),(0,a.jsxs)(g.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(g.DialogHeader,{children:[(0,a.jsx)(g.DialogTitle,{children:"Upload Documents"}),(0,a.jsx)(g.DialogDescription,{children:"Upload and organize your project documents"})]}),(0,a.jsx)(f.DocumentUpload,{projectId:n,houseId:i,workEntryId:d,teamId:c,onUploadComplete:A})]})]})]}),(0,a.jsxs)(p.Card,{children:[(0,a.jsx)(p.CardHeader,{children:(0,a.jsx)(p.CardTitle,{className:"text-lg",children:"Filters"})}),(0,a.jsx)(p.CardContent,{children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(u.Input,{placeholder:"Search documents...",value:N,onChange:e=>w(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)(R.Select,{value:C,onValueChange:e=>D(e),children:[(0,a.jsx)(R.SelectTrigger,{className:"w-[200px]",children:(0,a.jsx)(R.SelectValue,{placeholder:"Category"})}),(0,a.jsxs)(R.SelectContent,{children:[(0,a.jsx)(R.SelectItem,{value:"all",children:"All Categories"}),null==I?void 0:I.map(e=>(0,a.jsx)(R.SelectItem,{value:e.code,children:e.name_en||e.name_ru||e.code},e.code))]})]}),(0,a.jsxs)(R.Select,{value:b,onValueChange:e=>k(e),children:[(0,a.jsx)(R.SelectTrigger,{className:"w-[150px]",children:(0,a.jsx)(R.SelectValue,{placeholder:"Access"})}),(0,a.jsxs)(R.SelectContent,{children:[(0,a.jsx)(R.SelectItem,{value:"all",children:"All Access"}),(0,a.jsx)(R.SelectItem,{value:"public",children:"Public"}),(0,a.jsx)(R.SelectItem,{value:"project",children:"Project"}),(0,a.jsx)(R.SelectItem,{value:"team",children:"Team"}),(0,a.jsx)(R.SelectItem,{value:"private",children:"Private"}),(0,a.jsx)(R.SelectItem,{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{className:"flex border rounded-md",children:[(0,a.jsx)(h.Button,{variant:"grid"===j?"default":"ghost",size:"sm",onClick:()=>y("grid"),className:"rounded-r-none",children:(0,a.jsx)(E,{className:"h-4 w-4"})}),(0,a.jsx)(h.Button,{variant:"list"===j?"default":"ghost",size:"sm",onClick:()=>y("list"),className:"rounded-l-none",children:(0,a.jsx)(F,{className:"h-4 w-4"})})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:[U," documents"]}),N&&(0,a.jsxs)("span",{children:['â€¢ Searching for "',N,'"']}),"all"!==C&&(0,a.jsx)(v.Badge,{variant:"secondary",children:(null==I||null==(t=I.find(e=>e.code===C))?void 0:t.name.en)||C}),"all"!==b&&(0,a.jsxs)(v.Badge,{variant:"secondary",children:[b," access"]})]}),_?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,s)=>(0,a.jsxs)(p.Card,{className:"animate-pulse",children:[(0,a.jsxs)(p.CardHeader,{children:[(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-muted rounded w-1/2"})]}),(0,a.jsx)(p.CardContent,{children:(0,a.jsx)("div",{className:"h-20 bg-muted rounded"})})]},s))}):0===H.length?(0,a.jsx)(p.Card,{children:(0,a.jsx)(p.CardContent,{className:"p-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(O,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:N||"all"!==C||"all"!==b?"Try adjusting your filters or search terms":"Get started by uploading your first document"}),o&&(0,a.jsxs)(g.Dialog,{open:M,onOpenChange:S,children:[(0,a.jsx)(g.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(h.Button,{children:[(0,a.jsx)(l.Upload,{className:"mr-2 h-4 w-4"}),"Upload Documents"]})}),(0,a.jsxs)(g.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(g.DialogHeader,{children:[(0,a.jsx)(g.DialogTitle,{children:"Upload Documents"}),(0,a.jsx)(g.DialogDescription,{children:"Upload and organize your project documents"})]}),(0,a.jsx)(f.DocumentUpload,{projectId:n,houseId:i,workEntryId:d,teamId:c,onUploadComplete:A})]})]})]})})}):(0,a.jsx)("div",{className:"grid"===j?"grid gap-4 md:grid-cols-2 lg:grid-cols-3":"space-y-2",children:H.map(e=>(0,a.jsx)(V,{document:e,compact:"list"===j,onEdit:e=>{console.log("Edit document:",e.id)},onShare:e=>{console.log("Share document:",e.id)},onViewVersions:e=>{console.log("View versions:",e.id)}},e.id))}),U>H.length&&(0,a.jsx)("div",{className:"text-center pt-4",children:(0,a.jsx)(h.Button,{variant:"outline",children:"Load More Documents"})})]})}var q=e.i(71436);function K(){let[e,n]=(0,s.useState)("all"),[y,N]=(0,s.useState)(""),[w,C]=(0,s.useState)(!1),{user:D}=(0,q.useAuth)(),{data:b}=(0,z.useDocuments)({page:1,per_page:1}),{data:k}=(0,z.useDocuments)({uploaded_by:null==D?void 0:D.id,page:1,per_page:1}),{data:M}=(0,z.useDocuments)({uploaded_after:new Date(Date.now()-6048e5).toISOString(),page:1,per_page:1}),{data:S}=(0,z.useDocumentCategories)(),T=(0,z.useSearchDocuments)(),_=async e=>{if(e.trim())try{let a=await T.mutateAsync({query:e,include_content:!0,highlight:!0,fuzzy:!0});console.log("Search results:",a)}catch(e){console.error("Search failed:",e)}};return(0,a.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Documents"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your project files and documents"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(g.Dialog,{open:w,onOpenChange:C,children:[(0,a.jsx)(g.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(h.Button,{children:[(0,a.jsx)(l.Upload,{className:"mr-2 h-4 w-4"}),"Upload Documents"]})}),(0,a.jsxs)(g.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(g.DialogHeader,{children:[(0,a.jsx)(g.DialogTitle,{children:"Upload Documents"}),(0,a.jsx)(g.DialogDescription,{children:"Upload and organize your project documents"})]}),(0,a.jsx)(f.DocumentUpload,{onUploadComplete:()=>C(!1)})]})]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Total Documents"}),(0,a.jsx)(t.FileText,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==b?void 0:b.total)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all projects"})]})]}),(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"My Documents"}),(0,a.jsx)(c.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==k?void 0:k.total)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Uploaded by you"})]})]}),(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Recent Documents"}),(0,a.jsx)(m,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==M?void 0:M.total)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]})]}),(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Categories"}),(0,a.jsx)(d,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(p.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==S?void 0:S.length)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Document types"})]})]})]}),(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{children:[(0,a.jsx)(p.CardTitle,{className:"text-lg",children:"Document Search"}),(0,a.jsx)(p.CardDescription,{children:"Search across all documents including their content"})]}),(0,a.jsxs)(p.CardContent,{children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(u.Input,{placeholder:"Search documents and content...",value:y,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_(y)}})}),(0,a.jsxs)(h.Button,{onClick:()=>_(y),disabled:!y.trim()||T.isPending,children:[(0,a.jsx)(r.Search,{className:"h-4 w-4 mr-2"}),T.isPending?"Searching...":"Search"]})]}),T.data&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Found ",T.data.total," results"]})})]})]}),(0,a.jsxs)(p.Card,{children:[(0,a.jsx)(p.CardHeader,{children:(0,a.jsx)(j.Tabs,{value:e,onValueChange:n,className:"w-full",children:(0,a.jsxs)(j.TabsList,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(j.TabsTrigger,{value:"all",children:["All Documents",(null==b?void 0:b.total)&&(0,a.jsx)(v.Badge,{variant:"secondary",className:"ml-1 h-4 text-xs",children:b.total})]}),(0,a.jsxs)(j.TabsTrigger,{value:"my",children:["My Documents",(null==k?void 0:k.total)&&(0,a.jsx)(v.Badge,{variant:"secondary",className:"ml-1 h-4 text-xs",children:k.total})]}),(0,a.jsxs)(j.TabsTrigger,{value:"recent",children:["Recent",(null==M?void 0:M.total)&&(0,a.jsx)(v.Badge,{variant:"secondary",className:"ml-1 h-4 text-xs",children:M.total})]}),(0,a.jsx)(j.TabsTrigger,{value:"shared",children:"Shared"})]})})}),(0,a.jsx)(p.CardContent,{children:(0,a.jsx)(L,{...(()=>{switch(e){case"my":return{uploaded_by:null==D?void 0:D.id};case"recent":return{uploaded_after:new Date(Date.now()-6048e5).toISOString()};case"shared":return{access_level:"public"};default:return{}}})(),showUpload:!1,title:"",description:""},e)})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsx)(p.Card,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:(0,a.jsxs)(p.CardHeader,{children:[(0,a.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(i,{className:"h-5 w-5"}),"Browse by Category"]}),(0,a.jsx)(p.CardDescription,{children:"Explore documents organized by type and category"})]})}),(0,a.jsx)(p.Card,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:(0,a.jsxs)(p.CardHeader,{children:[(0,a.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.BarChart3,{className:"h-5 w-5"}),"Document Analytics"]}),(0,a.jsx)(p.CardDescription,{children:"View storage usage and document statistics"})]})}),(0,a.jsx)(p.Card,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:(0,a.jsxs)(p.CardHeader,{children:[(0,a.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Settings,{className:"h-5 w-5"}),"Document Settings"]}),(0,a.jsx)(p.CardDescription,{children:"Manage categories, access controls, and preferences"})]})})]})]})}}]);